var uy=Object.defineProperty;var qh=d=>{throw TypeError(d)};var fy=(d,s,o)=>s in d?uy(d,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[s]=o;var z=(d,s,o)=>fy(d,typeof s!="symbol"?s+"":s,o),Ih=(d,s,o)=>s.has(d)||qh("Cannot "+o);var ve=(d,s,o)=>(Ih(d,s,"read from private field"),o?o.call(d):s.get(d)),gt=(d,s,o)=>s.has(d)?qh("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(d):s.set(d,o),Ie=(d,s,o,a)=>(Ih(d,s,"write to private field"),a?a.call(d,o):s.set(d,o),o);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))a(w);new MutationObserver(w=>{for(const T of w)if(T.type==="childList")for(const b of T.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&a(b)}).observe(document,{childList:!0,subtree:!0});function o(w){const T={};return w.integrity&&(T.integrity=w.integrity),w.referrerPolicy&&(T.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?T.credentials="include":w.crossOrigin==="anonymous"?T.credentials="omit":T.credentials="same-origin",T}function a(w){if(w.ep)return;w.ep=!0;const T=o(w);fetch(w.href,T)}})();var Md={exports:{}},ns={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh;function py(){if(Hh)return ns;Hh=1;var d=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function o(a,w,T){var b=null;if(T!==void 0&&(b=""+T),w.key!==void 0&&(b=""+w.key),"key"in w){T={};for(var E in w)E!=="key"&&(T[E]=w[E])}else T=w;return w=T.ref,{$$typeof:d,type:a,key:b,ref:w!==void 0?w:null,props:T}}return ns.Fragment=s,ns.jsx=o,ns.jsxs=o,ns}var Vh;function hy(){return Vh||(Vh=1,Md.exports=py()),Md.exports}var Ri=hy(),Ld={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gh;function my(){if(Gh)return ye;Gh=1;var d=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),b=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function L(q){return q===null||typeof q!="object"?null:(q=_&&q[_]||q["@@iterator"],typeof q=="function"?q:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,g={};function h(q,W,re){this.props=q,this.context=W,this.refs=g,this.updater=re||k}h.prototype.isReactComponent={},h.prototype.setState=function(q,W){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,W,"setState")},h.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function c(){}c.prototype=h.prototype;function f(q,W,re){this.props=q,this.context=W,this.refs=g,this.updater=re||k}var u=f.prototype=new c;u.constructor=f,N(u,h.prototype),u.isPureReactComponent=!0;var p=Array.isArray,m={H:null,A:null,T:null,S:null,V:null},y=Object.prototype.hasOwnProperty;function v(q,W,re,ne,se,be){return re=be.ref,{$$typeof:d,type:q,key:W,ref:re!==void 0?re:null,props:be}}function C(q,W){return v(q.type,W,void 0,void 0,void 0,q.props)}function S(q){return typeof q=="object"&&q!==null&&q.$$typeof===d}function O(q){var W={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(re){return W[re]})}var U=/\/+/g;function I(q,W){return typeof q=="object"&&q!==null&&q.key!=null?O(""+q.key):W.toString(36)}function A(){}function Y(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(A,A):(q.status="pending",q.then(function(W){q.status==="pending"&&(q.status="fulfilled",q.value=W)},function(W){q.status==="pending"&&(q.status="rejected",q.reason=W)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Z(q,W,re,ne,se){var be=typeof q;(be==="undefined"||be==="boolean")&&(q=null);var me=!1;if(q===null)me=!0;else switch(be){case"bigint":case"string":case"number":me=!0;break;case"object":switch(q.$$typeof){case d:case s:me=!0;break;case x:return me=q._init,Z(me(q._payload),W,re,ne,se)}}if(me)return se=se(q),me=ne===""?"."+I(q,0):ne,p(se)?(re="",me!=null&&(re=me.replace(U,"$&/")+"/"),Z(se,W,re,"",function(Tt){return Tt})):se!=null&&(S(se)&&(se=C(se,re+(se.key==null||q&&q.key===se.key?"":(""+se.key).replace(U,"$&/")+"/")+me)),W.push(se)),1;me=0;var et=ne===""?".":ne+":";if(p(q))for(var ke=0;ke<q.length;ke++)ne=q[ke],be=et+I(ne,ke),me+=Z(ne,W,re,be,se);else if(ke=L(q),typeof ke=="function")for(q=ke.call(q),ke=0;!(ne=q.next()).done;)ne=ne.value,be=et+I(ne,ke++),me+=Z(ne,W,re,be,se);else if(be==="object"){if(typeof q.then=="function")return Z(Y(q),W,re,ne,se);throw W=String(q),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return me}function j(q,W,re){if(q==null)return q;var ne=[],se=0;return Z(q,ne,"","",function(be){return W.call(re,be,se++)}),ne}function V(q){if(q._status===-1){var W=q._result;W=W(),W.then(function(re){(q._status===0||q._status===-1)&&(q._status=1,q._result=re)},function(re){(q._status===0||q._status===-1)&&(q._status=2,q._result=re)}),q._status===-1&&(q._status=0,q._result=W)}if(q._status===1)return q._result.default;throw q._result}var te=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function le(){}return ye.Children={map:j,forEach:function(q,W,re){j(q,function(){W.apply(this,arguments)},re)},count:function(q){var W=0;return j(q,function(){W++}),W},toArray:function(q){return j(q,function(W){return W})||[]},only:function(q){if(!S(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},ye.Component=h,ye.Fragment=o,ye.Profiler=w,ye.PureComponent=f,ye.StrictMode=a,ye.Suspense=M,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=m,ye.__COMPILER_RUNTIME={__proto__:null,c:function(q){return m.H.useMemoCache(q)}},ye.cache=function(q){return function(){return q.apply(null,arguments)}},ye.cloneElement=function(q,W,re){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ne=N({},q.props),se=q.key,be=void 0;if(W!=null)for(me in W.ref!==void 0&&(be=void 0),W.key!==void 0&&(se=""+W.key),W)!y.call(W,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&W.ref===void 0||(ne[me]=W[me]);var me=arguments.length-2;if(me===1)ne.children=re;else if(1<me){for(var et=Array(me),ke=0;ke<me;ke++)et[ke]=arguments[ke+2];ne.children=et}return v(q.type,se,void 0,void 0,be,ne)},ye.createContext=function(q){return q={$$typeof:b,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:T,_context:q},q},ye.createElement=function(q,W,re){var ne,se={},be=null;if(W!=null)for(ne in W.key!==void 0&&(be=""+W.key),W)y.call(W,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(se[ne]=W[ne]);var me=arguments.length-2;if(me===1)se.children=re;else if(1<me){for(var et=Array(me),ke=0;ke<me;ke++)et[ke]=arguments[ke+2];se.children=et}if(q&&q.defaultProps)for(ne in me=q.defaultProps,me)se[ne]===void 0&&(se[ne]=me[ne]);return v(q,be,void 0,void 0,null,se)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(q){return{$$typeof:E,render:q}},ye.isValidElement=S,ye.lazy=function(q){return{$$typeof:x,_payload:{_status:-1,_result:q},_init:V}},ye.memo=function(q,W){return{$$typeof:R,type:q,compare:W===void 0?null:W}},ye.startTransition=function(q){var W=m.T,re={};m.T=re;try{var ne=q(),se=m.S;se!==null&&se(re,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(le,te)}catch(be){te(be)}finally{m.T=W}},ye.unstable_useCacheRefresh=function(){return m.H.useCacheRefresh()},ye.use=function(q){return m.H.use(q)},ye.useActionState=function(q,W,re){return m.H.useActionState(q,W,re)},ye.useCallback=function(q,W){return m.H.useCallback(q,W)},ye.useContext=function(q){return m.H.useContext(q)},ye.useDebugValue=function(){},ye.useDeferredValue=function(q,W){return m.H.useDeferredValue(q,W)},ye.useEffect=function(q,W,re){var ne=m.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(q,W)},ye.useId=function(){return m.H.useId()},ye.useImperativeHandle=function(q,W,re){return m.H.useImperativeHandle(q,W,re)},ye.useInsertionEffect=function(q,W){return m.H.useInsertionEffect(q,W)},ye.useLayoutEffect=function(q,W){return m.H.useLayoutEffect(q,W)},ye.useMemo=function(q,W){return m.H.useMemo(q,W)},ye.useOptimistic=function(q,W){return m.H.useOptimistic(q,W)},ye.useReducer=function(q,W,re){return m.H.useReducer(q,W,re)},ye.useRef=function(q){return m.H.useRef(q)},ye.useState=function(q){return m.H.useState(q)},ye.useSyncExternalStore=function(q,W,re){return m.H.useSyncExternalStore(q,W,re)},ye.useTransition=function(){return m.H.useTransition()},ye.version="19.1.0",ye}var Yh;function iu(){return Yh||(Yh=1,Ld.exports=my()),Ld.exports}var xt=iu(),Od={exports:{}},rs={},kd={exports:{}},Ad={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh;function gy(){return Qh||(Qh=1,function(d){function s(j,V){var te=j.length;j.push(V);e:for(;0<te;){var le=te-1>>>1,q=j[le];if(0<w(q,V))j[le]=V,j[te]=q,te=le;else break e}}function o(j){return j.length===0?null:j[0]}function a(j){if(j.length===0)return null;var V=j[0],te=j.pop();if(te!==V){j[0]=te;e:for(var le=0,q=j.length,W=q>>>1;le<W;){var re=2*(le+1)-1,ne=j[re],se=re+1,be=j[se];if(0>w(ne,te))se<q&&0>w(be,ne)?(j[le]=be,j[se]=te,le=se):(j[le]=ne,j[re]=te,le=re);else if(se<q&&0>w(be,te))j[le]=be,j[se]=te,le=se;else break e}}return V}function w(j,V){var te=j.sortIndex-V.sortIndex;return te!==0?te:j.id-V.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var T=performance;d.unstable_now=function(){return T.now()}}else{var b=Date,E=b.now();d.unstable_now=function(){return b.now()-E}}var M=[],R=[],x=1,_=null,L=3,k=!1,N=!1,g=!1,h=!1,c=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;function p(j){for(var V=o(R);V!==null;){if(V.callback===null)a(R);else if(V.startTime<=j)a(R),V.sortIndex=V.expirationTime,s(M,V);else break;V=o(R)}}function m(j){if(g=!1,p(j),!N)if(o(M)!==null)N=!0,y||(y=!0,I());else{var V=o(R);V!==null&&Z(m,V.startTime-j)}}var y=!1,v=-1,C=5,S=-1;function O(){return h?!0:!(d.unstable_now()-S<C)}function U(){if(h=!1,y){var j=d.unstable_now();S=j;var V=!0;try{e:{N=!1,g&&(g=!1,f(v),v=-1),k=!0;var te=L;try{t:{for(p(j),_=o(M);_!==null&&!(_.expirationTime>j&&O());){var le=_.callback;if(typeof le=="function"){_.callback=null,L=_.priorityLevel;var q=le(_.expirationTime<=j);if(j=d.unstable_now(),typeof q=="function"){_.callback=q,p(j),V=!0;break t}_===o(M)&&a(M),p(j)}else a(M);_=o(M)}if(_!==null)V=!0;else{var W=o(R);W!==null&&Z(m,W.startTime-j),V=!1}}break e}finally{_=null,L=te,k=!1}V=void 0}}finally{V?I():y=!1}}}var I;if(typeof u=="function")I=function(){u(U)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Y=A.port2;A.port1.onmessage=U,I=function(){Y.postMessage(null)}}else I=function(){c(U,0)};function Z(j,V){v=c(function(){j(d.unstable_now())},V)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(j){j.callback=null},d.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<j?Math.floor(1e3/j):5},d.unstable_getCurrentPriorityLevel=function(){return L},d.unstable_next=function(j){switch(L){case 1:case 2:case 3:var V=3;break;default:V=L}var te=L;L=V;try{return j()}finally{L=te}},d.unstable_requestPaint=function(){h=!0},d.unstable_runWithPriority=function(j,V){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var te=L;L=j;try{return V()}finally{L=te}},d.unstable_scheduleCallback=function(j,V,te){var le=d.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?le+te:le):te=le,j){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=te+q,j={id:x++,callback:V,priorityLevel:j,startTime:te,expirationTime:q,sortIndex:-1},te>le?(j.sortIndex=te,s(R,j),o(M)===null&&j===o(R)&&(g?(f(v),v=-1):g=!0,Z(m,te-le))):(j.sortIndex=q,s(M,j),N||k||(N=!0,y||(y=!0,I()))),j},d.unstable_shouldYield=O,d.unstable_wrapCallback=function(j){var V=L;return function(){var te=L;L=V;try{return j.apply(this,arguments)}finally{L=te}}}}(Ad)),Ad}var Kh;function _y(){return Kh||(Kh=1,kd.exports=gy()),kd.exports}var Pd={exports:{}},bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh;function vy(){if(Xh)return bt;Xh=1;var d=iu();function s(M){var R="https://react.dev/errors/"+M;if(1<arguments.length){R+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)R+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+M+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(s(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},w=Symbol.for("react.portal");function T(M,R,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:w,key:_==null?null:""+_,children:M,containerInfo:R,implementation:x}}var b=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function E(M,R){if(M==="font")return"";if(typeof R=="string")return R==="use-credentials"?R:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,bt.createPortal=function(M,R){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11)throw Error(s(299));return T(M,R,null,x)},bt.flushSync=function(M){var R=b.T,x=a.p;try{if(b.T=null,a.p=2,M)return M()}finally{b.T=R,a.p=x,a.d.f()}},bt.preconnect=function(M,R){typeof M=="string"&&(R?(R=R.crossOrigin,R=typeof R=="string"?R==="use-credentials"?R:"":void 0):R=null,a.d.C(M,R))},bt.prefetchDNS=function(M){typeof M=="string"&&a.d.D(M)},bt.preinit=function(M,R){if(typeof M=="string"&&R&&typeof R.as=="string"){var x=R.as,_=E(x,R.crossOrigin),L=typeof R.integrity=="string"?R.integrity:void 0,k=typeof R.fetchPriority=="string"?R.fetchPriority:void 0;x==="style"?a.d.S(M,typeof R.precedence=="string"?R.precedence:void 0,{crossOrigin:_,integrity:L,fetchPriority:k}):x==="script"&&a.d.X(M,{crossOrigin:_,integrity:L,fetchPriority:k,nonce:typeof R.nonce=="string"?R.nonce:void 0})}},bt.preinitModule=function(M,R){if(typeof M=="string")if(typeof R=="object"&&R!==null){if(R.as==null||R.as==="script"){var x=E(R.as,R.crossOrigin);a.d.M(M,{crossOrigin:x,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0})}}else R==null&&a.d.M(M)},bt.preload=function(M,R){if(typeof M=="string"&&typeof R=="object"&&R!==null&&typeof R.as=="string"){var x=R.as,_=E(x,R.crossOrigin);a.d.L(M,x,{crossOrigin:_,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0,type:typeof R.type=="string"?R.type:void 0,fetchPriority:typeof R.fetchPriority=="string"?R.fetchPriority:void 0,referrerPolicy:typeof R.referrerPolicy=="string"?R.referrerPolicy:void 0,imageSrcSet:typeof R.imageSrcSet=="string"?R.imageSrcSet:void 0,imageSizes:typeof R.imageSizes=="string"?R.imageSizes:void 0,media:typeof R.media=="string"?R.media:void 0})}},bt.preloadModule=function(M,R){if(typeof M=="string")if(R){var x=E(R.as,R.crossOrigin);a.d.m(M,{as:typeof R.as=="string"&&R.as!=="script"?R.as:void 0,crossOrigin:x,integrity:typeof R.integrity=="string"?R.integrity:void 0})}else a.d.m(M)},bt.requestFormReset=function(M){a.d.r(M)},bt.unstable_batchedUpdates=function(M,R){return M(R)},bt.useFormState=function(M,R,x){return b.H.useFormState(M,R,x)},bt.useFormStatus=function(){return b.H.useHostTransitionStatus()},bt.version="19.1.0",bt}var Fh;function yy(){if(Fh)return Pd.exports;Fh=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(s){console.error(s)}}return d(),Pd.exports=vy(),Pd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh;function Sy(){if(Zh)return rs;Zh=1;var d=_y(),s=iu(),o=yy();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function w(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function T(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function b(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function E(e){if(T(e)!==e)throw Error(a(188))}function M(e){var t=e.alternate;if(!t){if(t=T(e),t===null)throw Error(a(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(r===null)break;var l=r.alternate;if(l===null){if(n=r.return,n!==null){i=n;continue}break}if(r.child===l.child){for(l=r.child;l;){if(l===i)return E(r),e;if(l===n)return E(r),t;l=l.sibling}throw Error(a(188))}if(i.return!==n.return)i=r,n=l;else{for(var D=!1,P=r.child;P;){if(P===i){D=!0,i=r,n=l;break}if(P===n){D=!0,n=r,i=l;break}P=P.sibling}if(!D){for(P=l.child;P;){if(P===i){D=!0,i=l,n=r;break}if(P===n){D=!0,n=l,i=r;break}P=P.sibling}if(!D)throw Error(a(189))}}if(i.alternate!==n)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?e:t}function R(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=R(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,_=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function I(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var A=Symbol.for("react.client.reference");function Y(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===A?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case h:return"Profiler";case g:return"StrictMode";case m:return"Suspense";case y:return"SuspenseList";case S:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case u:return(e.displayName||"Context")+".Provider";case f:return(e._context.displayName||"Context")+".Consumer";case p:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case v:return t=e.displayName||null,t!==null?t:Y(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return Y(e(t))}catch{}}return null}var Z=Array.isArray,j=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},le=[],q=-1;function W(e){return{current:e}}function re(e){0>q||(e.current=le[q],le[q]=null,q--)}function ne(e,t){q++,le[q]=e.current,e.current=t}var se=W(null),be=W(null),me=W(null),et=W(null);function ke(e,t){switch(ne(me,t),ne(be,e),ne(se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?hh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=hh(t),e=mh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}re(se),ne(se,e)}function Tt(){re(se),re(be),re(me)}function $r(e){e.memoizedState!==null&&ne(et,e);var t=se.current,i=mh(t,e.type);t!==i&&(ne(be,e),ne(se,i))}function Cn(e){be.current===e&&(re(se),re(be)),et.current===e&&(re(et),Ja._currentValue=te)}var Jr=Object.prototype.hasOwnProperty,sr=d.unstable_scheduleCallback,Gi=d.unstable_cancelCallback,Yi=d.unstable_shouldYield,js=d.unstable_requestPaint,jt=d.unstable_now,Ei=d.unstable_getCurrentPriorityLevel,Wr=d.unstable_ImmediatePriority,ea=d.unstable_UserBlockingPriority,En=d.unstable_NormalPriority,cr=d.unstable_LowPriority,or=d.unstable_IdlePriority,ta=d.log,ia=d.unstable_setDisableYieldValue,Qi=null,ut=null;function Mt(e){if(typeof ta=="function"&&ia(e),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(Qi,e)}catch{}}var _t=Math.clz32?Math.clz32:ra,Dn=Math.log,na=Math.LN2;function ra(e){return e>>>=0,e===0?32:31-(Dn(e)/na|0)|0}var xn=256,Mn=4194304;function vt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function lr(e,t,i){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,D=e.pingedLanes;e=e.warmLanes;var P=n&134217727;return P!==0?(n=P&~l,n!==0?r=vt(n):(D&=P,D!==0?r=vt(D):i||(i=P&~e,i!==0&&(r=vt(i))))):(P=n&~l,P!==0?r=vt(P):D!==0?r=vt(D):i||(i=n&~e,i!==0&&(r=vt(i)))),r===0?0:t!==0&&t!==r&&(t&l)===0&&(l=r&-r,i=t&-t,l>=i||l===32&&(i&4194048)!==0)?t:r}function ii(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ln(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dr(){var e=xn;return xn<<=1,(xn&4194048)===0&&(xn=256),e}function aa(){var e=Mn;return Mn<<=1,(Mn&62914560)===0&&(Mn=4194304),e}function mi(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function ni(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function sa(e,t,i,n,r,l){var D=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var P=e.entanglements,B=e.expirationTimes,K=e.hiddenUpdates;for(i=D&~i;0<i;){var $=31-_t(i),ee=1<<$;P[$]=0,B[$]=-1;var X=K[$];if(X!==null)for(K[$]=null,$=0;$<X.length;$++){var F=X[$];F!==null&&(F.lane&=-536870913)}i&=~ee}n!==0&&ca(e,n,0),l!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=l&~(D&~t))}function ca(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-_t(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|i&4194090}function ft(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-_t(i),r=1<<n;r&t|e[n]&t&&(e[n]|=t),i&=~r}}function Qt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function oa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function On(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:Ph(e.type))}function la(e,t){var i=V.p;try{return V.p=e,t()}finally{V.p=i}}var zt=Math.random().toString(36).slice(2),Ve="__reactFiber$"+zt,rt="__reactProps$"+zt,yt="__reactContainer$"+zt,kn="__reactEvents$"+zt,ri="__reactListeners$"+zt,Ki="__reactHandles$"+zt,Xi="__reactResources$"+zt,ai="__reactMarker$"+zt;function An(e){delete e[Ve],delete e[rt],delete e[kn],delete e[ri],delete e[Ki]}function Ct(e){var t=e[Ve];if(t)return t;for(var i=e.parentNode;i;){if(t=i[yt]||i[Ve]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=yh(e);e!==null;){if(i=e[Ve])return i;e=yh(e)}return t}e=i,i=e.parentNode}return null}function Di(e){if(e=e[Ve]||e[yt]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Fi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(a(33))}function xi(e){var t=e[Xi];return t||(t=e[Xi]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[ai]=!0}var zs=new Set,da={};function gi(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(da[e]=t,e=0;e<t.length;e++)zs.add(t[e])}var Zi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pn={},ie={};function ce(e){return Jr.call(ie,e)?!0:Jr.call(Pn,e)?!1:Zi.test(e)?ie[e]=!0:(Pn[e]=!0,!1)}function ae(e,t,i){if(ce(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Ce(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function de(e,t,i,n){if(n===null)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+n)}}var Le,fe;function Ee(e){if(Le===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Le=t&&t[1]||"",fe=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+e+fe}var _e=!1;function qe(e,t){if(!e||_e)return"";_e=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(F){var X=F}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(F){X=F}e.call(ee.prototype)}}else{try{throw Error()}catch(F){X=F}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(F){if(F&&X&&typeof F.stack=="string")return[F.stack,X.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=n.DetermineComponentFrameRoot(),D=l[0],P=l[1];if(D&&P){var B=D.split(`
`),K=P.split(`
`);for(r=n=0;n<B.length&&!B[n].includes("DetermineComponentFrameRoot");)n++;for(;r<K.length&&!K[r].includes("DetermineComponentFrameRoot");)r++;if(n===B.length||r===K.length)for(n=B.length-1,r=K.length-1;1<=n&&0<=r&&B[n]!==K[r];)r--;for(;1<=n&&0<=r;n--,r--)if(B[n]!==K[r]){if(n!==1||r!==1)do if(n--,r--,0>r||B[n]!==K[r]){var $=`
`+B[n].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=n&&0<=r);break}}}finally{_e=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ee(i):""}function si(e){switch(e.tag){case 26:case 27:case 5:return Ee(e.type);case 16:return Ee("Lazy");case 13:return Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return qe(e.type,!1);case 11:return qe(e.type.render,!1);case 1:return qe(e.type,!0);case 31:return Ee("Activity");default:return""}}function ci(e){try{var t="";do t+=si(e),e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function st(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nn(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bs(e){var t=Nn(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,l=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(D){n=""+D,l.call(this,D)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(D){n=""+D},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $i(e){e._valueTracker||(e._valueTracker=Bs(e))}function ur(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Nn(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function fr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Un=/[\n"\\]/g;function Lt(e){return e.replace(Un,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Eo(e,t,i,n,r,l,D,P){e.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?e.type=D:e.removeAttribute("type"),t!=null?D==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+st(t)):e.value!==""+st(t)&&(e.value=""+st(t)):D!=="submit"&&D!=="reset"||e.removeAttribute("value"),t!=null?Do(e,D,st(t)):i!=null?Do(e,D,st(i)):n!=null&&e.removeAttribute("value"),r==null&&l!=null&&(e.defaultChecked=!!l),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?e.name=""+st(P):e.removeAttribute("name")}function du(e,t,i,n,r,l,D,P){if(l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"&&(e.type=l),t!=null||i!=null){if(!(l!=="submit"&&l!=="reset"||t!=null))return;i=i!=null?""+st(i):"",t=t!=null?""+st(t):i,P||t===e.value||(e.value=t),e.defaultValue=t}n=n??r,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=P?e.checked:!!n,e.defaultChecked=!!n,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(e.name=D)}function Do(e,t,i){t==="number"&&fr(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function pr(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+st(i),t=null,r=0;r<e.length;r++){if(e[r].value===i){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function uu(e,t,i){if(t!=null&&(t=""+st(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+st(i):""}function fu(e,t,i,n){if(t==null){if(n!=null){if(i!=null)throw Error(a(92));if(Z(n)){if(1<n.length)throw Error(a(93));n=n[0]}i=n}i==null&&(i=""),t=i}i=st(t),e.defaultValue=i,n=e.textContent,n===i&&n!==""&&n!==null&&(e.value=n)}function hr(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var o_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pu(e,t,i){var n=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,i):typeof i!="number"||i===0||o_.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function hu(e,t,i){if(t!=null&&typeof t!="object")throw Error(a(62));if(e=e.style,i!=null){for(var n in i)!i.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var r in t)n=t[r],t.hasOwnProperty(r)&&i[r]!==n&&pu(e,r,n)}else for(var l in t)t.hasOwnProperty(l)&&pu(e,l,t[l])}function xo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),d_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qs(e){return d_.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Mo=null;function Lo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mr=null,gr=null;function mu(e){var t=Di(e);if(t&&(e=t.stateNode)){var i=e[rt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Eo(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Lt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=n[rt]||null;if(!r)throw Error(a(90));Eo(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<i.length;t++)n=i[t],n.form===e.form&&ur(n)}break e;case"textarea":uu(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&pr(e,!!i.multiple,t,!1)}}}var Oo=!1;function gu(e,t,i){if(Oo)return e(t,i);Oo=!0;try{var n=e(t);return n}finally{if(Oo=!1,(mr!==null||gr!==null)&&(Cc(),mr&&(t=mr,e=gr,gr=mr=null,mu(t),e)))for(t=0;t<e.length;t++)mu(e[t])}}function ua(e,t){var i=e.stateNode;if(i===null)return null;var n=i[rt]||null;if(n===null)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(a(231,t,typeof i));return i}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ko=!1;if(Mi)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){ko=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{ko=!1}var Ji=null,Ao=null,Is=null;function _u(){if(Is)return Is;var e,t=Ao,i=t.length,n,r="value"in Ji?Ji.value:Ji.textContent,l=r.length;for(e=0;e<i&&t[e]===r[e];e++);var D=i-e;for(n=1;n<=D&&t[i-n]===r[l-n];n++);return Is=r.slice(e,1<n?1-n:void 0)}function Hs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vs(){return!0}function vu(){return!1}function Ot(e){function t(i,n,r,l,D){this._reactName=i,this._targetInst=r,this.type=n,this.nativeEvent=l,this.target=D,this.currentTarget=null;for(var P in e)e.hasOwnProperty(P)&&(i=e[P],this[P]=i?i(l):l[P]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Vs:vu,this.isPropagationStopped=vu,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Vs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Vs)},persist:function(){},isPersistent:Vs}),t}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=Ot(jn),pa=x({},jn,{view:0,detail:0}),u_=Ot(pa),Po,No,ha,Ys=x({},pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ha&&(ha&&e.type==="mousemove"?(Po=e.screenX-ha.screenX,No=e.screenY-ha.screenY):No=Po=0,ha=e),Po)},movementY:function(e){return"movementY"in e?e.movementY:No}}),yu=Ot(Ys),f_=x({},Ys,{dataTransfer:0}),p_=Ot(f_),h_=x({},pa,{relatedTarget:0}),Uo=Ot(h_),m_=x({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),g_=Ot(m_),__=x({},jn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),v_=Ot(__),y_=x({},jn,{data:0}),Su=Ot(y_),S_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=w_[e])?!!t[e]:!1}function jo(){return R_}var T_=x({},pa,{key:function(e){if(e.key){var t=S_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?b_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jo,charCode:function(e){return e.type==="keypress"?Hs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),C_=Ot(T_),E_=x({},Ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bu=Ot(E_),D_=x({},pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jo}),x_=Ot(D_),M_=x({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),L_=Ot(M_),O_=x({},Ys,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),k_=Ot(O_),A_=x({},jn,{newState:0,oldState:0}),P_=Ot(A_),N_=[9,13,27,32],zo=Mi&&"CompositionEvent"in window,ma=null;Mi&&"documentMode"in document&&(ma=document.documentMode);var U_=Mi&&"TextEvent"in window&&!ma,wu=Mi&&(!zo||ma&&8<ma&&11>=ma),Ru=" ",Tu=!1;function Cu(e,t){switch(e){case"keyup":return N_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function j_(e,t){switch(e){case"compositionend":return Eu(t);case"keypress":return t.which!==32?null:(Tu=!0,Ru);case"textInput":return e=t.data,e===Ru&&Tu?null:e;default:return null}}function z_(e,t){if(_r)return e==="compositionend"||!zo&&Cu(e,t)?(e=_u(),Is=Ao=Ji=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wu&&t.locale!=="ko"?null:t.data;default:return null}}var B_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!B_[e.type]:t==="textarea"}function xu(e,t,i,n){mr?gr?gr.push(n):gr=[n]:mr=n,t=Oc(t,"onChange"),0<t.length&&(i=new Gs("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var ga=null,_a=null;function q_(e){lh(e,0)}function Qs(e){var t=Fi(e);if(ur(t))return e}function Mu(e,t){if(e==="change")return t}var Lu=!1;if(Mi){var Bo;if(Mi){var qo="oninput"in document;if(!qo){var Ou=document.createElement("div");Ou.setAttribute("oninput","return;"),qo=typeof Ou.oninput=="function"}Bo=qo}else Bo=!1;Lu=Bo&&(!document.documentMode||9<document.documentMode)}function ku(){ga&&(ga.detachEvent("onpropertychange",Au),_a=ga=null)}function Au(e){if(e.propertyName==="value"&&Qs(_a)){var t=[];xu(t,_a,e,Lo(e)),gu(q_,t)}}function I_(e,t,i){e==="focusin"?(ku(),ga=t,_a=i,ga.attachEvent("onpropertychange",Au)):e==="focusout"&&ku()}function H_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qs(_a)}function V_(e,t){if(e==="click")return Qs(t)}function G_(e,t){if(e==="input"||e==="change")return Qs(t)}function Y_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bt=typeof Object.is=="function"?Object.is:Y_;function va(e,t){if(Bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!Jr.call(t,r)||!Bt(e[r],t[r]))return!1}return!0}function Pu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nu(e,t){var i=Pu(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Pu(i)}}function Uu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ju(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=fr(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=fr(e.document)}return t}function Io(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Q_=Mi&&"documentMode"in document&&11>=document.documentMode,vr=null,Ho=null,ya=null,Vo=!1;function zu(e,t,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Vo||vr==null||vr!==fr(n)||(n=vr,"selectionStart"in n&&Io(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ya&&va(ya,n)||(ya=n,n=Oc(Ho,"onSelect"),0<n.length&&(t=new Gs("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=vr)))}function zn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var yr={animationend:zn("Animation","AnimationEnd"),animationiteration:zn("Animation","AnimationIteration"),animationstart:zn("Animation","AnimationStart"),transitionrun:zn("Transition","TransitionRun"),transitionstart:zn("Transition","TransitionStart"),transitioncancel:zn("Transition","TransitionCancel"),transitionend:zn("Transition","TransitionEnd")},Go={},Bu={};Mi&&(Bu=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Bn(e){if(Go[e])return Go[e];if(!yr[e])return e;var t=yr[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Bu)return Go[e]=t[i];return e}var qu=Bn("animationend"),Iu=Bn("animationiteration"),Hu=Bn("animationstart"),K_=Bn("transitionrun"),X_=Bn("transitionstart"),F_=Bn("transitioncancel"),Vu=Bn("transitionend"),Gu=new Map,Yo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yo.push("scrollEnd");function oi(e,t){Gu.set(e,t),gi(t,[e])}var Yu=new WeakMap;function Kt(e,t){if(typeof e=="object"&&e!==null){var i=Yu.get(e);return i!==void 0?i:(t={value:e,source:t,stack:ci(t)},Yu.set(e,t),t)}return{value:e,source:t,stack:ci(t)}}var Xt=[],Sr=0,Qo=0;function Ks(){for(var e=Sr,t=Qo=Sr=0;t<e;){var i=Xt[t];Xt[t++]=null;var n=Xt[t];Xt[t++]=null;var r=Xt[t];Xt[t++]=null;var l=Xt[t];if(Xt[t++]=null,n!==null&&r!==null){var D=n.pending;D===null?r.next=r:(r.next=D.next,D.next=r),n.pending=r}l!==0&&Qu(i,r,l)}}function Xs(e,t,i,n){Xt[Sr++]=e,Xt[Sr++]=t,Xt[Sr++]=i,Xt[Sr++]=n,Qo|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Ko(e,t,i,n){return Xs(e,t,i,n),Fs(e)}function br(e,t){return Xs(e,null,null,t),Fs(e)}function Qu(e,t,i){e.lanes|=i;var n=e.alternate;n!==null&&(n.lanes|=i);for(var r=!1,l=e.return;l!==null;)l.childLanes|=i,n=l.alternate,n!==null&&(n.childLanes|=i),l.tag===22&&(e=l.stateNode,e===null||e._visibility&1||(r=!0)),e=l,l=l.return;return e.tag===3?(l=e.stateNode,r&&t!==null&&(r=31-_t(i),e=l.hiddenUpdates,n=e[r],n===null?e[r]=[t]:n.push(t),t.lane=i|536870912),l):null}function Fs(e){if(50<Ga)throw Ga=0,Wl=null,Error(a(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var wr={};function Z_(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,t,i,n){return new Z_(e,t,i,n)}function Xo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Li(e,t){var i=e.alternate;return i===null?(i=qt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Ku(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Zs(e,t,i,n,r,l){var D=0;if(n=e,typeof e=="function")Xo(e)&&(D=1);else if(typeof e=="string")D=Jv(e,i,se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case S:return e=qt(31,i,t,r),e.elementType=S,e.lanes=l,e;case N:return qn(i.children,r,l,t);case g:D=8,r|=24;break;case h:return e=qt(12,i,t,r|2),e.elementType=h,e.lanes=l,e;case m:return e=qt(13,i,t,r),e.elementType=m,e.lanes=l,e;case y:return e=qt(19,i,t,r),e.elementType=y,e.lanes=l,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case c:case u:D=10;break e;case f:D=9;break e;case p:D=11;break e;case v:D=14;break e;case C:D=16,n=null;break e}D=29,i=Error(a(130,e===null?"null":typeof e,"")),n=null}return t=qt(D,i,t,r),t.elementType=e,t.type=n,t.lanes=l,t}function qn(e,t,i,n){return e=qt(7,e,n,t),e.lanes=i,e}function Fo(e,t,i){return e=qt(6,e,null,t),e.lanes=i,e}function Zo(e,t,i){return t=qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Rr=[],Tr=0,$s=null,Js=0,Ft=[],Zt=0,In=null,Oi=1,ki="";function Hn(e,t){Rr[Tr++]=Js,Rr[Tr++]=$s,$s=e,Js=t}function Xu(e,t,i){Ft[Zt++]=Oi,Ft[Zt++]=ki,Ft[Zt++]=In,In=e;var n=Oi;e=ki;var r=32-_t(n)-1;n&=~(1<<r),i+=1;var l=32-_t(t)+r;if(30<l){var D=r-r%5;l=(n&(1<<D)-1).toString(32),n>>=D,r-=D,Oi=1<<32-_t(t)+r|i<<r|n,ki=l+e}else Oi=1<<l|i<<r|n,ki=e}function $o(e){e.return!==null&&(Hn(e,1),Xu(e,1,0))}function Jo(e){for(;e===$s;)$s=Rr[--Tr],Rr[Tr]=null,Js=Rr[--Tr],Rr[Tr]=null;for(;e===In;)In=Ft[--Zt],Ft[Zt]=null,ki=Ft[--Zt],Ft[Zt]=null,Oi=Ft[--Zt],Ft[Zt]=null}var Et=null,Qe=null,Oe=!1,Vn=null,_i=!1,Wo=Error(a(519));function Gn(e){var t=Error(a(418,""));throw wa(Kt(t,e)),Wo}function Fu(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[Ve]=e,t[rt]=n,i){case"dialog":Te("cancel",t),Te("close",t);break;case"iframe":case"object":case"embed":Te("load",t);break;case"video":case"audio":for(i=0;i<Qa.length;i++)Te(Qa[i],t);break;case"source":Te("error",t);break;case"img":case"image":case"link":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"input":Te("invalid",t),du(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),$i(t);break;case"select":Te("invalid",t);break;case"textarea":Te("invalid",t),fu(t,n.value,n.defaultValue,n.children),$i(t)}i=n.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||n.suppressHydrationWarning===!0||ph(t.textContent,i)?(n.popover!=null&&(Te("beforetoggle",t),Te("toggle",t)),n.onScroll!=null&&Te("scroll",t),n.onScrollEnd!=null&&Te("scrollend",t),n.onClick!=null&&(t.onclick=kc),t=!0):t=!1,t||Gn(e)}function Zu(e){for(Et=e.return;Et;)switch(Et.tag){case 5:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:Et=Et.return}}function Sa(e){if(e!==Et)return!1;if(!Oe)return Zu(e),Oe=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||md(e.type,e.memoizedProps)),i=!i),i&&Qe&&Gn(e),Zu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(t===0){Qe=di(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++;e=e.nextSibling}Qe=null}}else t===27?(t=Qe,mn(e.type)?(e=yd,yd=null,Qe=e):Qe=t):Qe=Et?di(e.stateNode.nextSibling):null;return!0}function ba(){Qe=Et=null,Oe=!1}function $u(){var e=Vn;return e!==null&&(Pt===null?Pt=e:Pt.push.apply(Pt,e),Vn=null),e}function wa(e){Vn===null?Vn=[e]:Vn.push(e)}var el=W(null),Yn=null,Ai=null;function Wi(e,t,i){ne(el,t._currentValue),t._currentValue=i}function Pi(e){e._currentValue=el.current,re(el)}function tl(e,t,i){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function il(e,t,i,n){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var l=r.dependencies;if(l!==null){var D=r.child;l=l.firstContext;e:for(;l!==null;){var P=l;l=r;for(var B=0;B<t.length;B++)if(P.context===t[B]){l.lanes|=i,P=l.alternate,P!==null&&(P.lanes|=i),tl(l.return,i,e),n||(D=null);break e}l=P.next}}else if(r.tag===18){if(D=r.return,D===null)throw Error(a(341));D.lanes|=i,l=D.alternate,l!==null&&(l.lanes|=i),tl(D,i,e),D=null}else D=r.child;if(D!==null)D.return=r;else for(D=r;D!==null;){if(D===e){D=null;break}if(r=D.sibling,r!==null){r.return=D.return,D=r;break}D=D.return}r=D}}function Ra(e,t,i,n){e=null;for(var r=t,l=!1;r!==null;){if(!l){if((r.flags&524288)!==0)l=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var D=r.alternate;if(D===null)throw Error(a(387));if(D=D.memoizedProps,D!==null){var P=r.type;Bt(r.pendingProps.value,D.value)||(e!==null?e.push(P):e=[P])}}else if(r===et.current){if(D=r.alternate,D===null)throw Error(a(387));D.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Ja):e=[Ja])}r=r.return}e!==null&&il(t,e,i,n),t.flags|=262144}function Ws(e){for(e=e.firstContext;e!==null;){if(!Bt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qn(e){Yn=e,Ai=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function St(e){return Ju(Yn,e)}function ec(e,t){return Yn===null&&Qn(e),Ju(e,t)}function Ju(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ai===null){if(e===null)throw Error(a(308));Ai=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ai=Ai.next=t;return i}var $_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},J_=d.unstable_scheduleCallback,W_=d.unstable_NormalPriority,tt={$$typeof:u,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nl(){return{controller:new $_,data:new Map,refCount:0}}function Ta(e){e.refCount--,e.refCount===0&&J_(W_,function(){e.controller.abort()})}var Ca=null,rl=0,Cr=0,Er=null;function ev(e,t){if(Ca===null){var i=Ca=[];rl=0,Cr=sd(),Er={status:"pending",value:void 0,then:function(n){i.push(n)}}}return rl++,t.then(Wu,Wu),t}function Wu(){if(--rl===0&&Ca!==null){Er!==null&&(Er.status="fulfilled");var e=Ca;Ca=null,Cr=0,Er=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function tv(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(r){i.push(r)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var r=0;r<i.length;r++)(0,i[r])(t)},function(r){for(n.status="rejected",n.reason=r,r=0;r<i.length;r++)(0,i[r])(void 0)}),n}var ef=j.S;j.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&ev(e,t),ef!==null&&ef(e,t)};var Kn=W(null);function al(){var e=Kn.current;return e!==null?e:Be.pooledCache}function tc(e,t){t===null?ne(Kn,Kn.current):ne(Kn,t.pool)}function tf(){var e=al();return e===null?null:{parent:tt._currentValue,pool:e}}var Ea=Error(a(460)),nf=Error(a(474)),ic=Error(a(542)),sl={then:function(){}};function rf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function nc(){}function af(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(nc,nc),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,cf(e),e;default:if(typeof t.status=="string")t.then(nc,nc);else{if(e=Be,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=n}},function(n){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,cf(e),e}throw Da=t,Ea}}var Da=null;function sf(){if(Da===null)throw Error(a(459));var e=Da;return Da=null,e}function cf(e){if(e===Ea||e===ic)throw Error(a(483))}var en=!1;function cl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ol(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function tn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function nn(e,t,i){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ae&2)!==0){var r=n.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),n.pending=t,t=Fs(e),Qu(e,null,i),t}return Xs(e,n,t,i),Fs(e)}function xa(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,ft(e,i)}}function ll(e,t){var i=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var r=null,l=null;if(i=i.firstBaseUpdate,i!==null){do{var D={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};l===null?r=l=D:l=l.next=D,i=i.next}while(i!==null);l===null?r=l=t:l=l.next=t}else r=l=t;i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:l,shared:n.shared,callbacks:n.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var dl=!1;function Ma(){if(dl){var e=Er;if(e!==null)throw e}}function La(e,t,i,n){dl=!1;var r=e.updateQueue;en=!1;var l=r.firstBaseUpdate,D=r.lastBaseUpdate,P=r.shared.pending;if(P!==null){r.shared.pending=null;var B=P,K=B.next;B.next=null,D===null?l=K:D.next=K,D=B;var $=e.alternate;$!==null&&($=$.updateQueue,P=$.lastBaseUpdate,P!==D&&(P===null?$.firstBaseUpdate=K:P.next=K,$.lastBaseUpdate=B))}if(l!==null){var ee=r.baseState;D=0,$=K=B=null,P=l;do{var X=P.lane&-536870913,F=X!==P.lane;if(F?(xe&X)===X:(n&X)===X){X!==0&&X===Cr&&(dl=!0),$!==null&&($=$.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var ge=e,pe=P;X=t;var je=i;switch(pe.tag){case 1:if(ge=pe.payload,typeof ge=="function"){ee=ge.call(je,ee,X);break e}ee=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=pe.payload,X=typeof ge=="function"?ge.call(je,ee,X):ge,X==null)break e;ee=x({},ee,X);break e;case 2:en=!0}}X=P.callback,X!==null&&(e.flags|=64,F&&(e.flags|=8192),F=r.callbacks,F===null?r.callbacks=[X]:F.push(X))}else F={lane:X,tag:P.tag,payload:P.payload,callback:P.callback,next:null},$===null?(K=$=F,B=ee):$=$.next=F,D|=X;if(P=P.next,P===null){if(P=r.shared.pending,P===null)break;F=P,P=F.next,F.next=null,r.lastBaseUpdate=F,r.shared.pending=null}}while(!0);$===null&&(B=ee),r.baseState=B,r.firstBaseUpdate=K,r.lastBaseUpdate=$,l===null&&(r.shared.lanes=0),un|=D,e.lanes=D,e.memoizedState=ee}}function of(e,t){if(typeof e!="function")throw Error(a(191,e));e.call(t)}function lf(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)of(i[e],t)}var Dr=W(null),rc=W(0);function df(e,t){e=Ii,ne(rc,e),ne(Dr,t),Ii=e|t.baseLanes}function ul(){ne(rc,Ii),ne(Dr,Dr.current)}function fl(){Ii=rc.current,re(Dr),re(rc)}var rn=0,Se=null,Ne=null,$e=null,ac=!1,xr=!1,Xn=!1,sc=0,Oa=0,Mr=null,iv=0;function Xe(){throw Error(a(321))}function pl(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Bt(e[i],t[i]))return!1;return!0}function hl(e,t,i,n,r,l){return rn=l,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=e===null||e.memoizedState===null?Kf:Xf,Xn=!1,l=i(n,r),Xn=!1,xr&&(l=ff(t,i,n,r)),uf(e),l}function uf(e){j.H=fc;var t=Ne!==null&&Ne.next!==null;if(rn=0,$e=Ne=Se=null,ac=!1,Oa=0,Mr=null,t)throw Error(a(300));e===null||ct||(e=e.dependencies,e!==null&&Ws(e)&&(ct=!0))}function ff(e,t,i,n){Se=e;var r=0;do{if(xr&&(Mr=null),Oa=0,xr=!1,25<=r)throw Error(a(301));if(r+=1,$e=Ne=null,e.updateQueue!=null){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}j.H=lv,l=t(i,n)}while(xr);return l}function nv(){var e=j.H,t=e.useState()[0];return t=typeof t.then=="function"?ka(t):t,e=e.useState()[0],(Ne!==null?Ne.memoizedState:null)!==e&&(Se.flags|=1024),t}function ml(){var e=sc!==0;return sc=0,e}function gl(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function _l(e){if(ac){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ac=!1}rn=0,$e=Ne=Se=null,xr=!1,Oa=sc=0,Mr=null}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Se.memoizedState=$e=e:$e=$e.next=e,$e}function Je(){if(Ne===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Ne.next;var t=$e===null?Se.memoizedState:$e.next;if(t!==null)$e=t,Ne=e;else{if(e===null)throw Se.alternate===null?Error(a(467)):Error(a(310));Ne=e,e={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},$e===null?Se.memoizedState=$e=e:$e=$e.next=e}return $e}function vl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ka(e){var t=Oa;return Oa+=1,Mr===null&&(Mr=[]),e=af(Mr,e,t),t=Se,($e===null?t.memoizedState:$e.next)===null&&(t=t.alternate,j.H=t===null||t.memoizedState===null?Kf:Xf),e}function cc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ka(e);if(e.$$typeof===u)return St(e)}throw Error(a(438,String(e)))}function yl(e){var t=null,i=Se.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var n=Se.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=vl(),Se.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=O;return t.index++,i}function Ni(e,t){return typeof t=="function"?t(e):t}function oc(e){var t=Je();return Sl(t,Ne,e)}function Sl(e,t,i){var n=e.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=i;var r=e.baseQueue,l=n.pending;if(l!==null){if(r!==null){var D=r.next;r.next=l.next,l.next=D}t.baseQueue=r=l,n.pending=null}if(l=e.baseState,r===null)e.memoizedState=l;else{t=r.next;var P=D=null,B=null,K=t,$=!1;do{var ee=K.lane&-536870913;if(ee!==K.lane?(xe&ee)===ee:(rn&ee)===ee){var X=K.revertLane;if(X===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ee===Cr&&($=!0);else if((rn&X)===X){K=K.next,X===Cr&&($=!0);continue}else ee={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},B===null?(P=B=ee,D=l):B=B.next=ee,Se.lanes|=X,un|=X;ee=K.action,Xn&&i(l,ee),l=K.hasEagerState?K.eagerState:i(l,ee)}else X={lane:ee,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},B===null?(P=B=X,D=l):B=B.next=X,Se.lanes|=ee,un|=ee;K=K.next}while(K!==null&&K!==t);if(B===null?D=l:B.next=P,!Bt(l,e.memoizedState)&&(ct=!0,$&&(i=Er,i!==null)))throw i;e.memoizedState=l,e.baseState=D,e.baseQueue=B,n.lastRenderedState=l}return r===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function bl(e){var t=Je(),i=t.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,l=t.memoizedState;if(r!==null){i.pending=null;var D=r=r.next;do l=e(l,D.action),D=D.next;while(D!==r);Bt(l,t.memoizedState)||(ct=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),i.lastRenderedState=l}return[l,n]}function pf(e,t,i){var n=Se,r=Je(),l=Oe;if(l){if(i===void 0)throw Error(a(407));i=i()}else i=t();var D=!Bt((Ne||r).memoizedState,i);D&&(r.memoizedState=i,ct=!0),r=r.queue;var P=gf.bind(null,n,r,e);if(Aa(2048,8,P,[e]),r.getSnapshot!==t||D||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,Lr(9,lc(),mf.bind(null,n,r,i,t),null),Be===null)throw Error(a(349));l||(rn&124)!==0||hf(n,t,i)}return i}function hf(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Se.updateQueue,t===null?(t=vl(),Se.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function mf(e,t,i,n){t.value=i,t.getSnapshot=n,_f(t)&&vf(e)}function gf(e,t,i){return i(function(){_f(t)&&vf(e)})}function _f(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Bt(e,i)}catch{return!0}}function vf(e){var t=br(e,2);t!==null&&Yt(t,e,2)}function wl(e){var t=kt();if(typeof e=="function"){var i=e;if(e=i(),Xn){Mt(!0);try{i()}finally{Mt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:e},t}function yf(e,t,i,n){return e.baseState=i,Sl(e,Ne,typeof n=="function"?n:Ni)}function rv(e,t,i,n,r){if(uc(e))throw Error(a(485));if(e=t.action,e!==null){var l={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){l.listeners.push(D)}};j.T!==null?i(!0):l.isTransition=!1,n(l),i=t.pending,i===null?(l.next=t.pending=l,Sf(t,l)):(l.next=i.next,t.pending=i.next=l)}}function Sf(e,t){var i=t.action,n=t.payload,r=e.state;if(t.isTransition){var l=j.T,D={};j.T=D;try{var P=i(r,n),B=j.S;B!==null&&B(D,P),bf(e,t,P)}catch(K){Rl(e,t,K)}finally{j.T=l}}else try{l=i(r,n),bf(e,t,l)}catch(K){Rl(e,t,K)}}function bf(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(n){wf(e,t,n)},function(n){return Rl(e,t,n)}):wf(e,t,i)}function wf(e,t,i){t.status="fulfilled",t.value=i,Rf(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Sf(e,i)))}function Rl(e,t,i){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=i,Rf(t),t=t.next;while(t!==n)}e.action=null}function Rf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Tf(e,t){return t}function Cf(e,t){if(Oe){var i=Be.formState;if(i!==null){e:{var n=Se;if(Oe){if(Qe){t:{for(var r=Qe,l=_i;r.nodeType!==8;){if(!l){r=null;break t}if(r=di(r.nextSibling),r===null){r=null;break t}}l=r.data,r=l==="F!"||l==="F"?r:null}if(r){Qe=di(r.nextSibling),n=r.data==="F!";break e}}Gn(n)}n=!1}n&&(t=i[0])}}return i=kt(),i.memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tf,lastRenderedState:t},i.queue=n,i=Gf.bind(null,Se,n),n.dispatch=i,n=wl(!1),l=xl.bind(null,Se,!1,n.queue),n=kt(),r={state:t,dispatch:null,action:e,pending:null},n.queue=r,i=rv.bind(null,Se,r,l,i),r.dispatch=i,n.memoizedState=e,[t,i,!1]}function Ef(e){var t=Je();return Df(t,Ne,e)}function Df(e,t,i){if(t=Sl(e,t,Tf)[0],e=oc(Ni)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=ka(t)}catch(D){throw D===Ea?ic:D}else n=t;t=Je();var r=t.queue,l=r.dispatch;return i!==t.memoizedState&&(Se.flags|=2048,Lr(9,lc(),av.bind(null,r,i),null)),[n,l,e]}function av(e,t){e.action=t}function xf(e){var t=Je(),i=Ne;if(i!==null)return Df(t,i,e);Je(),t=t.memoizedState,i=Je();var n=i.queue.dispatch;return i.memoizedState=e,[t,n,!1]}function Lr(e,t,i,n){return e={tag:e,create:i,deps:n,inst:t,next:null},t=Se.updateQueue,t===null&&(t=vl(),Se.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function lc(){return{destroy:void 0,resource:void 0}}function Mf(){return Je().memoizedState}function dc(e,t,i,n){var r=kt();n=n===void 0?null:n,Se.flags|=e,r.memoizedState=Lr(1|t,lc(),i,n)}function Aa(e,t,i,n){var r=Je();n=n===void 0?null:n;var l=r.memoizedState.inst;Ne!==null&&n!==null&&pl(n,Ne.memoizedState.deps)?r.memoizedState=Lr(t,l,i,n):(Se.flags|=e,r.memoizedState=Lr(1|t,l,i,n))}function Lf(e,t){dc(8390656,8,e,t)}function Of(e,t){Aa(2048,8,e,t)}function kf(e,t){return Aa(4,2,e,t)}function Af(e,t){return Aa(4,4,e,t)}function Pf(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Nf(e,t,i){i=i!=null?i.concat([e]):null,Aa(4,4,Pf.bind(null,t,e),i)}function Tl(){}function Uf(e,t){var i=Je();t=t===void 0?null:t;var n=i.memoizedState;return t!==null&&pl(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function jf(e,t){var i=Je();t=t===void 0?null:t;var n=i.memoizedState;if(t!==null&&pl(t,n[1]))return n[0];if(n=e(),Xn){Mt(!0);try{e()}finally{Mt(!1)}}return i.memoizedState=[n,t],n}function Cl(e,t,i){return i===void 0||(rn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=i,e=qp(),Se.lanes|=e,un|=e,i)}function zf(e,t,i,n){return Bt(i,t)?i:Dr.current!==null?(e=Cl(e,i,n),Bt(e,t)||(ct=!0),e):(rn&42)===0?(ct=!0,e.memoizedState=i):(e=qp(),Se.lanes|=e,un|=e,t)}function Bf(e,t,i,n,r){var l=V.p;V.p=l!==0&&8>l?l:8;var D=j.T,P={};j.T=P,xl(e,!1,t,i);try{var B=r(),K=j.S;if(K!==null&&K(P,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var $=tv(B,n);Pa(e,t,$,Gt(e))}else Pa(e,t,n,Gt(e))}catch(ee){Pa(e,t,{then:function(){},status:"rejected",reason:ee},Gt())}finally{V.p=l,j.T=D}}function sv(){}function El(e,t,i,n){if(e.tag!==5)throw Error(a(476));var r=qf(e).queue;Bf(e,r,t,te,i===null?sv:function(){return If(e),i(n)})}function qf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:te},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function If(e){var t=qf(e).next.queue;Pa(e,t,{},Gt())}function Dl(){return St(Ja)}function Hf(){return Je().memoizedState}function Vf(){return Je().memoizedState}function cv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Gt();e=tn(i);var n=nn(t,e,i);n!==null&&(Yt(n,t,i),xa(n,t,i)),t={cache:nl()},e.payload=t;return}t=t.return}}function ov(e,t,i){var n=Gt();i={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},uc(e)?Yf(t,i):(i=Ko(e,t,i,n),i!==null&&(Yt(i,e,n),Qf(i,t,n)))}function Gf(e,t,i){var n=Gt();Pa(e,t,i,n)}function Pa(e,t,i,n){var r={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(uc(e))Yf(t,r);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var D=t.lastRenderedState,P=l(D,i);if(r.hasEagerState=!0,r.eagerState=P,Bt(P,D))return Xs(e,t,r,0),Be===null&&Ks(),!1}catch{}finally{}if(i=Ko(e,t,r,n),i!==null)return Yt(i,e,n),Qf(i,t,n),!0}return!1}function xl(e,t,i,n){if(n={lane:2,revertLane:sd(),action:n,hasEagerState:!1,eagerState:null,next:null},uc(e)){if(t)throw Error(a(479))}else t=Ko(e,i,n,2),t!==null&&Yt(t,e,2)}function uc(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function Yf(e,t){xr=ac=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Qf(e,t,i){if((i&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,ft(e,i)}}var fc={readContext:St,use:cc,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe},Kf={readContext:St,use:cc,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:Lf,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,dc(4194308,4,Pf.bind(null,t,e),i)},useLayoutEffect:function(e,t){return dc(4194308,4,e,t)},useInsertionEffect:function(e,t){dc(4,2,e,t)},useMemo:function(e,t){var i=kt();t=t===void 0?null:t;var n=e();if(Xn){Mt(!0);try{e()}finally{Mt(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=kt();if(i!==void 0){var r=i(t);if(Xn){Mt(!0);try{i(t)}finally{Mt(!1)}}}else r=t;return n.memoizedState=n.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},n.queue=e,e=e.dispatch=ov.bind(null,Se,e),[n.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:function(e){e=wl(e);var t=e.queue,i=Gf.bind(null,Se,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Tl,useDeferredValue:function(e,t){var i=kt();return Cl(i,e,t)},useTransition:function(){var e=wl(!1);return e=Bf.bind(null,Se,e.queue,!0,!1),kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=Se,r=kt();if(Oe){if(i===void 0)throw Error(a(407));i=i()}else{if(i=t(),Be===null)throw Error(a(349));(xe&124)!==0||hf(n,t,i)}r.memoizedState=i;var l={value:i,getSnapshot:t};return r.queue=l,Lf(gf.bind(null,n,l,e),[e]),n.flags|=2048,Lr(9,lc(),mf.bind(null,n,l,i,t),null),i},useId:function(){var e=kt(),t=Be.identifierPrefix;if(Oe){var i=ki,n=Oi;i=(n&~(1<<32-_t(n)-1)).toString(32)+i,t="«"+t+"R"+i,i=sc++,0<i&&(t+="H"+i.toString(32)),t+="»"}else i=iv++,t="«"+t+"r"+i.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Dl,useFormState:Cf,useActionState:Cf,useOptimistic:function(e){var t=kt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=xl.bind(null,Se,!0,i),i.dispatch=t,[e,t]},useMemoCache:yl,useCacheRefresh:function(){return kt().memoizedState=cv.bind(null,Se)}},Xf={readContext:St,use:cc,useCallback:Uf,useContext:St,useEffect:Of,useImperativeHandle:Nf,useInsertionEffect:kf,useLayoutEffect:Af,useMemo:jf,useReducer:oc,useRef:Mf,useState:function(){return oc(Ni)},useDebugValue:Tl,useDeferredValue:function(e,t){var i=Je();return zf(i,Ne.memoizedState,e,t)},useTransition:function(){var e=oc(Ni)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:ka(e),t]},useSyncExternalStore:pf,useId:Hf,useHostTransitionStatus:Dl,useFormState:Ef,useActionState:Ef,useOptimistic:function(e,t){var i=Je();return yf(i,Ne,e,t)},useMemoCache:yl,useCacheRefresh:Vf},lv={readContext:St,use:cc,useCallback:Uf,useContext:St,useEffect:Of,useImperativeHandle:Nf,useInsertionEffect:kf,useLayoutEffect:Af,useMemo:jf,useReducer:bl,useRef:Mf,useState:function(){return bl(Ni)},useDebugValue:Tl,useDeferredValue:function(e,t){var i=Je();return Ne===null?Cl(i,e,t):zf(i,Ne.memoizedState,e,t)},useTransition:function(){var e=bl(Ni)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:ka(e),t]},useSyncExternalStore:pf,useId:Hf,useHostTransitionStatus:Dl,useFormState:xf,useActionState:xf,useOptimistic:function(e,t){var i=Je();return Ne!==null?yf(i,Ne,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:yl,useCacheRefresh:Vf},Or=null,Na=0;function pc(e){var t=Na;return Na+=1,Or===null&&(Or=[]),af(Or,e,t)}function Ua(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function hc(e,t){throw t.$$typeof===_?Error(a(525)):(e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ff(e){var t=e._init;return t(e._payload)}function Zf(e){function t(G,H){if(e){var Q=G.deletions;Q===null?(G.deletions=[H],G.flags|=16):Q.push(H)}}function i(G,H){if(!e)return null;for(;H!==null;)t(G,H),H=H.sibling;return null}function n(G){for(var H=new Map;G!==null;)G.key!==null?H.set(G.key,G):H.set(G.index,G),G=G.sibling;return H}function r(G,H){return G=Li(G,H),G.index=0,G.sibling=null,G}function l(G,H,Q){return G.index=Q,e?(Q=G.alternate,Q!==null?(Q=Q.index,Q<H?(G.flags|=67108866,H):Q):(G.flags|=67108866,H)):(G.flags|=1048576,H)}function D(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function P(G,H,Q,J){return H===null||H.tag!==6?(H=Fo(Q,G.mode,J),H.return=G,H):(H=r(H,Q),H.return=G,H)}function B(G,H,Q,J){var oe=Q.type;return oe===N?$(G,H,Q.props.children,J,Q.key):H!==null&&(H.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===C&&Ff(oe)===H.type)?(H=r(H,Q.props),Ua(H,Q),H.return=G,H):(H=Zs(Q.type,Q.key,Q.props,null,G.mode,J),Ua(H,Q),H.return=G,H)}function K(G,H,Q,J){return H===null||H.tag!==4||H.stateNode.containerInfo!==Q.containerInfo||H.stateNode.implementation!==Q.implementation?(H=Zo(Q,G.mode,J),H.return=G,H):(H=r(H,Q.children||[]),H.return=G,H)}function $(G,H,Q,J,oe){return H===null||H.tag!==7?(H=qn(Q,G.mode,J,oe),H.return=G,H):(H=r(H,Q),H.return=G,H)}function ee(G,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Fo(""+H,G.mode,Q),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case L:return Q=Zs(H.type,H.key,H.props,null,G.mode,Q),Ua(Q,H),Q.return=G,Q;case k:return H=Zo(H,G.mode,Q),H.return=G,H;case C:var J=H._init;return H=J(H._payload),ee(G,H,Q)}if(Z(H)||I(H))return H=qn(H,G.mode,Q,null),H.return=G,H;if(typeof H.then=="function")return ee(G,pc(H),Q);if(H.$$typeof===u)return ee(G,ec(G,H),Q);hc(G,H)}return null}function X(G,H,Q,J){var oe=H!==null?H.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return oe!==null?null:P(G,H,""+Q,J);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case L:return Q.key===oe?B(G,H,Q,J):null;case k:return Q.key===oe?K(G,H,Q,J):null;case C:return oe=Q._init,Q=oe(Q._payload),X(G,H,Q,J)}if(Z(Q)||I(Q))return oe!==null?null:$(G,H,Q,J,null);if(typeof Q.then=="function")return X(G,H,pc(Q),J);if(Q.$$typeof===u)return X(G,H,ec(G,Q),J);hc(G,Q)}return null}function F(G,H,Q,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return G=G.get(Q)||null,P(H,G,""+J,oe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case L:return G=G.get(J.key===null?Q:J.key)||null,B(H,G,J,oe);case k:return G=G.get(J.key===null?Q:J.key)||null,K(H,G,J,oe);case C:var we=J._init;return J=we(J._payload),F(G,H,Q,J,oe)}if(Z(J)||I(J))return G=G.get(Q)||null,$(H,G,J,oe,null);if(typeof J.then=="function")return F(G,H,Q,pc(J),oe);if(J.$$typeof===u)return F(G,H,Q,ec(H,J),oe);hc(H,J)}return null}function ge(G,H,Q,J){for(var oe=null,we=null,ue=H,he=H=0,lt=null;ue!==null&&he<Q.length;he++){ue.index>he?(lt=ue,ue=null):lt=ue.sibling;var Me=X(G,ue,Q[he],J);if(Me===null){ue===null&&(ue=lt);break}e&&ue&&Me.alternate===null&&t(G,ue),H=l(Me,H,he),we===null?oe=Me:we.sibling=Me,we=Me,ue=lt}if(he===Q.length)return i(G,ue),Oe&&Hn(G,he),oe;if(ue===null){for(;he<Q.length;he++)ue=ee(G,Q[he],J),ue!==null&&(H=l(ue,H,he),we===null?oe=ue:we.sibling=ue,we=ue);return Oe&&Hn(G,he),oe}for(ue=n(ue);he<Q.length;he++)lt=F(ue,G,he,Q[he],J),lt!==null&&(e&&lt.alternate!==null&&ue.delete(lt.key===null?he:lt.key),H=l(lt,H,he),we===null?oe=lt:we.sibling=lt,we=lt);return e&&ue.forEach(function(Sn){return t(G,Sn)}),Oe&&Hn(G,he),oe}function pe(G,H,Q,J){if(Q==null)throw Error(a(151));for(var oe=null,we=null,ue=H,he=H=0,lt=null,Me=Q.next();ue!==null&&!Me.done;he++,Me=Q.next()){ue.index>he?(lt=ue,ue=null):lt=ue.sibling;var Sn=X(G,ue,Me.value,J);if(Sn===null){ue===null&&(ue=lt);break}e&&ue&&Sn.alternate===null&&t(G,ue),H=l(Sn,H,he),we===null?oe=Sn:we.sibling=Sn,we=Sn,ue=lt}if(Me.done)return i(G,ue),Oe&&Hn(G,he),oe;if(ue===null){for(;!Me.done;he++,Me=Q.next())Me=ee(G,Me.value,J),Me!==null&&(H=l(Me,H,he),we===null?oe=Me:we.sibling=Me,we=Me);return Oe&&Hn(G,he),oe}for(ue=n(ue);!Me.done;he++,Me=Q.next())Me=F(ue,G,he,Me.value,J),Me!==null&&(e&&Me.alternate!==null&&ue.delete(Me.key===null?he:Me.key),H=l(Me,H,he),we===null?oe=Me:we.sibling=Me,we=Me);return e&&ue.forEach(function(dy){return t(G,dy)}),Oe&&Hn(G,he),oe}function je(G,H,Q,J){if(typeof Q=="object"&&Q!==null&&Q.type===N&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case L:e:{for(var oe=Q.key;H!==null;){if(H.key===oe){if(oe=Q.type,oe===N){if(H.tag===7){i(G,H.sibling),J=r(H,Q.props.children),J.return=G,G=J;break e}}else if(H.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===C&&Ff(oe)===H.type){i(G,H.sibling),J=r(H,Q.props),Ua(J,Q),J.return=G,G=J;break e}i(G,H);break}else t(G,H);H=H.sibling}Q.type===N?(J=qn(Q.props.children,G.mode,J,Q.key),J.return=G,G=J):(J=Zs(Q.type,Q.key,Q.props,null,G.mode,J),Ua(J,Q),J.return=G,G=J)}return D(G);case k:e:{for(oe=Q.key;H!==null;){if(H.key===oe)if(H.tag===4&&H.stateNode.containerInfo===Q.containerInfo&&H.stateNode.implementation===Q.implementation){i(G,H.sibling),J=r(H,Q.children||[]),J.return=G,G=J;break e}else{i(G,H);break}else t(G,H);H=H.sibling}J=Zo(Q,G.mode,J),J.return=G,G=J}return D(G);case C:return oe=Q._init,Q=oe(Q._payload),je(G,H,Q,J)}if(Z(Q))return ge(G,H,Q,J);if(I(Q)){if(oe=I(Q),typeof oe!="function")throw Error(a(150));return Q=oe.call(Q),pe(G,H,Q,J)}if(typeof Q.then=="function")return je(G,H,pc(Q),J);if(Q.$$typeof===u)return je(G,H,ec(G,Q),J);hc(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,H!==null&&H.tag===6?(i(G,H.sibling),J=r(H,Q),J.return=G,G=J):(i(G,H),J=Fo(Q,G.mode,J),J.return=G,G=J),D(G)):i(G,H)}return function(G,H,Q,J){try{Na=0;var oe=je(G,H,Q,J);return Or=null,oe}catch(ue){if(ue===Ea||ue===ic)throw ue;var we=qt(29,ue,null,G.mode);return we.lanes=J,we.return=G,we}finally{}}}var kr=Zf(!0),$f=Zf(!1),$t=W(null),vi=null;function an(e){var t=e.alternate;ne(it,it.current&1),ne($t,e),vi===null&&(t===null||Dr.current!==null||t.memoizedState!==null)&&(vi=e)}function Jf(e){if(e.tag===22){if(ne(it,it.current),ne($t,e),vi===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(vi=e)}}else sn()}function sn(){ne(it,it.current),ne($t,$t.current)}function Ui(e){re($t),vi===e&&(vi=null),re(it)}var it=W(0);function mc(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||vd(i)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ml(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:x({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ll={enqueueSetState:function(e,t,i){e=e._reactInternals;var n=Gt(),r=tn(n);r.payload=t,i!=null&&(r.callback=i),t=nn(e,r,n),t!==null&&(Yt(t,e,n),xa(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=Gt(),r=tn(n);r.tag=1,r.payload=t,i!=null&&(r.callback=i),t=nn(e,r,n),t!==null&&(Yt(t,e,n),xa(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Gt(),n=tn(i);n.tag=2,t!=null&&(n.callback=t),t=nn(e,n,i),t!==null&&(Yt(t,e,i),xa(t,e,i))}};function Wf(e,t,i,n,r,l,D){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,D):t.prototype&&t.prototype.isPureReactComponent?!va(i,n)||!va(r,l):!0}function ep(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Ll.enqueueReplaceState(t,t.state,null)}function Fn(e,t){var i=t;if("ref"in t){i={};for(var n in t)n!=="ref"&&(i[n]=t[n])}if(e=e.defaultProps){i===t&&(i=x({},i));for(var r in e)i[r]===void 0&&(i[r]=e[r])}return i}var gc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function tp(e){gc(e)}function ip(e){console.error(e)}function np(e){gc(e)}function _c(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function rp(e,t,i){try{var n=e.onCaughtError;n(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ol(e,t,i){return i=tn(i),i.tag=3,i.payload={element:null},i.callback=function(){_c(e,t)},i}function ap(e){return e=tn(e),e.tag=3,e}function sp(e,t,i,n){var r=i.type.getDerivedStateFromError;if(typeof r=="function"){var l=n.value;e.payload=function(){return r(l)},e.callback=function(){rp(t,i,n)}}var D=i.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(e.callback=function(){rp(t,i,n),typeof r!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var P=n.stack;this.componentDidCatch(n.value,{componentStack:P!==null?P:""})})}function dv(e,t,i,n,r){if(i.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=i.alternate,t!==null&&Ra(t,i,r,!0),i=$t.current,i!==null){switch(i.tag){case 13:return vi===null?td():i.alternate===null&&Ke===0&&(Ke=3),i.flags&=-257,i.flags|=65536,i.lanes=r,n===sl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([n]):t.add(n),nd(e,n,r)),!1;case 22:return i.flags|=65536,n===sl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([n]):i.add(n)),nd(e,n,r)),!1}throw Error(a(435,i.tag))}return nd(e,n,r),td(),!1}if(Oe)return t=$t.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,n!==Wo&&(e=Error(a(422),{cause:n}),wa(Kt(e,i)))):(n!==Wo&&(t=Error(a(423),{cause:n}),wa(Kt(t,i))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,n=Kt(n,i),r=Ol(e.stateNode,n,r),ll(e,r),Ke!==4&&(Ke=2)),!1;var l=Error(a(520),{cause:n});if(l=Kt(l,i),Va===null?Va=[l]:Va.push(l),Ke!==4&&(Ke=2),t===null)return!0;n=Kt(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=r&-r,i.lanes|=e,e=Ol(i.stateNode,n,e),ll(i,e),!1;case 1:if(t=i.type,l=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(fn===null||!fn.has(l))))return i.flags|=65536,r&=-r,i.lanes|=r,r=ap(r),sp(r,e,i,n),ll(i,r),!1}i=i.return}while(i!==null);return!1}var cp=Error(a(461)),ct=!1;function pt(e,t,i,n){t.child=e===null?$f(t,null,i,n):kr(t,e.child,i,n)}function op(e,t,i,n,r){i=i.render;var l=t.ref;if("ref"in n){var D={};for(var P in n)P!=="ref"&&(D[P]=n[P])}else D=n;return Qn(t),n=hl(e,t,i,D,l,r),P=ml(),e!==null&&!ct?(gl(e,t,r),ji(e,t,r)):(Oe&&P&&$o(t),t.flags|=1,pt(e,t,n,r),t.child)}function lp(e,t,i,n,r){if(e===null){var l=i.type;return typeof l=="function"&&!Xo(l)&&l.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=l,dp(e,t,l,n,r)):(e=Zs(i.type,null,n,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!Bl(e,r)){var D=l.memoizedProps;if(i=i.compare,i=i!==null?i:va,i(D,n)&&e.ref===t.ref)return ji(e,t,r)}return t.flags|=1,e=Li(l,n),e.ref=t.ref,e.return=t,t.child=e}function dp(e,t,i,n,r){if(e!==null){var l=e.memoizedProps;if(va(l,n)&&e.ref===t.ref)if(ct=!1,t.pendingProps=n=l,Bl(e,r))(e.flags&131072)!==0&&(ct=!0);else return t.lanes=e.lanes,ji(e,t,r)}return kl(e,t,i,n,r)}function up(e,t,i){var n=t.pendingProps,r=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((t.flags&128)!==0){if(n=l!==null?l.baseLanes|i:i,e!==null){for(r=t.child=e.child,l=0;r!==null;)l=l|r.lanes|r.childLanes,r=r.sibling;t.childLanes=l&~n}else t.childLanes=0,t.child=null;return fp(e,t,n,i)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&tc(t,l!==null?l.cachePool:null),l!==null?df(t,l):ul(),Jf(t);else return t.lanes=t.childLanes=536870912,fp(e,t,l!==null?l.baseLanes|i:i,i)}else l!==null?(tc(t,l.cachePool),df(t,l),sn(),t.memoizedState=null):(e!==null&&tc(t,null),ul(),sn());return pt(e,t,r,i),t.child}function fp(e,t,i,n){var r=al();return r=r===null?null:{parent:tt._currentValue,pool:r},t.memoizedState={baseLanes:i,cachePool:r},e!==null&&tc(t,null),ul(),Jf(t),e!==null&&Ra(e,t,n,!0),null}function vc(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function kl(e,t,i,n,r){return Qn(t),i=hl(e,t,i,n,void 0,r),n=ml(),e!==null&&!ct?(gl(e,t,r),ji(e,t,r)):(Oe&&n&&$o(t),t.flags|=1,pt(e,t,i,r),t.child)}function pp(e,t,i,n,r,l){return Qn(t),t.updateQueue=null,i=ff(t,n,i,r),uf(e),n=ml(),e!==null&&!ct?(gl(e,t,l),ji(e,t,l)):(Oe&&n&&$o(t),t.flags|=1,pt(e,t,i,l),t.child)}function hp(e,t,i,n,r){if(Qn(t),t.stateNode===null){var l=wr,D=i.contextType;typeof D=="object"&&D!==null&&(l=St(D)),l=new i(n,l),t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Ll,t.stateNode=l,l._reactInternals=t,l=t.stateNode,l.props=n,l.state=t.memoizedState,l.refs={},cl(t),D=i.contextType,l.context=typeof D=="object"&&D!==null?St(D):wr,l.state=t.memoizedState,D=i.getDerivedStateFromProps,typeof D=="function"&&(Ml(t,i,D,n),l.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(D=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),D!==l.state&&Ll.enqueueReplaceState(l,l.state,null),La(t,n,l,r),Ma(),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){l=t.stateNode;var P=t.memoizedProps,B=Fn(i,P);l.props=B;var K=l.context,$=i.contextType;D=wr,typeof $=="object"&&$!==null&&(D=St($));var ee=i.getDerivedStateFromProps;$=typeof ee=="function"||typeof l.getSnapshotBeforeUpdate=="function",P=t.pendingProps!==P,$||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(P||K!==D)&&ep(t,l,n,D),en=!1;var X=t.memoizedState;l.state=X,La(t,n,l,r),Ma(),K=t.memoizedState,P||X!==K||en?(typeof ee=="function"&&(Ml(t,i,ee,n),K=t.memoizedState),(B=en||Wf(t,i,B,n,X,K,D))?($||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=K),l.props=n,l.state=K,l.context=D,n=B):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,ol(e,t),D=t.memoizedProps,$=Fn(i,D),l.props=$,ee=t.pendingProps,X=l.context,K=i.contextType,B=wr,typeof K=="object"&&K!==null&&(B=St(K)),P=i.getDerivedStateFromProps,(K=typeof P=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(D!==ee||X!==B)&&ep(t,l,n,B),en=!1,X=t.memoizedState,l.state=X,La(t,n,l,r),Ma();var F=t.memoizedState;D!==ee||X!==F||en||e!==null&&e.dependencies!==null&&Ws(e.dependencies)?(typeof P=="function"&&(Ml(t,i,P,n),F=t.memoizedState),($=en||Wf(t,i,$,n,X,F,B)||e!==null&&e.dependencies!==null&&Ws(e.dependencies))?(K||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,F,B),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,F,B)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||D===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=F),l.props=n,l.state=F,l.context=B,n=$):(typeof l.componentDidUpdate!="function"||D===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),n=!1)}return l=n,vc(e,t),n=(t.flags&128)!==0,l||n?(l=t.stateNode,i=n&&typeof i.getDerivedStateFromError!="function"?null:l.render(),t.flags|=1,e!==null&&n?(t.child=kr(t,e.child,null,r),t.child=kr(t,null,i,r)):pt(e,t,i,r),t.memoizedState=l.state,e=t.child):e=ji(e,t,r),e}function mp(e,t,i,n){return ba(),t.flags|=256,pt(e,t,i,n),t.child}var Al={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pl(e){return{baseLanes:e,cachePool:tf()}}function Nl(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Jt),e}function gp(e,t,i){var n=t.pendingProps,r=!1,l=(t.flags&128)!==0,D;if((D=l)||(D=e!==null&&e.memoizedState===null?!1:(it.current&2)!==0),D&&(r=!0,t.flags&=-129),D=(t.flags&32)!==0,t.flags&=-33,e===null){if(Oe){if(r?an(t):sn(),Oe){var P=Qe,B;if(B=P){e:{for(B=P,P=_i;B.nodeType!==8;){if(!P){P=null;break e}if(B=di(B.nextSibling),B===null){P=null;break e}}P=B}P!==null?(t.memoizedState={dehydrated:P,treeContext:In!==null?{id:Oi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},B=qt(18,null,null,0),B.stateNode=P,B.return=t,t.child=B,Et=t,Qe=null,B=!0):B=!1}B||Gn(t)}if(P=t.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return vd(P)?t.lanes=32:t.lanes=536870912,null;Ui(t)}return P=n.children,n=n.fallback,r?(sn(),r=t.mode,P=yc({mode:"hidden",children:P},r),n=qn(n,r,i,null),P.return=t,n.return=t,P.sibling=n,t.child=P,r=t.child,r.memoizedState=Pl(i),r.childLanes=Nl(e,D,i),t.memoizedState=Al,n):(an(t),Ul(t,P))}if(B=e.memoizedState,B!==null&&(P=B.dehydrated,P!==null)){if(l)t.flags&256?(an(t),t.flags&=-257,t=jl(e,t,i)):t.memoizedState!==null?(sn(),t.child=e.child,t.flags|=128,t=null):(sn(),r=n.fallback,P=t.mode,n=yc({mode:"visible",children:n.children},P),r=qn(r,P,i,null),r.flags|=2,n.return=t,r.return=t,n.sibling=r,t.child=n,kr(t,e.child,null,i),n=t.child,n.memoizedState=Pl(i),n.childLanes=Nl(e,D,i),t.memoizedState=Al,t=r);else if(an(t),vd(P)){if(D=P.nextSibling&&P.nextSibling.dataset,D)var K=D.dgst;D=K,n=Error(a(419)),n.stack="",n.digest=D,wa({value:n,source:null,stack:null}),t=jl(e,t,i)}else if(ct||Ra(e,t,i,!1),D=(i&e.childLanes)!==0,ct||D){if(D=Be,D!==null&&(n=i&-i,n=(n&42)!==0?1:Qt(n),n=(n&(D.suspendedLanes|i))!==0?0:n,n!==0&&n!==B.retryLane))throw B.retryLane=n,br(e,n),Yt(D,e,n),cp;P.data==="$?"||td(),t=jl(e,t,i)}else P.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=B.treeContext,Qe=di(P.nextSibling),Et=t,Oe=!0,Vn=null,_i=!1,e!==null&&(Ft[Zt++]=Oi,Ft[Zt++]=ki,Ft[Zt++]=In,Oi=e.id,ki=e.overflow,In=t),t=Ul(t,n.children),t.flags|=4096);return t}return r?(sn(),r=n.fallback,P=t.mode,B=e.child,K=B.sibling,n=Li(B,{mode:"hidden",children:n.children}),n.subtreeFlags=B.subtreeFlags&65011712,K!==null?r=Li(K,r):(r=qn(r,P,i,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,n=r,r=t.child,P=e.child.memoizedState,P===null?P=Pl(i):(B=P.cachePool,B!==null?(K=tt._currentValue,B=B.parent!==K?{parent:K,pool:K}:B):B=tf(),P={baseLanes:P.baseLanes|i,cachePool:B}),r.memoizedState=P,r.childLanes=Nl(e,D,i),t.memoizedState=Al,n):(an(t),i=e.child,e=i.sibling,i=Li(i,{mode:"visible",children:n.children}),i.return=t,i.sibling=null,e!==null&&(D=t.deletions,D===null?(t.deletions=[e],t.flags|=16):D.push(e)),t.child=i,t.memoizedState=null,i)}function Ul(e,t){return t=yc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function yc(e,t){return e=qt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function jl(e,t,i){return kr(t,e.child,null,i),e=Ul(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _p(e,t,i){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),tl(e.return,t,i)}function zl(e,t,i,n,r){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=i,l.tailMode=r)}function vp(e,t,i){var n=t.pendingProps,r=n.revealOrder,l=n.tail;if(pt(e,t,n.children,i),n=it.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_p(e,i,t);else if(e.tag===19)_p(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(ne(it,n),r){case"forwards":for(i=t.child,r=null;i!==null;)e=i.alternate,e!==null&&mc(e)===null&&(r=i),i=i.sibling;i=r,i===null?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),zl(t,!1,r,i,l);break;case"backwards":for(i=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&mc(e)===null){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}zl(t,!0,i,null,l);break;case"together":zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ji(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),un|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Ra(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,i=Li(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Li(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Bl(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ws(e)))}function uv(e,t,i){switch(t.tag){case 3:ke(t,t.stateNode.containerInfo),Wi(t,tt,e.memoizedState.cache),ba();break;case 27:case 5:$r(t);break;case 4:ke(t,t.stateNode.containerInfo);break;case 10:Wi(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(an(t),t.flags|=128,null):(i&t.child.childLanes)!==0?gp(e,t,i):(an(t),e=ji(e,t,i),e!==null?e.sibling:null);an(t);break;case 19:var r=(e.flags&128)!==0;if(n=(i&t.childLanes)!==0,n||(Ra(e,t,i,!1),n=(i&t.childLanes)!==0),r){if(n)return vp(e,t,i);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ne(it,it.current),n)break;return null;case 22:case 23:return t.lanes=0,up(e,t,i);case 24:Wi(t,tt,e.memoizedState.cache)}return ji(e,t,i)}function yp(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)ct=!0;else{if(!Bl(e,i)&&(t.flags&128)===0)return ct=!1,uv(e,t,i);ct=(e.flags&131072)!==0}else ct=!1,Oe&&(t.flags&1048576)!==0&&Xu(t,Js,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,r=n._init;if(n=r(n._payload),t.type=n,typeof n=="function")Xo(n)?(e=Fn(n,e),t.tag=1,t=hp(null,t,n,e,i)):(t.tag=0,t=kl(null,t,n,e,i));else{if(n!=null){if(r=n.$$typeof,r===p){t.tag=11,t=op(null,t,n,e,i);break e}else if(r===v){t.tag=14,t=lp(null,t,n,e,i);break e}}throw t=Y(n)||n,Error(a(306,t,""))}}return t;case 0:return kl(e,t,t.type,t.pendingProps,i);case 1:return n=t.type,r=Fn(n,t.pendingProps),hp(e,t,n,r,i);case 3:e:{if(ke(t,t.stateNode.containerInfo),e===null)throw Error(a(387));n=t.pendingProps;var l=t.memoizedState;r=l.element,ol(e,t),La(t,n,null,i);var D=t.memoizedState;if(n=D.cache,Wi(t,tt,n),n!==l.cache&&il(t,[tt],i,!0),Ma(),n=D.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:D.cache},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){t=mp(e,t,n,i);break e}else if(n!==r){r=Kt(Error(a(424)),t),wa(r),t=mp(e,t,n,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Qe=di(e.firstChild),Et=t,Oe=!0,Vn=null,_i=!0,i=$f(t,null,n,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ba(),n===r){t=ji(e,t,i);break e}pt(e,t,n,i)}t=t.child}return t;case 26:return vc(e,t),e===null?(i=Rh(t.type,null,t.pendingProps,null))?t.memoizedState=i:Oe||(i=t.type,e=t.pendingProps,n=Ac(me.current).createElement(i),n[Ve]=t,n[rt]=e,mt(n,i,e),Ge(n),t.stateNode=n):t.memoizedState=Rh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $r(t),e===null&&Oe&&(n=t.stateNode=Sh(t.type,t.pendingProps,me.current),Et=t,_i=!0,r=Qe,mn(t.type)?(yd=r,Qe=di(n.firstChild)):Qe=r),pt(e,t,t.pendingProps.children,i),vc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Oe&&((r=n=Qe)&&(n=Bv(n,t.type,t.pendingProps,_i),n!==null?(t.stateNode=n,Et=t,Qe=di(n.firstChild),_i=!1,r=!0):r=!1),r||Gn(t)),$r(t),r=t.type,l=t.pendingProps,D=e!==null?e.memoizedProps:null,n=l.children,md(r,l)?n=null:D!==null&&md(r,D)&&(t.flags|=32),t.memoizedState!==null&&(r=hl(e,t,nv,null,null,i),Ja._currentValue=r),vc(e,t),pt(e,t,n,i),t.child;case 6:return e===null&&Oe&&((e=i=Qe)&&(i=qv(i,t.pendingProps,_i),i!==null?(t.stateNode=i,Et=t,Qe=null,e=!0):e=!1),e||Gn(t)),null;case 13:return gp(e,t,i);case 4:return ke(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=kr(t,null,n,i):pt(e,t,n,i),t.child;case 11:return op(e,t,t.type,t.pendingProps,i);case 7:return pt(e,t,t.pendingProps,i),t.child;case 8:return pt(e,t,t.pendingProps.children,i),t.child;case 12:return pt(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,Wi(t,t.type,n.value),pt(e,t,n.children,i),t.child;case 9:return r=t.type._context,n=t.pendingProps.children,Qn(t),r=St(r),n=n(r),t.flags|=1,pt(e,t,n,i),t.child;case 14:return lp(e,t,t.type,t.pendingProps,i);case 15:return dp(e,t,t.type,t.pendingProps,i);case 19:return vp(e,t,i);case 31:return n=t.pendingProps,i=t.mode,n={mode:n.mode,children:n.children},e===null?(i=yc(n,i),i.ref=t.ref,t.child=i,i.return=t,t=i):(i=Li(e.child,n),i.ref=t.ref,t.child=i,i.return=t,t=i),t;case 22:return up(e,t,i);case 24:return Qn(t),n=St(tt),e===null?(r=al(),r===null&&(r=Be,l=nl(),r.pooledCache=l,l.refCount++,l!==null&&(r.pooledCacheLanes|=i),r=l),t.memoizedState={parent:n,cache:r},cl(t),Wi(t,tt,r)):((e.lanes&i)!==0&&(ol(e,t),La(t,null,null,i),Ma()),r=e.memoizedState,l=t.memoizedState,r.parent!==n?(r={parent:n,cache:n},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Wi(t,tt,n)):(n=l.cache,Wi(t,tt,n),n!==r.cache&&il(t,[tt],i,!0))),pt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function zi(e){e.flags|=4}function Sp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!xh(t)){if(t=$t.current,t!==null&&((xe&4194048)===xe?vi!==null:(xe&62914560)!==xe&&(xe&536870912)===0||t!==vi))throw Da=sl,nf;e.flags|=8192}}function Sc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?aa():536870912,e.lanes|=t,Ur|=t)}function ja(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,n=0;if(t)for(var r=e.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags&65011712,n|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function fv(e,t,i){var n=t.pendingProps;switch(Jo(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return Ye(t),null;case 3:return i=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Pi(tt),Tt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Sa(t)?zi(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,$u())),Ye(t),null;case 26:return i=t.memoizedState,e===null?(zi(t),i!==null?(Ye(t),Sp(t,i)):(Ye(t),t.flags&=-16777217)):i?i!==e.memoizedState?(zi(t),Ye(t),Sp(t,i)):(Ye(t),t.flags&=-16777217):(e.memoizedProps!==n&&zi(t),Ye(t),t.flags&=-16777217),null;case 27:Cn(t),i=me.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&zi(t);else{if(!n){if(t.stateNode===null)throw Error(a(166));return Ye(t),null}e=se.current,Sa(t)?Fu(t):(e=Sh(r,n,i),t.stateNode=e,zi(t))}return Ye(t),null;case 5:if(Cn(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&zi(t);else{if(!n){if(t.stateNode===null)throw Error(a(166));return Ye(t),null}if(e=se.current,Sa(t))Fu(t);else{switch(r=Ac(me.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?r.createElement("select",{is:n.is}):r.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?r.createElement(i,{is:n.is}):r.createElement(i)}}e[Ve]=t,e[rt]=n;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(mt(e,i,n),i){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&zi(t)}}return Ye(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&zi(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(a(166));if(e=me.current,Sa(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,r=Et,r!==null)switch(r.tag){case 27:case 5:n=r.memoizedProps}e[Ve]=t,e=!!(e.nodeValue===i||n!==null&&n.suppressHydrationWarning===!0||ph(e.nodeValue,i)),e||Gn(t)}else e=Ac(e).createTextNode(n),e[Ve]=t,t.stateNode=e}return Ye(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Sa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!r)throw Error(a(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));r[Ve]=t}else ba(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),r=!1}else r=$u(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(Ui(t),t):(Ui(t),null)}if(Ui(t),(t.flags&128)!==0)return t.lanes=i,t;if(i=n!==null,e=e!==null&&e.memoizedState!==null,i){n=t.child,r=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(r=n.alternate.memoizedState.cachePool.pool);var l=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),Sc(t,t.updateQueue),Ye(t),null;case 4:return Tt(),e===null&&dd(t.stateNode.containerInfo),Ye(t),null;case 10:return Pi(t.type),Ye(t),null;case 19:if(re(it),r=t.memoizedState,r===null)return Ye(t),null;if(n=(t.flags&128)!==0,l=r.rendering,l===null)if(n)ja(r,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(l=mc(e),l!==null){for(t.flags|=128,ja(r,!1),e=l.updateQueue,t.updateQueue=e,Sc(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Ku(i,e),i=i.sibling;return ne(it,it.current&1|2),t.child}e=e.sibling}r.tail!==null&&jt()>Rc&&(t.flags|=128,n=!0,ja(r,!1),t.lanes=4194304)}else{if(!n)if(e=mc(l),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Sc(t,e),ja(r,!0),r.tail===null&&r.tailMode==="hidden"&&!l.alternate&&!Oe)return Ye(t),null}else 2*jt()-r.renderingStartTime>Rc&&i!==536870912&&(t.flags|=128,n=!0,ja(r,!1),t.lanes=4194304);r.isBackwards?(l.sibling=t.child,t.child=l):(e=r.last,e!==null?e.sibling=l:t.child=l,r.last=l)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=jt(),t.sibling=null,e=it.current,ne(it,n?e&1|2:e&1),t):(Ye(t),null);case 22:case 23:return Ui(t),fl(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(i&536870912)!==0&&(t.flags&128)===0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),i=t.updateQueue,i!==null&&Sc(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),e!==null&&re(Kn),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Pi(tt),Ye(t),null;case 25:return null;case 30:return null}throw Error(a(156,t.tag))}function pv(e,t){switch(Jo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pi(tt),Tt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Cn(t),null;case 13:if(Ui(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));ba()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return re(it),null;case 4:return Tt(),null;case 10:return Pi(t.type),null;case 22:case 23:return Ui(t),fl(),e!==null&&re(Kn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Pi(tt),null;case 25:return null;default:return null}}function bp(e,t){switch(Jo(t),t.tag){case 3:Pi(tt),Tt();break;case 26:case 27:case 5:Cn(t);break;case 4:Tt();break;case 13:Ui(t);break;case 19:re(it);break;case 10:Pi(t.type);break;case 22:case 23:Ui(t),fl(),e!==null&&re(Kn);break;case 24:Pi(tt)}}function za(e,t){try{var i=t.updateQueue,n=i!==null?i.lastEffect:null;if(n!==null){var r=n.next;i=r;do{if((i.tag&e)===e){n=void 0;var l=i.create,D=i.inst;n=l(),D.destroy=n}i=i.next}while(i!==r)}}catch(P){ze(t,t.return,P)}}function cn(e,t,i){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var l=r.next;n=l;do{if((n.tag&e)===e){var D=n.inst,P=D.destroy;if(P!==void 0){D.destroy=void 0,r=t;var B=i,K=P;try{K()}catch($){ze(r,B,$)}}}n=n.next}while(n!==l)}}catch($){ze(t,t.return,$)}}function wp(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{lf(t,i)}catch(n){ze(e,e.return,n)}}}function Rp(e,t,i){i.props=Fn(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(n){ze(e,t,n)}}function Ba(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof i=="function"?e.refCleanup=i(n):i.current=n}}catch(r){ze(e,t,r)}}function yi(e,t){var i=e.ref,n=e.refCleanup;if(i!==null)if(typeof n=="function")try{n()}catch(r){ze(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(r){ze(e,t,r)}else i.current=null}function Tp(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break e;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(r){ze(e,e.return,r)}}function ql(e,t,i){try{var n=e.stateNode;Pv(n,e.type,i,t),n[rt]=t}catch(r){ze(e,e.return,r)}}function Cp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&mn(e.type)||e.tag===4}function Il(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&mn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hl(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=kc));else if(n!==4&&(n===27&&mn(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Hl(e,t,i),e=e.sibling;e!==null;)Hl(e,t,i),e=e.sibling}function bc(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(n===27&&mn(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(bc(e,t,i),e=e.sibling;e!==null;)bc(e,t,i),e=e.sibling}function Ep(e){var t=e.stateNode,i=e.memoizedProps;try{for(var n=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);mt(t,n,i),t[Ve]=e,t[rt]=i}catch(l){ze(e,e.return,l)}}var Bi=!1,Fe=!1,Vl=!1,Dp=typeof WeakSet=="function"?WeakSet:Set,ot=null;function hv(e,t){if(e=e.containerInfo,pd=Bc,e=ju(e),Io(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var r=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{i.nodeType,l.nodeType}catch{i=null;break e}var D=0,P=-1,B=-1,K=0,$=0,ee=e,X=null;t:for(;;){for(var F;ee!==i||r!==0&&ee.nodeType!==3||(P=D+r),ee!==l||n!==0&&ee.nodeType!==3||(B=D+n),ee.nodeType===3&&(D+=ee.nodeValue.length),(F=ee.firstChild)!==null;)X=ee,ee=F;for(;;){if(ee===e)break t;if(X===i&&++K===r&&(P=D),X===l&&++$===n&&(B=D),(F=ee.nextSibling)!==null)break;ee=X,X=ee.parentNode}ee=F}i=P===-1||B===-1?null:{start:P,end:B}}else i=null}i=i||{start:0,end:0}}else i=null;for(hd={focusedElem:e,selectionRange:i},Bc=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){switch(t=ot,l=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&l!==null){e=void 0,i=t,r=l.memoizedProps,l=l.memoizedState,n=i.stateNode;try{var ge=Fn(i.type,r,i.elementType===i.type);e=n.getSnapshotBeforeUpdate(ge,l),n.__reactInternalSnapshotBeforeUpdate=e}catch(pe){ze(i,i.return,pe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)_d(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_d(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}}function xp(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:on(e,i),n&4&&za(5,i);break;case 1:if(on(e,i),n&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(D){ze(i,i.return,D)}else{var r=Fn(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(D){ze(i,i.return,D)}}n&64&&wp(i),n&512&&Ba(i,i.return);break;case 3:if(on(e,i),n&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{lf(e,t)}catch(D){ze(i,i.return,D)}}break;case 27:t===null&&n&4&&Ep(i);case 26:case 5:on(e,i),t===null&&n&4&&Tp(i),n&512&&Ba(i,i.return);break;case 12:on(e,i);break;case 13:on(e,i),n&4&&Op(e,i),n&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Rv.bind(null,i),Iv(e,i))));break;case 22:if(n=i.memoizedState!==null||Bi,!n){t=t!==null&&t.memoizedState!==null||Fe,r=Bi;var l=Fe;Bi=n,(Fe=t)&&!l?ln(e,i,(i.subtreeFlags&8772)!==0):on(e,i),Bi=r,Fe=l}break;case 30:break;default:on(e,i)}}function Mp(e){var t=e.alternate;t!==null&&(e.alternate=null,Mp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&An(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var He=null,At=!1;function qi(e,t,i){for(i=i.child;i!==null;)Lp(e,t,i),i=i.sibling}function Lp(e,t,i){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Qi,i)}catch{}switch(i.tag){case 26:Fe||yi(i,t),qi(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Fe||yi(i,t);var n=He,r=At;mn(i.type)&&(He=i.stateNode,At=!1),qi(e,t,i),Xa(i.stateNode),He=n,At=r;break;case 5:Fe||yi(i,t);case 6:if(n=He,r=At,He=null,qi(e,t,i),He=n,At=r,He!==null)if(At)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(i.stateNode)}catch(l){ze(i,t,l)}else try{He.removeChild(i.stateNode)}catch(l){ze(i,t,l)}break;case 18:He!==null&&(At?(e=He,vh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),is(e)):vh(He,i.stateNode));break;case 4:n=He,r=At,He=i.stateNode.containerInfo,At=!0,qi(e,t,i),He=n,At=r;break;case 0:case 11:case 14:case 15:Fe||cn(2,i,t),Fe||cn(4,i,t),qi(e,t,i);break;case 1:Fe||(yi(i,t),n=i.stateNode,typeof n.componentWillUnmount=="function"&&Rp(i,t,n)),qi(e,t,i);break;case 21:qi(e,t,i);break;case 22:Fe=(n=Fe)||i.memoizedState!==null,qi(e,t,i),Fe=n;break;default:qi(e,t,i)}}function Op(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{is(e)}catch(i){ze(t,t.return,i)}}function mv(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Dp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Dp),t;default:throw Error(a(435,e.tag))}}function Gl(e,t){var i=mv(e);t.forEach(function(n){var r=Tv.bind(null,e,n);i.has(n)||(i.add(n),n.then(r,r))})}function It(e,t){var i=t.deletions;if(i!==null)for(var n=0;n<i.length;n++){var r=i[n],l=e,D=t,P=D;e:for(;P!==null;){switch(P.tag){case 27:if(mn(P.type)){He=P.stateNode,At=!1;break e}break;case 5:He=P.stateNode,At=!1;break e;case 3:case 4:He=P.stateNode.containerInfo,At=!0;break e}P=P.return}if(He===null)throw Error(a(160));Lp(l,D,r),He=null,At=!1,l=r.alternate,l!==null&&(l.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)kp(t,e),t=t.sibling}var li=null;function kp(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:It(t,e),Ht(e),n&4&&(cn(3,e,e.return),za(3,e),cn(5,e,e.return));break;case 1:It(t,e),Ht(e),n&512&&(Fe||i===null||yi(i,i.return)),n&64&&Bi&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?n:i.concat(n))));break;case 26:var r=li;if(It(t,e),Ht(e),n&512&&(Fe||i===null||yi(i,i.return)),n&4){var l=i!==null?i.memoizedState:null;if(n=e.memoizedState,i===null)if(n===null)if(e.stateNode===null){e:{n=e.type,i=e.memoizedProps,r=r.ownerDocument||r;t:switch(n){case"title":l=r.getElementsByTagName("title")[0],(!l||l[ai]||l[Ve]||l.namespaceURI==="http://www.w3.org/2000/svg"||l.hasAttribute("itemprop"))&&(l=r.createElement(n),r.head.insertBefore(l,r.querySelector("head > title"))),mt(l,n,i),l[Ve]=e,Ge(l),n=l;break e;case"link":var D=Eh("link","href",r).get(n+(i.href||""));if(D){for(var P=0;P<D.length;P++)if(l=D[P],l.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&l.getAttribute("rel")===(i.rel==null?null:i.rel)&&l.getAttribute("title")===(i.title==null?null:i.title)&&l.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){D.splice(P,1);break t}}l=r.createElement(n),mt(l,n,i),r.head.appendChild(l);break;case"meta":if(D=Eh("meta","content",r).get(n+(i.content||""))){for(P=0;P<D.length;P++)if(l=D[P],l.getAttribute("content")===(i.content==null?null:""+i.content)&&l.getAttribute("name")===(i.name==null?null:i.name)&&l.getAttribute("property")===(i.property==null?null:i.property)&&l.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&l.getAttribute("charset")===(i.charSet==null?null:i.charSet)){D.splice(P,1);break t}}l=r.createElement(n),mt(l,n,i),r.head.appendChild(l);break;default:throw Error(a(468,n))}l[Ve]=e,Ge(l),n=l}e.stateNode=n}else Dh(r,e.type,e.stateNode);else e.stateNode=Ch(r,n,e.memoizedProps);else l!==n?(l===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):l.count--,n===null?Dh(r,e.type,e.stateNode):Ch(r,n,e.memoizedProps)):n===null&&e.stateNode!==null&&ql(e,e.memoizedProps,i.memoizedProps)}break;case 27:It(t,e),Ht(e),n&512&&(Fe||i===null||yi(i,i.return)),i!==null&&n&4&&ql(e,e.memoizedProps,i.memoizedProps);break;case 5:if(It(t,e),Ht(e),n&512&&(Fe||i===null||yi(i,i.return)),e.flags&32){r=e.stateNode;try{hr(r,"")}catch(F){ze(e,e.return,F)}}n&4&&e.stateNode!=null&&(r=e.memoizedProps,ql(e,r,i!==null?i.memoizedProps:r)),n&1024&&(Vl=!0);break;case 6:if(It(t,e),Ht(e),n&4){if(e.stateNode===null)throw Error(a(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(F){ze(e,e.return,F)}}break;case 3:if(Uc=null,r=li,li=Pc(t.containerInfo),It(t,e),li=r,Ht(e),n&4&&i!==null&&i.memoizedState.isDehydrated)try{is(t.containerInfo)}catch(F){ze(e,e.return,F)}Vl&&(Vl=!1,Ap(e));break;case 4:n=li,li=Pc(e.stateNode.containerInfo),It(t,e),Ht(e),li=n;break;case 12:It(t,e),Ht(e);break;case 13:It(t,e),Ht(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Zl=jt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Gl(e,n)));break;case 22:r=e.memoizedState!==null;var B=i!==null&&i.memoizedState!==null,K=Bi,$=Fe;if(Bi=K||r,Fe=$||B,It(t,e),Fe=$,Bi=K,Ht(e),n&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(i===null||B||Bi||Fe||Zn(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){B=i=t;try{if(l=B.stateNode,r)D=l.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{P=B.stateNode;var ee=B.memoizedProps.style,X=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;P.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(F){ze(B,B.return,F)}}}else if(t.tag===6){if(i===null){B=t;try{B.stateNode.nodeValue=r?"":B.memoizedProps}catch(F){ze(B,B.return,F)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(i=n.retryQueue,i!==null&&(n.retryQueue=null,Gl(e,i))));break;case 19:It(t,e),Ht(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Gl(e,n)));break;case 30:break;case 21:break;default:It(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{for(var i,n=e.return;n!==null;){if(Cp(n)){i=n;break}n=n.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var r=i.stateNode,l=Il(e);bc(e,l,r);break;case 5:var D=i.stateNode;i.flags&32&&(hr(D,""),i.flags&=-33);var P=Il(e);bc(e,P,D);break;case 3:case 4:var B=i.stateNode.containerInfo,K=Il(e);Hl(e,K,B);break;default:throw Error(a(161))}}catch($){ze(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ap(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ap(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function on(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)xp(e,t.alternate,t),t=t.sibling}function Zn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cn(4,t,t.return),Zn(t);break;case 1:yi(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Rp(t,t.return,i),Zn(t);break;case 27:Xa(t.stateNode);case 26:case 5:yi(t,t.return),Zn(t);break;case 22:t.memoizedState===null&&Zn(t);break;case 30:Zn(t);break;default:Zn(t)}e=e.sibling}}function ln(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,r=e,l=t,D=l.flags;switch(l.tag){case 0:case 11:case 15:ln(r,l,i),za(4,l);break;case 1:if(ln(r,l,i),n=l,r=n.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(K){ze(n,n.return,K)}if(n=l,r=n.updateQueue,r!==null){var P=n.stateNode;try{var B=r.shared.hiddenCallbacks;if(B!==null)for(r.shared.hiddenCallbacks=null,r=0;r<B.length;r++)of(B[r],P)}catch(K){ze(n,n.return,K)}}i&&D&64&&wp(l),Ba(l,l.return);break;case 27:Ep(l);case 26:case 5:ln(r,l,i),i&&n===null&&D&4&&Tp(l),Ba(l,l.return);break;case 12:ln(r,l,i);break;case 13:ln(r,l,i),i&&D&4&&Op(r,l);break;case 22:l.memoizedState===null&&ln(r,l,i),Ba(l,l.return);break;case 30:break;default:ln(r,l,i)}t=t.sibling}}function Yl(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Ta(i))}function Ql(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ta(e))}function Si(e,t,i,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Pp(e,t,i,n),t=t.sibling}function Pp(e,t,i,n){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Si(e,t,i,n),r&2048&&za(9,t);break;case 1:Si(e,t,i,n);break;case 3:Si(e,t,i,n),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ta(e)));break;case 12:if(r&2048){Si(e,t,i,n),e=t.stateNode;try{var l=t.memoizedProps,D=l.id,P=l.onPostCommit;typeof P=="function"&&P(D,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(B){ze(t,t.return,B)}}else Si(e,t,i,n);break;case 13:Si(e,t,i,n);break;case 23:break;case 22:l=t.stateNode,D=t.alternate,t.memoizedState!==null?l._visibility&2?Si(e,t,i,n):qa(e,t):l._visibility&2?Si(e,t,i,n):(l._visibility|=2,Ar(e,t,i,n,(t.subtreeFlags&10256)!==0)),r&2048&&Yl(D,t);break;case 24:Si(e,t,i,n),r&2048&&Ql(t.alternate,t);break;default:Si(e,t,i,n)}}function Ar(e,t,i,n,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var l=e,D=t,P=i,B=n,K=D.flags;switch(D.tag){case 0:case 11:case 15:Ar(l,D,P,B,r),za(8,D);break;case 23:break;case 22:var $=D.stateNode;D.memoizedState!==null?$._visibility&2?Ar(l,D,P,B,r):qa(l,D):($._visibility|=2,Ar(l,D,P,B,r)),r&&K&2048&&Yl(D.alternate,D);break;case 24:Ar(l,D,P,B,r),r&&K&2048&&Ql(D.alternate,D);break;default:Ar(l,D,P,B,r)}t=t.sibling}}function qa(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,n=t,r=n.flags;switch(n.tag){case 22:qa(i,n),r&2048&&Yl(n.alternate,n);break;case 24:qa(i,n),r&2048&&Ql(n.alternate,n);break;default:qa(i,n)}t=t.sibling}}var Ia=8192;function Pr(e){if(e.subtreeFlags&Ia)for(e=e.child;e!==null;)Np(e),e=e.sibling}function Np(e){switch(e.tag){case 26:Pr(e),e.flags&Ia&&e.memoizedState!==null&&ey(li,e.memoizedState,e.memoizedProps);break;case 5:Pr(e);break;case 3:case 4:var t=li;li=Pc(e.stateNode.containerInfo),Pr(e),li=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Ia,Ia=16777216,Pr(e),Ia=t):Pr(e));break;default:Pr(e)}}function Up(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ha(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];ot=n,zp(n,e)}Up(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jp(e),e=e.sibling}function jp(e){switch(e.tag){case 0:case 11:case 15:Ha(e),e.flags&2048&&cn(9,e,e.return);break;case 3:Ha(e);break;case 12:Ha(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,wc(e)):Ha(e);break;default:Ha(e)}}function wc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];ot=n,zp(n,e)}Up(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:cn(8,t,t.return),wc(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,wc(t));break;default:wc(t)}e=e.sibling}}function zp(e,t){for(;ot!==null;){var i=ot;switch(i.tag){case 0:case 11:case 15:cn(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var n=i.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Ta(i.memoizedState.cache)}if(n=i.child,n!==null)n.return=i,ot=n;else e:for(i=e;ot!==null;){n=ot;var r=n.sibling,l=n.return;if(Mp(n),n===i){ot=null;break e}if(r!==null){r.return=l,ot=r;break e}ot=l}}}var gv={getCacheForType:function(e){var t=St(tt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i}},_v=typeof WeakMap=="function"?WeakMap:Map,Ae=0,Be=null,Re=null,xe=0,Pe=0,Vt=null,dn=!1,Nr=!1,Kl=!1,Ii=0,Ke=0,un=0,$n=0,Xl=0,Jt=0,Ur=0,Va=null,Pt=null,Fl=!1,Zl=0,Rc=1/0,Tc=null,fn=null,ht=0,pn=null,jr=null,zr=0,$l=0,Jl=null,Bp=null,Ga=0,Wl=null;function Gt(){if((Ae&2)!==0&&xe!==0)return xe&-xe;if(j.T!==null){var e=Cr;return e!==0?e:sd()}return On()}function qp(){Jt===0&&(Jt=(xe&536870912)===0||Oe?dr():536870912);var e=$t.current;return e!==null&&(e.flags|=32),Jt}function Yt(e,t,i){(e===Be&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)&&(Br(e,0),hn(e,xe,Jt,!1)),ni(e,i),((Ae&2)===0||e!==Be)&&(e===Be&&((Ae&2)===0&&($n|=i),Ke===4&&hn(e,xe,Jt,!1)),bi(e))}function Ip(e,t,i){if((Ae&6)!==0)throw Error(a(327));var n=!i&&(t&124)===0&&(t&e.expiredLanes)===0||ii(e,t),r=n?Sv(e,t):id(e,t,!0),l=n;do{if(r===0){Nr&&!n&&hn(e,t,0,!1);break}else{if(i=e.current.alternate,l&&!vv(i)){r=id(e,t,!1),l=!1;continue}if(r===2){if(l=t,e.errorRecoveryDisabledLanes&l)var D=0;else D=e.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){t=D;e:{var P=e;r=Va;var B=P.current.memoizedState.isDehydrated;if(B&&(Br(P,D).flags|=256),D=id(P,D,!1),D!==2){if(Kl&&!B){P.errorRecoveryDisabledLanes|=l,$n|=l,r=4;break e}l=Pt,Pt=r,l!==null&&(Pt===null?Pt=l:Pt.push.apply(Pt,l))}r=D}if(l=!1,r!==2)continue}}if(r===1){Br(e,0),hn(e,t,0,!0);break}e:{switch(n=e,l=r,l){case 0:case 1:throw Error(a(345));case 4:if((t&4194048)!==t)break;case 6:hn(n,t,Jt,!dn);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((t&62914560)===t&&(r=Zl+300-jt(),10<r)){if(hn(n,t,Jt,!dn),lr(n,0,!0)!==0)break e;n.timeoutHandle=gh(Hp.bind(null,n,i,Pt,Tc,Fl,t,Jt,$n,Ur,dn,l,2,-0,0),r);break e}Hp(n,i,Pt,Tc,Fl,t,Jt,$n,Ur,dn,l,0,-0,0)}}break}while(!0);bi(e)}function Hp(e,t,i,n,r,l,D,P,B,K,$,ee,X,F){if(e.timeoutHandle=-1,ee=t.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&($a={stylesheets:null,count:0,unsuspend:Wv},Np(t),ee=ty(),ee!==null)){e.cancelPendingCommit=ee(Fp.bind(null,e,t,l,i,n,r,D,P,B,$,1,X,F)),hn(e,l,D,!K);return}Fp(e,t,l,i,n,r,D,P,B)}function vv(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var n=0;n<i.length;n++){var r=i[n],l=r.getSnapshot;r=r.value;try{if(!Bt(l(),r))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hn(e,t,i,n){t&=~Xl,t&=~$n,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var r=t;0<r;){var l=31-_t(r),D=1<<l;n[l]=-1,r&=~D}i!==0&&ca(e,i,t)}function Cc(){return(Ae&6)===0?(Ya(0),!1):!0}function ed(){if(Re!==null){if(Pe===0)var e=Re.return;else e=Re,Ai=Yn=null,_l(e),Or=null,Na=0,e=Re;for(;e!==null;)bp(e.alternate,e),e=e.return;Re=null}}function Br(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Uv(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ed(),Be=e,Re=i=Li(e.current,null),xe=t,Pe=0,Vt=null,dn=!1,Nr=ii(e,t),Kl=!1,Ur=Jt=Xl=$n=un=Ke=0,Pt=Va=null,Fl=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var r=31-_t(n),l=1<<r;t|=e[r],n&=~l}return Ii=t,Ks(),i}function Vp(e,t){Se=null,j.H=fc,t===Ea||t===ic?(t=sf(),Pe=3):t===nf?(t=sf(),Pe=4):Pe=t===cp?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Vt=t,Re===null&&(Ke=1,_c(e,Kt(t,e.current)))}function Gp(){var e=j.H;return j.H=fc,e===null?fc:e}function Yp(){var e=j.A;return j.A=gv,e}function td(){Ke=4,dn||(xe&4194048)!==xe&&$t.current!==null||(Nr=!0),(un&134217727)===0&&($n&134217727)===0||Be===null||hn(Be,xe,Jt,!1)}function id(e,t,i){var n=Ae;Ae|=2;var r=Gp(),l=Yp();(Be!==e||xe!==t)&&(Tc=null,Br(e,t)),t=!1;var D=Ke;e:do try{if(Pe!==0&&Re!==null){var P=Re,B=Vt;switch(Pe){case 8:ed(),D=6;break e;case 3:case 2:case 9:case 6:$t.current===null&&(t=!0);var K=Pe;if(Pe=0,Vt=null,qr(e,P,B,K),i&&Nr){D=0;break e}break;default:K=Pe,Pe=0,Vt=null,qr(e,P,B,K)}}yv(),D=Ke;break}catch($){Vp(e,$)}while(!0);return t&&e.shellSuspendCounter++,Ai=Yn=null,Ae=n,j.H=r,j.A=l,Re===null&&(Be=null,xe=0,Ks()),D}function yv(){for(;Re!==null;)Qp(Re)}function Sv(e,t){var i=Ae;Ae|=2;var n=Gp(),r=Yp();Be!==e||xe!==t?(Tc=null,Rc=jt()+500,Br(e,t)):Nr=ii(e,t);e:do try{if(Pe!==0&&Re!==null){t=Re;var l=Vt;t:switch(Pe){case 1:Pe=0,Vt=null,qr(e,t,l,1);break;case 2:case 9:if(rf(l)){Pe=0,Vt=null,Kp(t);break}t=function(){Pe!==2&&Pe!==9||Be!==e||(Pe=7),bi(e)},l.then(t,t);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:rf(l)?(Pe=0,Vt=null,Kp(t)):(Pe=0,Vt=null,qr(e,t,l,7));break;case 5:var D=null;switch(Re.tag){case 26:D=Re.memoizedState;case 5:case 27:var P=Re;if(!D||xh(D)){Pe=0,Vt=null;var B=P.sibling;if(B!==null)Re=B;else{var K=P.return;K!==null?(Re=K,Ec(K)):Re=null}break t}}Pe=0,Vt=null,qr(e,t,l,5);break;case 6:Pe=0,Vt=null,qr(e,t,l,6);break;case 8:ed(),Ke=6;break e;default:throw Error(a(462))}}bv();break}catch($){Vp(e,$)}while(!0);return Ai=Yn=null,j.H=n,j.A=r,Ae=i,Re!==null?0:(Be=null,xe=0,Ks(),Ke)}function bv(){for(;Re!==null&&!Yi();)Qp(Re)}function Qp(e){var t=yp(e.alternate,e,Ii);e.memoizedProps=e.pendingProps,t===null?Ec(e):Re=t}function Kp(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=pp(i,t,t.pendingProps,t.type,void 0,xe);break;case 11:t=pp(i,t,t.pendingProps,t.type.render,t.ref,xe);break;case 5:_l(t);default:bp(i,t),t=Re=Ku(t,Ii),t=yp(i,t,Ii)}e.memoizedProps=e.pendingProps,t===null?Ec(e):Re=t}function qr(e,t,i,n){Ai=Yn=null,_l(t),Or=null,Na=0;var r=t.return;try{if(dv(e,r,t,i,xe)){Ke=1,_c(e,Kt(i,e.current)),Re=null;return}}catch(l){if(r!==null)throw Re=r,l;Ke=1,_c(e,Kt(i,e.current)),Re=null;return}t.flags&32768?(Oe||n===1?e=!0:Nr||(xe&536870912)!==0?e=!1:(dn=e=!0,(n===2||n===9||n===3||n===6)&&(n=$t.current,n!==null&&n.tag===13&&(n.flags|=16384))),Xp(t,e)):Ec(t)}function Ec(e){var t=e;do{if((t.flags&32768)!==0){Xp(t,dn);return}e=t.return;var i=fv(t.alternate,t,Ii);if(i!==null){Re=i;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);Ke===0&&(Ke=5)}function Xp(e,t){do{var i=pv(e.alternate,e);if(i!==null){i.flags&=32767,Re=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Re=e;return}Re=e=i}while(e!==null);Ke=6,Re=null}function Fp(e,t,i,n,r,l,D,P,B){e.cancelPendingCommit=null;do Dc();while(ht!==0);if((Ae&6)!==0)throw Error(a(327));if(t!==null){if(t===e.current)throw Error(a(177));if(l=t.lanes|t.childLanes,l|=Qo,sa(e,i,l,D,P,B),e===Be&&(Re=Be=null,xe=0),jr=t,pn=e,zr=i,$l=l,Jl=r,Bp=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Cv(En,function(){return eh(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=j.T,j.T=null,r=V.p,V.p=2,D=Ae,Ae|=4;try{hv(e,t,i)}finally{Ae=D,V.p=r,j.T=n}}ht=1,Zp(),$p(),Jp()}}function Zp(){if(ht===1){ht=0;var e=pn,t=jr,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=j.T,j.T=null;var n=V.p;V.p=2;var r=Ae;Ae|=4;try{kp(t,e);var l=hd,D=ju(e.containerInfo),P=l.focusedElem,B=l.selectionRange;if(D!==P&&P&&P.ownerDocument&&Uu(P.ownerDocument.documentElement,P)){if(B!==null&&Io(P)){var K=B.start,$=B.end;if($===void 0&&($=K),"selectionStart"in P)P.selectionStart=K,P.selectionEnd=Math.min($,P.value.length);else{var ee=P.ownerDocument||document,X=ee&&ee.defaultView||window;if(X.getSelection){var F=X.getSelection(),ge=P.textContent.length,pe=Math.min(B.start,ge),je=B.end===void 0?pe:Math.min(B.end,ge);!F.extend&&pe>je&&(D=je,je=pe,pe=D);var G=Nu(P,pe),H=Nu(P,je);if(G&&H&&(F.rangeCount!==1||F.anchorNode!==G.node||F.anchorOffset!==G.offset||F.focusNode!==H.node||F.focusOffset!==H.offset)){var Q=ee.createRange();Q.setStart(G.node,G.offset),F.removeAllRanges(),pe>je?(F.addRange(Q),F.extend(H.node,H.offset)):(Q.setEnd(H.node,H.offset),F.addRange(Q))}}}}for(ee=[],F=P;F=F.parentNode;)F.nodeType===1&&ee.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ee.length;P++){var J=ee[P];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Bc=!!pd,hd=pd=null}finally{Ae=r,V.p=n,j.T=i}}e.current=t,ht=2}}function $p(){if(ht===2){ht=0;var e=pn,t=jr,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=j.T,j.T=null;var n=V.p;V.p=2;var r=Ae;Ae|=4;try{xp(e,t.alternate,t)}finally{Ae=r,V.p=n,j.T=i}}ht=3}}function Jp(){if(ht===4||ht===3){ht=0,js();var e=pn,t=jr,i=zr,n=Bp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ht=5:(ht=0,jr=pn=null,Wp(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(fn=null),oa(i),t=t.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Qi,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=j.T,r=V.p,V.p=2,j.T=null;try{for(var l=e.onRecoverableError,D=0;D<n.length;D++){var P=n[D];l(P.value,{componentStack:P.stack})}}finally{j.T=t,V.p=r}}(zr&3)!==0&&Dc(),bi(e),r=e.pendingLanes,(i&4194090)!==0&&(r&42)!==0?e===Wl?Ga++:(Ga=0,Wl=e):Ga=0,Ya(0)}}function Wp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ta(t)))}function Dc(e){return Zp(),$p(),Jp(),eh()}function eh(){if(ht!==5)return!1;var e=pn,t=$l;$l=0;var i=oa(zr),n=j.T,r=V.p;try{V.p=32>i?32:i,j.T=null,i=Jl,Jl=null;var l=pn,D=zr;if(ht=0,jr=pn=null,zr=0,(Ae&6)!==0)throw Error(a(331));var P=Ae;if(Ae|=4,jp(l.current),Pp(l,l.current,D,i),Ae=P,Ya(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Qi,l)}catch{}return!0}finally{V.p=r,j.T=n,Wp(e,t)}}function th(e,t,i){t=Kt(i,t),t=Ol(e.stateNode,t,2),e=nn(e,t,2),e!==null&&(ni(e,2),bi(e))}function ze(e,t,i){if(e.tag===3)th(e,e,i);else for(;t!==null;){if(t.tag===3){th(t,e,i);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(fn===null||!fn.has(n))){e=Kt(i,e),i=ap(2),n=nn(t,i,2),n!==null&&(sp(i,n,t,e),ni(n,2),bi(n));break}}t=t.return}}function nd(e,t,i){var n=e.pingCache;if(n===null){n=e.pingCache=new _v;var r=new Set;n.set(t,r)}else r=n.get(t),r===void 0&&(r=new Set,n.set(t,r));r.has(i)||(Kl=!0,r.add(i),e=wv.bind(null,e,t,i),t.then(e,e))}function wv(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Be===e&&(xe&i)===i&&(Ke===4||Ke===3&&(xe&62914560)===xe&&300>jt()-Zl?(Ae&2)===0&&Br(e,0):Xl|=i,Ur===xe&&(Ur=0)),bi(e)}function ih(e,t){t===0&&(t=aa()),e=br(e,t),e!==null&&(ni(e,t),bi(e))}function Rv(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),ih(e,i)}function Tv(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;r!==null&&(i=r.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(a(314))}n!==null&&n.delete(t),ih(e,i)}function Cv(e,t){return sr(e,t)}var xc=null,Ir=null,rd=!1,Mc=!1,ad=!1,Jn=0;function bi(e){e!==Ir&&e.next===null&&(Ir===null?xc=Ir=e:Ir=Ir.next=e),Mc=!0,rd||(rd=!0,Dv())}function Ya(e,t){if(!ad&&Mc){ad=!0;do for(var i=!1,n=xc;n!==null;){if(e!==0){var r=n.pendingLanes;if(r===0)var l=0;else{var D=n.suspendedLanes,P=n.pingedLanes;l=(1<<31-_t(42|e)+1)-1,l&=r&~(D&~P),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(i=!0,sh(n,l))}else l=xe,l=lr(n,n===Be?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(l&3)===0||ii(n,l)||(i=!0,sh(n,l));n=n.next}while(i);ad=!1}}function Ev(){nh()}function nh(){Mc=rd=!1;var e=0;Jn!==0&&(Nv()&&(e=Jn),Jn=0);for(var t=jt(),i=null,n=xc;n!==null;){var r=n.next,l=rh(n,t);l===0?(n.next=null,i===null?xc=r:i.next=r,r===null&&(Ir=i)):(i=n,(e!==0||(l&3)!==0)&&(Mc=!0)),n=r}Ya(e)}function rh(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,l=e.pendingLanes&-62914561;0<l;){var D=31-_t(l),P=1<<D,B=r[D];B===-1?((P&i)===0||(P&n)!==0)&&(r[D]=Ln(P,t)):B<=t&&(e.expiredLanes|=P),l&=~P}if(t=Be,i=xe,i=lr(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,i===0||e===t&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Gi(n),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||ii(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(n!==null&&Gi(n),oa(i)){case 2:case 8:i=ea;break;case 32:i=En;break;case 268435456:i=or;break;default:i=En}return n=ah.bind(null,e),i=sr(i,n),e.callbackPriority=t,e.callbackNode=i,t}return n!==null&&n!==null&&Gi(n),e.callbackPriority=2,e.callbackNode=null,2}function ah(e,t){if(ht!==0&&ht!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Dc()&&e.callbackNode!==i)return null;var n=xe;return n=lr(e,e===Be?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Ip(e,n,t),rh(e,jt()),e.callbackNode!=null&&e.callbackNode===i?ah.bind(null,e):null)}function sh(e,t){if(Dc())return null;Ip(e,t,!0)}function Dv(){jv(function(){(Ae&6)!==0?sr(Wr,Ev):nh()})}function sd(){return Jn===0&&(Jn=dr()),Jn}function ch(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:qs(""+e)}function oh(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function xv(e,t,i,n,r){if(t==="submit"&&i&&i.stateNode===r){var l=ch((r[rt]||null).action),D=n.submitter;D&&(t=(t=D[rt]||null)?ch(t.formAction):D.getAttribute("formAction"),t!==null&&(l=t,D=null));var P=new Gs("action","action",null,n,r);e.push({event:P,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Jn!==0){var B=D?oh(r,D):new FormData(r);El(i,{pending:!0,data:B,method:r.method,action:l},null,B)}}else typeof l=="function"&&(P.preventDefault(),B=D?oh(r,D):new FormData(r),El(i,{pending:!0,data:B,method:r.method,action:l},l,B))},currentTarget:r}]})}}for(var cd=0;cd<Yo.length;cd++){var od=Yo[cd],Mv=od.toLowerCase(),Lv=od[0].toUpperCase()+od.slice(1);oi(Mv,"on"+Lv)}oi(qu,"onAnimationEnd"),oi(Iu,"onAnimationIteration"),oi(Hu,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(K_,"onTransitionRun"),oi(X_,"onTransitionStart"),oi(F_,"onTransitionCancel"),oi(Vu,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ov=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qa));function lh(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var n=e[i],r=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var D=n.length-1;0<=D;D--){var P=n[D],B=P.instance,K=P.currentTarget;if(P=P.listener,B!==l&&r.isPropagationStopped())break e;l=P,r.currentTarget=K;try{l(r)}catch($){gc($)}r.currentTarget=null,l=B}else for(D=0;D<n.length;D++){if(P=n[D],B=P.instance,K=P.currentTarget,P=P.listener,B!==l&&r.isPropagationStopped())break e;l=P,r.currentTarget=K;try{l(r)}catch($){gc($)}r.currentTarget=null,l=B}}}}function Te(e,t){var i=t[kn];i===void 0&&(i=t[kn]=new Set);var n=e+"__bubble";i.has(n)||(dh(t,e,2,!1),i.add(n))}function ld(e,t,i){var n=0;t&&(n|=4),dh(i,e,n,t)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function dd(e){if(!e[Lc]){e[Lc]=!0,zs.forEach(function(i){i!=="selectionchange"&&(Ov.has(i)||ld(i,!1,e),ld(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lc]||(t[Lc]=!0,ld("selectionchange",!1,t))}}function dh(e,t,i,n){switch(Ph(t)){case 2:var r=ry;break;case 8:r=ay;break;default:r=Td}i=r.bind(null,t,i,e),r=void 0,!ko||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),n?r!==void 0?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):r!==void 0?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function ud(e,t,i,n,r){var l=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var D=n.tag;if(D===3||D===4){var P=n.stateNode.containerInfo;if(P===r)break;if(D===4)for(D=n.return;D!==null;){var B=D.tag;if((B===3||B===4)&&D.stateNode.containerInfo===r)return;D=D.return}for(;P!==null;){if(D=Ct(P),D===null)return;if(B=D.tag,B===5||B===6||B===26||B===27){n=l=D;continue e}P=P.parentNode}}n=n.return}gu(function(){var K=l,$=Lo(i),ee=[];e:{var X=Gu.get(e);if(X!==void 0){var F=Gs,ge=e;switch(e){case"keypress":if(Hs(i)===0)break e;case"keydown":case"keyup":F=C_;break;case"focusin":ge="focus",F=Uo;break;case"focusout":ge="blur",F=Uo;break;case"beforeblur":case"afterblur":F=Uo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=p_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=x_;break;case qu:case Iu:case Hu:F=g_;break;case Vu:F=L_;break;case"scroll":case"scrollend":F=u_;break;case"wheel":F=k_;break;case"copy":case"cut":case"paste":F=v_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=bu;break;case"toggle":case"beforetoggle":F=P_}var pe=(t&4)!==0,je=!pe&&(e==="scroll"||e==="scrollend"),G=pe?X!==null?X+"Capture":null:X;pe=[];for(var H=K,Q;H!==null;){var J=H;if(Q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||Q===null||G===null||(J=ua(H,G),J!=null&&pe.push(Ka(H,J,Q))),je)break;H=H.return}0<pe.length&&(X=new F(X,ge,null,i,$),ee.push({event:X,listeners:pe}))}}if((t&7)===0){e:{if(X=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",X&&i!==Mo&&(ge=i.relatedTarget||i.fromElement)&&(Ct(ge)||ge[yt]))break e;if((F||X)&&(X=$.window===$?$:(X=$.ownerDocument)?X.defaultView||X.parentWindow:window,F?(ge=i.relatedTarget||i.toElement,F=K,ge=ge?Ct(ge):null,ge!==null&&(je=T(ge),pe=ge.tag,ge!==je||pe!==5&&pe!==27&&pe!==6)&&(ge=null)):(F=null,ge=K),F!==ge)){if(pe=yu,J="onMouseLeave",G="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(pe=bu,J="onPointerLeave",G="onPointerEnter",H="pointer"),je=F==null?X:Fi(F),Q=ge==null?X:Fi(ge),X=new pe(J,H+"leave",F,i,$),X.target=je,X.relatedTarget=Q,J=null,Ct($)===K&&(pe=new pe(G,H+"enter",ge,i,$),pe.target=Q,pe.relatedTarget=je,J=pe),je=J,F&&ge)t:{for(pe=F,G=ge,H=0,Q=pe;Q;Q=Hr(Q))H++;for(Q=0,J=G;J;J=Hr(J))Q++;for(;0<H-Q;)pe=Hr(pe),H--;for(;0<Q-H;)G=Hr(G),Q--;for(;H--;){if(pe===G||G!==null&&pe===G.alternate)break t;pe=Hr(pe),G=Hr(G)}pe=null}else pe=null;F!==null&&uh(ee,X,F,pe,!1),ge!==null&&je!==null&&uh(ee,je,ge,pe,!0)}}e:{if(X=K?Fi(K):window,F=X.nodeName&&X.nodeName.toLowerCase(),F==="select"||F==="input"&&X.type==="file")var oe=Mu;else if(Du(X))if(Lu)oe=G_;else{oe=H_;var we=I_}else F=X.nodeName,!F||F.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&xo(K.elementType)&&(oe=Mu):oe=V_;if(oe&&(oe=oe(e,K))){xu(ee,oe,i,$);break e}we&&we(e,X,K),e==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&Do(X,"number",X.value)}switch(we=K?Fi(K):window,e){case"focusin":(Du(we)||we.contentEditable==="true")&&(vr=we,Ho=K,ya=null);break;case"focusout":ya=Ho=vr=null;break;case"mousedown":Vo=!0;break;case"contextmenu":case"mouseup":case"dragend":Vo=!1,zu(ee,i,$);break;case"selectionchange":if(Q_)break;case"keydown":case"keyup":zu(ee,i,$)}var ue;if(zo)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else _r?Cu(e,i)&&(he="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(he="onCompositionStart");he&&(wu&&i.locale!=="ko"&&(_r||he!=="onCompositionStart"?he==="onCompositionEnd"&&_r&&(ue=_u()):(Ji=$,Ao="value"in Ji?Ji.value:Ji.textContent,_r=!0)),we=Oc(K,he),0<we.length&&(he=new Su(he,e,null,i,$),ee.push({event:he,listeners:we}),ue?he.data=ue:(ue=Eu(i),ue!==null&&(he.data=ue)))),(ue=U_?j_(e,i):z_(e,i))&&(he=Oc(K,"onBeforeInput"),0<he.length&&(we=new Su("onBeforeInput","beforeinput",null,i,$),ee.push({event:we,listeners:he}),we.data=ue)),xv(ee,e,K,i,$)}lh(ee,t)})}function Ka(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Oc(e,t){for(var i=t+"Capture",n=[];e!==null;){var r=e,l=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||l===null||(r=ua(e,i),r!=null&&n.unshift(Ka(e,r,l)),r=ua(e,t),r!=null&&n.push(Ka(e,r,l))),e.tag===3)return n;e=e.return}return[]}function Hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function uh(e,t,i,n,r){for(var l=t._reactName,D=[];i!==null&&i!==n;){var P=i,B=P.alternate,K=P.stateNode;if(P=P.tag,B!==null&&B===n)break;P!==5&&P!==26&&P!==27||K===null||(B=K,r?(K=ua(i,l),K!=null&&D.unshift(Ka(i,K,B))):r||(K=ua(i,l),K!=null&&D.push(Ka(i,K,B)))),i=i.return}D.length!==0&&e.push({event:t,listeners:D})}var kv=/\r\n?/g,Av=/\u0000|\uFFFD/g;function fh(e){return(typeof e=="string"?e:""+e).replace(kv,`
`).replace(Av,"")}function ph(e,t){return t=fh(t),fh(e)===t}function kc(){}function Ue(e,t,i,n,r,l){switch(i){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||hr(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&hr(e,""+n);break;case"className":Ce(e,"class",n);break;case"tabIndex":Ce(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Ce(e,i,n);break;case"style":hu(e,n,l);break;case"data":if(t!=="object"){Ce(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=qs(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof l=="function"&&(i==="formAction"?(t!=="input"&&Ue(e,t,"name",r.name,r,null),Ue(e,t,"formEncType",r.formEncType,r,null),Ue(e,t,"formMethod",r.formMethod,r,null),Ue(e,t,"formTarget",r.formTarget,r,null)):(Ue(e,t,"encType",r.encType,r,null),Ue(e,t,"method",r.method,r,null),Ue(e,t,"target",r.target,r,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=qs(""+n),e.setAttribute(i,n);break;case"onClick":n!=null&&(e.onclick=kc);break;case"onScroll":n!=null&&Te("scroll",e);break;case"onScrollEnd":n!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(a(61));if(i=n.__html,i!=null){if(r.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}i=qs(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":n===!0?e.setAttribute(i,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":Te("beforetoggle",e),Te("toggle",e),ae(e,"popover",n);break;case"xlinkActuate":de(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":de(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":de(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":de(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":de(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":de(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":de(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":de(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":de(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ae(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=l_.get(i)||i,ae(e,i,n))}}function fd(e,t,i,n,r,l){switch(i){case"style":hu(e,n,l);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(a(61));if(i=n.__html,i!=null){if(r.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"children":typeof n=="string"?hr(e,n):(typeof n=="number"||typeof n=="bigint")&&hr(e,""+n);break;case"onScroll":n!=null&&Te("scroll",e);break;case"onScrollEnd":n!=null&&Te("scrollend",e);break;case"onClick":n!=null&&(e.onclick=kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!da.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(r=i.endsWith("Capture"),t=i.slice(2,r?i.length-7:void 0),l=e[rt]||null,l=l!=null?l[i]:null,typeof l=="function"&&e.removeEventListener(t,l,r),typeof n=="function")){typeof l!="function"&&l!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,r);break e}i in e?e[i]=n:n===!0?e.setAttribute(i,""):ae(e,i,n)}}}function mt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var n=!1,r=!1,l;for(l in i)if(i.hasOwnProperty(l)){var D=i[l];if(D!=null)switch(l){case"src":n=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ue(e,t,l,D,i,null)}}r&&Ue(e,t,"srcSet",i.srcSet,i,null),n&&Ue(e,t,"src",i.src,i,null);return;case"input":Te("invalid",e);var P=l=D=r=null,B=null,K=null;for(n in i)if(i.hasOwnProperty(n)){var $=i[n];if($!=null)switch(n){case"name":r=$;break;case"type":D=$;break;case"checked":B=$;break;case"defaultChecked":K=$;break;case"value":l=$;break;case"defaultValue":P=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(a(137,t));break;default:Ue(e,t,n,$,i,null)}}du(e,l,P,B,K,D,r,!1),$i(e);return;case"select":Te("invalid",e),n=D=l=null;for(r in i)if(i.hasOwnProperty(r)&&(P=i[r],P!=null))switch(r){case"value":l=P;break;case"defaultValue":D=P;break;case"multiple":n=P;default:Ue(e,t,r,P,i,null)}t=l,i=D,e.multiple=!!n,t!=null?pr(e,!!n,t,!1):i!=null&&pr(e,!!n,i,!0);return;case"textarea":Te("invalid",e),l=r=n=null;for(D in i)if(i.hasOwnProperty(D)&&(P=i[D],P!=null))switch(D){case"value":n=P;break;case"defaultValue":r=P;break;case"children":l=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(91));break;default:Ue(e,t,D,P,i,null)}fu(e,n,r,l),$i(e);return;case"option":for(B in i)if(i.hasOwnProperty(B)&&(n=i[B],n!=null))switch(B){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Ue(e,t,B,n,i,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(n=0;n<Qa.length;n++)Te(Qa[n],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in i)if(i.hasOwnProperty(K)&&(n=i[K],n!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ue(e,t,K,n,i,null)}return;default:if(xo(t)){for($ in i)i.hasOwnProperty($)&&(n=i[$],n!==void 0&&fd(e,t,$,n,i,void 0));return}}for(P in i)i.hasOwnProperty(P)&&(n=i[P],n!=null&&Ue(e,t,P,n,i,null))}function Pv(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,l=null,D=null,P=null,B=null,K=null,$=null;for(F in i){var ee=i[F];if(i.hasOwnProperty(F)&&ee!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":B=ee;default:n.hasOwnProperty(F)||Ue(e,t,F,null,n,ee)}}for(var X in n){var F=n[X];if(ee=i[X],n.hasOwnProperty(X)&&(F!=null||ee!=null))switch(X){case"type":l=F;break;case"name":r=F;break;case"checked":K=F;break;case"defaultChecked":$=F;break;case"value":D=F;break;case"defaultValue":P=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(a(137,t));break;default:F!==ee&&Ue(e,t,X,F,n,ee)}}Eo(e,D,P,B,K,$,l,r);return;case"select":F=D=P=X=null;for(l in i)if(B=i[l],i.hasOwnProperty(l)&&B!=null)switch(l){case"value":break;case"multiple":F=B;default:n.hasOwnProperty(l)||Ue(e,t,l,null,n,B)}for(r in n)if(l=n[r],B=i[r],n.hasOwnProperty(r)&&(l!=null||B!=null))switch(r){case"value":X=l;break;case"defaultValue":P=l;break;case"multiple":D=l;default:l!==B&&Ue(e,t,r,l,n,B)}t=P,i=D,n=F,X!=null?pr(e,!!i,X,!1):!!n!=!!i&&(t!=null?pr(e,!!i,t,!0):pr(e,!!i,i?[]:"",!1));return;case"textarea":F=X=null;for(P in i)if(r=i[P],i.hasOwnProperty(P)&&r!=null&&!n.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Ue(e,t,P,null,n,r)}for(D in n)if(r=n[D],l=i[D],n.hasOwnProperty(D)&&(r!=null||l!=null))switch(D){case"value":X=r;break;case"defaultValue":F=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(a(91));break;default:r!==l&&Ue(e,t,D,r,n,l)}uu(e,X,F);return;case"option":for(var ge in i)if(X=i[ge],i.hasOwnProperty(ge)&&X!=null&&!n.hasOwnProperty(ge))switch(ge){case"selected":e.selected=!1;break;default:Ue(e,t,ge,null,n,X)}for(B in n)if(X=n[B],F=i[B],n.hasOwnProperty(B)&&X!==F&&(X!=null||F!=null))switch(B){case"selected":e.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Ue(e,t,B,X,n,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in i)X=i[pe],i.hasOwnProperty(pe)&&X!=null&&!n.hasOwnProperty(pe)&&Ue(e,t,pe,null,n,X);for(K in n)if(X=n[K],F=i[K],n.hasOwnProperty(K)&&X!==F&&(X!=null||F!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,t));break;default:Ue(e,t,K,X,n,F)}return;default:if(xo(t)){for(var je in i)X=i[je],i.hasOwnProperty(je)&&X!==void 0&&!n.hasOwnProperty(je)&&fd(e,t,je,void 0,n,X);for($ in n)X=n[$],F=i[$],!n.hasOwnProperty($)||X===F||X===void 0&&F===void 0||fd(e,t,$,X,n,F);return}}for(var G in i)X=i[G],i.hasOwnProperty(G)&&X!=null&&!n.hasOwnProperty(G)&&Ue(e,t,G,null,n,X);for(ee in n)X=n[ee],F=i[ee],!n.hasOwnProperty(ee)||X===F||X==null&&F==null||Ue(e,t,ee,X,n,F)}var pd=null,hd=null;function Ac(e){return e.nodeType===9?e:e.ownerDocument}function hh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function md(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gd=null;function Nv(){var e=window.event;return e&&e.type==="popstate"?e===gd?!1:(gd=e,!0):(gd=null,!1)}var gh=typeof setTimeout=="function"?setTimeout:void 0,Uv=typeof clearTimeout=="function"?clearTimeout:void 0,_h=typeof Promise=="function"?Promise:void 0,jv=typeof queueMicrotask=="function"?queueMicrotask:typeof _h<"u"?function(e){return _h.resolve(null).then(e).catch(zv)}:gh;function zv(e){setTimeout(function(){throw e})}function mn(e){return e==="head"}function vh(e,t){var i=t,n=0,r=0;do{var l=i.nextSibling;if(e.removeChild(i),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(0<n&&8>n){i=n;var D=e.ownerDocument;if(i&1&&Xa(D.documentElement),i&2&&Xa(D.body),i&4)for(i=D.head,Xa(i),D=i.firstChild;D;){var P=D.nextSibling,B=D.nodeName;D[ai]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&D.rel.toLowerCase()==="stylesheet"||i.removeChild(D),D=P}}if(r===0){e.removeChild(l),is(t);return}r--}else i==="$"||i==="$?"||i==="$!"?r++:n=i.charCodeAt(0)-48;else n=0;i=l}while(i);is(t)}function _d(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":_d(i),An(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Bv(e,t,i,n){for(;e.nodeType===1;){var r=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[ai])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(l=e.getAttribute("rel"),l==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(l!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(l=e.getAttribute("src"),(l!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var l=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===l)return e}else return e;if(e=di(e.nextSibling),e===null)break}return null}function qv(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=di(e.nextSibling),e===null))return null;return e}function vd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Iv(e,t){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")t();else{var n=function(){t(),i.removeEventListener("DOMContentLoaded",n)};i.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function di(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var yd=null;function yh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}function Sh(e,t,i){switch(t=Ac(i),e){case"html":if(e=t.documentElement,!e)throw Error(a(452));return e;case"head":if(e=t.head,!e)throw Error(a(453));return e;case"body":if(e=t.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Xa(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);An(e)}var Wt=new Map,bh=new Set;function Pc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hi=V.d;V.d={f:Hv,r:Vv,D:Gv,C:Yv,L:Qv,m:Kv,X:Fv,S:Xv,M:Zv};function Hv(){var e=Hi.f(),t=Cc();return e||t}function Vv(e){var t=Di(e);t!==null&&t.tag===5&&t.type==="form"?If(t):Hi.r(e)}var Vr=typeof document>"u"?null:document;function wh(e,t,i){var n=Vr;if(n&&typeof t=="string"&&t){var r=Lt(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof i=="string"&&(r+='[crossorigin="'+i+'"]'),bh.has(r)||(bh.add(r),e={rel:e,crossOrigin:i,href:t},n.querySelector(r)===null&&(t=n.createElement("link"),mt(t,"link",e),Ge(t),n.head.appendChild(t)))}}function Gv(e){Hi.D(e),wh("dns-prefetch",e,null)}function Yv(e,t){Hi.C(e,t),wh("preconnect",e,t)}function Qv(e,t,i){Hi.L(e,t,i);var n=Vr;if(n&&e&&t){var r='link[rel="preload"][as="'+Lt(t)+'"]';t==="image"&&i&&i.imageSrcSet?(r+='[imagesrcset="'+Lt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(r+='[imagesizes="'+Lt(i.imageSizes)+'"]')):r+='[href="'+Lt(e)+'"]';var l=r;switch(t){case"style":l=Gr(e);break;case"script":l=Yr(e)}Wt.has(l)||(e=x({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Wt.set(l,e),n.querySelector(r)!==null||t==="style"&&n.querySelector(Fa(l))||t==="script"&&n.querySelector(Za(l))||(t=n.createElement("link"),mt(t,"link",e),Ge(t),n.head.appendChild(t)))}}function Kv(e,t){Hi.m(e,t);var i=Vr;if(i&&e){var n=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Lt(n)+'"][href="'+Lt(e)+'"]',l=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Yr(e)}if(!Wt.has(l)&&(e=x({rel:"modulepreload",href:e},t),Wt.set(l,e),i.querySelector(r)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Za(l)))return}n=i.createElement("link"),mt(n,"link",e),Ge(n),i.head.appendChild(n)}}}function Xv(e,t,i){Hi.S(e,t,i);var n=Vr;if(n&&e){var r=xi(n).hoistableStyles,l=Gr(e);t=t||"default";var D=r.get(l);if(!D){var P={loading:0,preload:null};if(D=n.querySelector(Fa(l)))P.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Wt.get(l))&&Sd(e,i);var B=D=n.createElement("link");Ge(B),mt(B,"link",e),B._p=new Promise(function(K,$){B.onload=K,B.onerror=$}),B.addEventListener("load",function(){P.loading|=1}),B.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Nc(D,t,n)}D={type:"stylesheet",instance:D,count:1,state:P},r.set(l,D)}}}function Fv(e,t){Hi.X(e,t);var i=Vr;if(i&&e){var n=xi(i).hoistableScripts,r=Yr(e),l=n.get(r);l||(l=i.querySelector(Za(r)),l||(e=x({src:e,async:!0},t),(t=Wt.get(r))&&bd(e,t),l=i.createElement("script"),Ge(l),mt(l,"link",e),i.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},n.set(r,l))}}function Zv(e,t){Hi.M(e,t);var i=Vr;if(i&&e){var n=xi(i).hoistableScripts,r=Yr(e),l=n.get(r);l||(l=i.querySelector(Za(r)),l||(e=x({src:e,async:!0,type:"module"},t),(t=Wt.get(r))&&bd(e,t),l=i.createElement("script"),Ge(l),mt(l,"link",e),i.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},n.set(r,l))}}function Rh(e,t,i,n){var r=(r=me.current)?Pc(r):null;if(!r)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Gr(i.href),i=xi(r).hoistableStyles,n=i.get(t),n||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Gr(i.href);var l=xi(r).hoistableStyles,D=l.get(e);if(D||(r=r.ownerDocument||r,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},l.set(e,D),(l=r.querySelector(Fa(e)))&&!l._p&&(D.instance=l,D.state.loading=5),Wt.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Wt.set(e,i),l||$v(r,e,i,D.state))),t&&n===null)throw Error(a(528,""));return D}if(t&&n!==null)throw Error(a(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Yr(i),i=xi(r).hoistableScripts,n=i.get(t),n||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Gr(e){return'href="'+Lt(e)+'"'}function Fa(e){return'link[rel="stylesheet"]['+e+"]"}function Th(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function $v(e,t,i,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),mt(t,"link",i),Ge(t),e.head.appendChild(t))}function Yr(e){return'[src="'+Lt(e)+'"]'}function Za(e){return"script[async]"+e}function Ch(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Lt(i.href)+'"]');if(n)return t.instance=n,Ge(n),n;var r=x({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Ge(n),mt(n,"style",r),Nc(n,i.precedence,e),t.instance=n;case"stylesheet":r=Gr(i.href);var l=e.querySelector(Fa(r));if(l)return t.state.loading|=4,t.instance=l,Ge(l),l;n=Th(i),(r=Wt.get(r))&&Sd(n,r),l=(e.ownerDocument||e).createElement("link"),Ge(l);var D=l;return D._p=new Promise(function(P,B){D.onload=P,D.onerror=B}),mt(l,"link",n),t.state.loading|=4,Nc(l,i.precedence,e),t.instance=l;case"script":return l=Yr(i.src),(r=e.querySelector(Za(l)))?(t.instance=r,Ge(r),r):(n=i,(r=Wt.get(l))&&(n=x({},i),bd(n,r)),e=e.ownerDocument||e,r=e.createElement("script"),Ge(r),mt(r,"link",n),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(a(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Nc(n,i.precedence,e));return t.instance}function Nc(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=n.length?n[n.length-1]:null,l=r,D=0;D<n.length;D++){var P=n[D];if(P.dataset.precedence===t)l=P;else if(l!==r)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function bd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Uc=null;function Eh(e,t,i){if(Uc===null){var n=new Map,r=Uc=new Map;r.set(i,n)}else r=Uc,n=r.get(i),n||(n=new Map,r.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),r=0;r<i.length;r++){var l=i[r];if(!(l[ai]||l[Ve]||e==="link"&&l.getAttribute("rel")==="stylesheet")&&l.namespaceURI!=="http://www.w3.org/2000/svg"){var D=l.getAttribute(t)||"";D=e+D;var P=n.get(D);P?P.push(l):n.set(D,[l])}}return n}function Dh(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Jv(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function xh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var $a=null;function Wv(){}function ey(e,t,i){if($a===null)throw Error(a(475));var n=$a;if(t.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var r=Gr(i.href),l=e.querySelector(Fa(r));if(l){e=l._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=jc.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=l,Ge(l);return}l=e.ownerDocument||e,i=Th(i),(r=Wt.get(r))&&Sd(i,r),l=l.createElement("link"),Ge(l);var D=l;D._p=new Promise(function(P,B){D.onload=P,D.onerror=B}),mt(l,"link",i),t.instance=l}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(n.count++,t=jc.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function ty(){if($a===null)throw Error(a(475));var e=$a;return e.stylesheets&&e.count===0&&wd(e,e.stylesheets),0<e.count?function(t){var i=setTimeout(function(){if(e.stylesheets&&wd(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}function jc(){if(this.count--,this.count===0){if(this.stylesheets)wd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var zc=null;function wd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,zc=new Map,t.forEach(iy,e),zc=null,jc.call(e))}function iy(e,t){if(!(t.state.loading&4)){var i=zc.get(e);if(i)var n=i.get(null);else{i=new Map,zc.set(e,i);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<r.length;l++){var D=r[l];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(i.set(D.dataset.precedence,D),n=D)}n&&i.set(null,n)}r=t.instance,D=r.getAttribute("data-precedence"),l=i.get(D)||n,l===n&&i.set(null,r),i.set(D,r),this.count++,n=jc.bind(this),r.addEventListener("load",n),r.addEventListener("error",n),l?l.parentNode.insertBefore(r,l.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Ja={$$typeof:u,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function ny(e,t,i,n,r,l,D,P){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=n,this.onUncaughtError=r,this.onCaughtError=l,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Mh(e,t,i,n,r,l,D,P,B,K,$,ee){return e=new ny(e,t,i,D,P,B,K,ee),t=1,l===!0&&(t|=24),l=qt(3,null,null,t),e.current=l,l.stateNode=e,t=nl(),t.refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:n,isDehydrated:i,cache:t},cl(l),e}function Lh(e){return e?(e=wr,e):wr}function Oh(e,t,i,n,r,l){r=Lh(r),n.context===null?n.context=r:n.pendingContext=r,n=tn(t),n.payload={element:i},l=l===void 0?null:l,l!==null&&(n.callback=l),i=nn(e,n,t),i!==null&&(Yt(i,e,t),xa(i,e,t))}function kh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Rd(e,t){kh(e,t),(e=e.alternate)&&kh(e,t)}function Ah(e){if(e.tag===13){var t=br(e,67108864);t!==null&&Yt(t,e,67108864),Rd(e,67108864)}}var Bc=!0;function ry(e,t,i,n){var r=j.T;j.T=null;var l=V.p;try{V.p=2,Td(e,t,i,n)}finally{V.p=l,j.T=r}}function ay(e,t,i,n){var r=j.T;j.T=null;var l=V.p;try{V.p=8,Td(e,t,i,n)}finally{V.p=l,j.T=r}}function Td(e,t,i,n){if(Bc){var r=Cd(n);if(r===null)ud(e,t,n,qc,i),Nh(e,n);else if(cy(r,e,t,i,n))n.stopPropagation();else if(Nh(e,n),t&4&&-1<sy.indexOf(e)){for(;r!==null;){var l=Di(r);if(l!==null)switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var D=vt(l.pendingLanes);if(D!==0){var P=l;for(P.pendingLanes|=2,P.entangledLanes|=2;D;){var B=1<<31-_t(D);P.entanglements[1]|=B,D&=~B}bi(l),(Ae&6)===0&&(Rc=jt()+500,Ya(0))}}break;case 13:P=br(l,2),P!==null&&Yt(P,l,2),Cc(),Rd(l,2)}if(l=Cd(n),l===null&&ud(e,t,n,qc,i),l===r)break;r=l}r!==null&&n.stopPropagation()}else ud(e,t,n,null,i)}}function Cd(e){return e=Lo(e),Ed(e)}var qc=null;function Ed(e){if(qc=null,e=Ct(e),e!==null){var t=T(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=b(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return qc=e,null}function Ph(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ei()){case Wr:return 2;case ea:return 8;case En:case cr:return 32;case or:return 268435456;default:return 32}default:return 32}}var Dd=!1,gn=null,_n=null,vn=null,Wa=new Map,es=new Map,yn=[],sy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nh(e,t){switch(e){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":Wa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(t.pointerId)}}function ts(e,t,i,n,r,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:l,targetContainers:[r]},t!==null&&(t=Di(t),t!==null&&Ah(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function cy(e,t,i,n,r){switch(t){case"focusin":return gn=ts(gn,e,t,i,n,r),!0;case"dragenter":return _n=ts(_n,e,t,i,n,r),!0;case"mouseover":return vn=ts(vn,e,t,i,n,r),!0;case"pointerover":var l=r.pointerId;return Wa.set(l,ts(Wa.get(l)||null,e,t,i,n,r)),!0;case"gotpointercapture":return l=r.pointerId,es.set(l,ts(es.get(l)||null,e,t,i,n,r)),!0}return!1}function Uh(e){var t=Ct(e.target);if(t!==null){var i=T(t);if(i!==null){if(t=i.tag,t===13){if(t=b(i),t!==null){e.blockedOn=t,la(e.priority,function(){if(i.tag===13){var n=Gt();n=Qt(n);var r=br(i,n);r!==null&&Yt(r,i,n),Rd(i,n)}});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ic(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Cd(e.nativeEvent);if(i===null){i=e.nativeEvent;var n=new i.constructor(i.type,i);Mo=n,i.target.dispatchEvent(n),Mo=null}else return t=Di(i),t!==null&&Ah(t),e.blockedOn=i,!1;t.shift()}return!0}function jh(e,t,i){Ic(e)&&i.delete(t)}function oy(){Dd=!1,gn!==null&&Ic(gn)&&(gn=null),_n!==null&&Ic(_n)&&(_n=null),vn!==null&&Ic(vn)&&(vn=null),Wa.forEach(jh),es.forEach(jh)}function Hc(e,t){e.blockedOn===t&&(e.blockedOn=null,Dd||(Dd=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,oy)))}var Vc=null;function zh(e){Vc!==e&&(Vc=e,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){Vc===e&&(Vc=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],r=e[t+2];if(typeof n!="function"){if(Ed(n||i)===null)continue;break}var l=Di(i);l!==null&&(e.splice(t,3),t-=3,El(l,{pending:!0,data:r,method:i.method,action:n},n,r))}}))}function is(e){function t(B){return Hc(B,e)}gn!==null&&Hc(gn,e),_n!==null&&Hc(_n,e),vn!==null&&Hc(vn,e),Wa.forEach(t),es.forEach(t);for(var i=0;i<yn.length;i++){var n=yn[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<yn.length&&(i=yn[0],i.blockedOn===null);)Uh(i),i.blockedOn===null&&yn.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(n=0;n<i.length;n+=3){var r=i[n],l=i[n+1],D=r[rt]||null;if(typeof l=="function")D||zh(i);else if(D){var P=null;if(l&&l.hasAttribute("formAction")){if(r=l,D=l[rt]||null)P=D.formAction;else if(Ed(r)!==null)continue}else P=D.action;typeof P=="function"?i[n+1]=P:(i.splice(n,3),n-=3),zh(i)}}}function xd(e){this._internalRoot=e}Gc.prototype.render=xd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));var i=t.current,n=Gt();Oh(i,n,e,t,null,null)},Gc.prototype.unmount=xd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Oh(e.current,2,null,e,null,null),Cc(),t[yt]=null}};function Gc(e){this._internalRoot=e}Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=On();e={blockedOn:null,target:e,priority:t};for(var i=0;i<yn.length&&t!==0&&t<yn[i].priority;i++);yn.splice(i,0,e),i===0&&Uh(e)}};var Bh=s.version;if(Bh!=="19.1.0")throw Error(a(527,Bh,"19.1.0"));V.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=M(t),e=e!==null?R(e):null,e=e===null?null:e.stateNode,e};var ly={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{Qi=Yc.inject(ly),ut=Yc}catch{}}return rs.createRoot=function(e,t){if(!w(e))throw Error(a(299));var i=!1,n="",r=tp,l=ip,D=np,P=null;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(l=t.onCaughtError),t.onRecoverableError!==void 0&&(D=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(P=t.unstable_transitionCallbacks)),t=Mh(e,1,!1,null,null,i,n,r,l,D,P,null),e[yt]=t.current,dd(e),new xd(t)},rs.hydrateRoot=function(e,t,i){if(!w(e))throw Error(a(299));var n=!1,r="",l=tp,D=ip,P=np,B=null,K=null;return i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onUncaughtError!==void 0&&(l=i.onUncaughtError),i.onCaughtError!==void 0&&(D=i.onCaughtError),i.onRecoverableError!==void 0&&(P=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(B=i.unstable_transitionCallbacks),i.formState!==void 0&&(K=i.formState)),t=Mh(e,1,!0,t,i??null,n,r,l,D,P,B,K),t.context=Lh(null),i=t.current,n=Gt(),n=Qt(n),r=tn(n),r.callback=null,nn(i,r,n),i=n,t.current.lanes=i,ni(t,i),bi(t),e[yt]=t.current,dd(e),new Gc(t)},rs.version="19.1.0",rs}var $h;function by(){if($h)return Od.exports;$h=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(s){console.error(s)}}return d(),Od.exports=Sy(),Od.exports}var wy=by();const Ci=Object.create(null);Ci.open="0";Ci.close="1";Ci.ping="2";Ci.pong="3";Ci.message="4";Ci.upgrade="5";Ci.noop="6";const ho=Object.create(null);Object.keys(Ci).forEach(d=>{ho[Ci[d]]=d});const Zd={type:"error",data:"parser error"},Eg=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Dg=typeof ArrayBuffer=="function",xg=d=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(d):d&&d.buffer instanceof ArrayBuffer,nu=({type:d,data:s},o,a)=>Eg&&s instanceof Blob?o?a(s):Jh(s,a):Dg&&(s instanceof ArrayBuffer||xg(s))?o?a(s):Jh(new Blob([s]),a):a(Ci[d]+(s||"")),Jh=(d,s)=>{const o=new FileReader;return o.onload=function(){const a=o.result.split(",")[1];s("b"+(a||""))},o.readAsDataURL(d)};function Wh(d){return d instanceof Uint8Array?d:d instanceof ArrayBuffer?new Uint8Array(d):new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}let Nd;function Ry(d,s){if(Eg&&d.data instanceof Blob)return d.data.arrayBuffer().then(Wh).then(s);if(Dg&&(d.data instanceof ArrayBuffer||xg(d.data)))return s(Wh(d.data));nu(d,!1,o=>{Nd||(Nd=new TextEncoder),s(Nd.encode(o))})}const em="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ns=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let d=0;d<em.length;d++)Ns[em.charCodeAt(d)]=d;const Ty=d=>{let s=d.length*.75,o=d.length,a,w=0,T,b,E,M;d[d.length-1]==="="&&(s--,d[d.length-2]==="="&&s--);const R=new ArrayBuffer(s),x=new Uint8Array(R);for(a=0;a<o;a+=4)T=Ns[d.charCodeAt(a)],b=Ns[d.charCodeAt(a+1)],E=Ns[d.charCodeAt(a+2)],M=Ns[d.charCodeAt(a+3)],x[w++]=T<<2|b>>4,x[w++]=(b&15)<<4|E>>2,x[w++]=(E&3)<<6|M&63;return R},Cy=typeof ArrayBuffer=="function",ru=(d,s)=>{if(typeof d!="string")return{type:"message",data:Mg(d,s)};const o=d.charAt(0);return o==="b"?{type:"message",data:Ey(d.substring(1),s)}:ho[o]?d.length>1?{type:ho[o],data:d.substring(1)}:{type:ho[o]}:Zd},Ey=(d,s)=>{if(Cy){const o=Ty(d);return Mg(o,s)}else return{base64:!0,data:d}},Mg=(d,s)=>{switch(s){case"blob":return d instanceof Blob?d:new Blob([d]);case"arraybuffer":default:return d instanceof ArrayBuffer?d:d.buffer}},Lg="",Dy=(d,s)=>{const o=d.length,a=new Array(o);let w=0;d.forEach((T,b)=>{nu(T,!1,E=>{a[b]=E,++w===o&&s(a.join(Lg))})})},xy=(d,s)=>{const o=d.split(Lg),a=[];for(let w=0;w<o.length;w++){const T=ru(o[w],s);if(a.push(T),T.type==="error")break}return a};function My(){return new TransformStream({transform(d,s){Ry(d,o=>{const a=o.length;let w;if(a<126)w=new Uint8Array(1),new DataView(w.buffer).setUint8(0,a);else if(a<65536){w=new Uint8Array(3);const T=new DataView(w.buffer);T.setUint8(0,126),T.setUint16(1,a)}else{w=new Uint8Array(9);const T=new DataView(w.buffer);T.setUint8(0,127),T.setBigUint64(1,BigInt(a))}d.data&&typeof d.data!="string"&&(w[0]|=128),s.enqueue(w),s.enqueue(o)})}})}let Ud;function Qc(d){return d.reduce((s,o)=>s+o.length,0)}function Kc(d,s){if(d[0].length===s)return d.shift();const o=new Uint8Array(s);let a=0;for(let w=0;w<s;w++)o[w]=d[0][a++],a===d[0].length&&(d.shift(),a=0);return d.length&&a<d[0].length&&(d[0]=d[0].slice(a)),o}function Ly(d,s){Ud||(Ud=new TextDecoder);const o=[];let a=0,w=-1,T=!1;return new TransformStream({transform(b,E){for(o.push(b);;){if(a===0){if(Qc(o)<1)break;const M=Kc(o,1);T=(M[0]&128)===128,w=M[0]&127,w<126?a=3:w===126?a=1:a=2}else if(a===1){if(Qc(o)<2)break;const M=Kc(o,2);w=new DataView(M.buffer,M.byteOffset,M.length).getUint16(0),a=3}else if(a===2){if(Qc(o)<8)break;const M=Kc(o,8),R=new DataView(M.buffer,M.byteOffset,M.length),x=R.getUint32(0);if(x>Math.pow(2,21)-1){E.enqueue(Zd);break}w=x*Math.pow(2,32)+R.getUint32(4),a=3}else{if(Qc(o)<w)break;const M=Kc(o,w);E.enqueue(ru(T?M:Ud.decode(M),s)),a=0}if(w===0||w>d){E.enqueue(Zd);break}}}})}const Og=4;function We(d){if(d)return Oy(d)}function Oy(d){for(var s in We.prototype)d[s]=We.prototype[s];return d}We.prototype.on=We.prototype.addEventListener=function(d,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+d]=this._callbacks["$"+d]||[]).push(s),this};We.prototype.once=function(d,s){function o(){this.off(d,o),s.apply(this,arguments)}return o.fn=s,this.on(d,o),this};We.prototype.off=We.prototype.removeListener=We.prototype.removeAllListeners=We.prototype.removeEventListener=function(d,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+d];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+d],this;for(var a,w=0;w<o.length;w++)if(a=o[w],a===s||a.fn===s){o.splice(w,1);break}return o.length===0&&delete this._callbacks["$"+d],this};We.prototype.emit=function(d){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),o=this._callbacks["$"+d],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(o){o=o.slice(0);for(var a=0,w=o.length;a<w;++a)o[a].apply(this,s)}return this};We.prototype.emitReserved=We.prototype.emit;We.prototype.listeners=function(d){return this._callbacks=this._callbacks||{},this._callbacks["$"+d]||[]};We.prototype.hasListeners=function(d){return!!this.listeners(d).length};const yo=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,o)=>o(s,0),ti=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ky="arraybuffer";function kg(d,...s){return s.reduce((o,a)=>(d.hasOwnProperty(a)&&(o[a]=d[a]),o),{})}const Ay=ti.setTimeout,Py=ti.clearTimeout;function So(d,s){s.useNativeTimers?(d.setTimeoutFn=Ay.bind(ti),d.clearTimeoutFn=Py.bind(ti)):(d.setTimeoutFn=ti.setTimeout.bind(ti),d.clearTimeoutFn=ti.clearTimeout.bind(ti))}const Ny=1.33;function Uy(d){return typeof d=="string"?jy(d):Math.ceil((d.byteLength||d.size)*Ny)}function jy(d){let s=0,o=0;for(let a=0,w=d.length;a<w;a++)s=d.charCodeAt(a),s<128?o+=1:s<2048?o+=2:s<55296||s>=57344?o+=3:(a++,o+=4);return o}function Ag(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function zy(d){let s="";for(let o in d)d.hasOwnProperty(o)&&(s.length&&(s+="&"),s+=encodeURIComponent(o)+"="+encodeURIComponent(d[o]));return s}function By(d){let s={},o=d.split("&");for(let a=0,w=o.length;a<w;a++){let T=o[a].split("=");s[decodeURIComponent(T[0])]=decodeURIComponent(T[1])}return s}class qy extends Error{constructor(s,o,a){super(s),this.description=o,this.context=a,this.type="TransportError"}}let au=class extends We{constructor(s){super(),this.writable=!1,So(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,o,a){return super.emitReserved("error",new qy(s,o,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const o=ru(s,this.socket.binaryType);this.onPacket(o)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,o={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(o)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const o=zy(s);return o.length?"?"+o:""}};class Iy extends au{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const o=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||o()})),this.writable||(a++,this.once("drain",function(){--a||o()}))}else o()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const o=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};xy(s,this.socket.binaryType).forEach(o),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,Dy(s,o=>{this.doWrite(o,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",o=this.query||{};return this.opts.timestampRequests!==!1&&(o[this.opts.timestampParam]=Ag()),!this.supportsBinary&&!o.sid&&(o.b64=1),this.createUri(s,o)}}let Pg=!1;try{Pg=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Hy=Pg;function Vy(){}class Gy extends Iy{constructor(s){if(super(s),typeof location<"u"){const o=location.protocol==="https:";let a=location.port;a||(a=o?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||a!==s.port}}doWrite(s,o){const a=this.request({method:"POST",data:s});a.on("success",o),a.on("error",(w,T)=>{this.onError("xhr post error",w,T)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(o,a)=>{this.onError("xhr poll error",o,a)}),this.pollXhr=s}}class Ti extends We{constructor(s,o,a){super(),this.createRequest=s,So(this,a),this._opts=a,this._method=a.method||"GET",this._uri=o,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var s;const o=kg(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");o.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(o);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let w in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(w)&&a.setRequestHeader(w,this._opts.extraHeaders[w])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var w;a.readyState===3&&((w=this._opts.cookieJar)===null||w===void 0||w.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(w){this.setTimeoutFn(()=>{this._onError(w)},0);return}typeof document<"u"&&(this._index=Ti.requestsCount++,Ti.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Vy,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ti.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ti.requestsCount=0;Ti.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",tm);else if(typeof addEventListener=="function"){const d="onpagehide"in ti?"pagehide":"unload";addEventListener(d,tm,!1)}}function tm(){for(let d in Ti.requests)Ti.requests.hasOwnProperty(d)&&Ti.requests[d].abort()}const Yy=function(){const d=Ng({xdomain:!1});return d&&d.responseType!==null}();class Qy extends Gy{constructor(s){super(s);const o=s&&s.forceBase64;this.supportsBinary=Yy&&!o}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new Ti(Ng,this.uri(),s)}}function Ng(d){const s=d.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||Hy))return new XMLHttpRequest}catch{}if(!s)try{return new ti[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ug=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ky extends au{get name(){return"websocket"}doOpen(){const s=this.uri(),o=this.opts.protocols,a=Ug?{}:kg(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,o,a)}catch(w){return this.emitReserved("error",w)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let o=0;o<s.length;o++){const a=s[o],w=o===s.length-1;nu(a,this.supportsBinary,T=>{try{this.doWrite(a,T)}catch{}w&&yo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",o=this.query||{};return this.opts.timestampRequests&&(o[this.opts.timestampParam]=Ag()),this.supportsBinary||(o.b64=1),this.createUri(s,o)}}const jd=ti.WebSocket||ti.MozWebSocket;class Xy extends Ky{createSocket(s,o,a){return Ug?new jd(s,o,a):o?new jd(s,o):new jd(s)}doWrite(s,o){this.ws.send(o)}}class Fy extends au{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const o=Ly(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=s.readable.pipeThrough(o).getReader(),w=My();w.readable.pipeTo(s.writable),this._writer=w.writable.getWriter();const T=()=>{a.read().then(({done:E,value:M})=>{E||(this.onPacket(M),T())}).catch(E=>{})};T();const b={type:"open"};this.query.sid&&(b.data=`{"sid":"${this.query.sid}"}`),this._writer.write(b).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let o=0;o<s.length;o++){const a=s[o],w=o===s.length-1;this._writer.write(a).then(()=>{w&&yo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const Zy={websocket:Xy,webtransport:Fy,polling:Qy},$y=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Jy=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function $d(d){if(d.length>8e3)throw"URI too long";const s=d,o=d.indexOf("["),a=d.indexOf("]");o!=-1&&a!=-1&&(d=d.substring(0,o)+d.substring(o,a).replace(/:/g,";")+d.substring(a,d.length));let w=$y.exec(d||""),T={},b=14;for(;b--;)T[Jy[b]]=w[b]||"";return o!=-1&&a!=-1&&(T.source=s,T.host=T.host.substring(1,T.host.length-1).replace(/;/g,":"),T.authority=T.authority.replace("[","").replace("]","").replace(/;/g,":"),T.ipv6uri=!0),T.pathNames=Wy(T,T.path),T.queryKey=eS(T,T.query),T}function Wy(d,s){const o=/\/{2,9}/g,a=s.replace(o,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&a.splice(0,1),s.slice(-1)=="/"&&a.splice(a.length-1,1),a}function eS(d,s){const o={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,w,T){w&&(o[w]=T)}),o}const Jd=typeof addEventListener=="function"&&typeof removeEventListener=="function",mo=[];Jd&&addEventListener("offline",()=>{mo.forEach(d=>d())},!1);class bn extends We{constructor(s,o){if(super(),this.binaryType=ky,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(o=s,s=null),s){const a=$d(s);o.hostname=a.host,o.secure=a.protocol==="https"||a.protocol==="wss",o.port=a.port,a.query&&(o.query=a.query)}else o.host&&(o.hostname=$d(o.host).host);So(this,o),this.secure=o.secure!=null?o.secure:typeof location<"u"&&location.protocol==="https:",o.hostname&&!o.port&&(o.port=this.secure?"443":"80"),this.hostname=o.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=o.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},o.transports.forEach(a=>{const w=a.prototype.name;this.transports.push(w),this._transportsByName[w]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},o),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=By(this.opts.query)),Jd&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},mo.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const o=Object.assign({},this.opts.query);o.EIO=Og,o.transport=s,this.id&&(o.sid=this.id);const a=Object.assign({},this.opts,{query:o,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&bn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const o=this.createTransport(s);o.open(),this.setTransport(o)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",o=>this._onClose("transport close",o))}onOpen(){this.readyState="open",bn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const o=new Error("server error");o.code=s.data,this._onError(o);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let o=1;for(let a=0;a<this.writeBuffer.length;a++){const w=this.writeBuffer[a].data;if(w&&(o+=Uy(w)),a>0&&o>this._maxPayload)return this.writeBuffer.slice(0,a);o+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,yo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,o,a){return this._sendPacket("message",s,o,a),this}send(s,o,a){return this._sendPacket("message",s,o,a),this}_sendPacket(s,o,a,w){if(typeof o=="function"&&(w=o,o=void 0),typeof a=="function"&&(w=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const T={type:s,data:o,options:a};this.emitReserved("packetCreate",T),this.writeBuffer.push(T),w&&this.once("flush",w),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},o=()=>{this.off("upgrade",o),this.off("upgradeError",o),s()},a=()=>{this.once("upgrade",o),this.once("upgradeError",o)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():s()}):this.upgrading?a():s()),this}_onError(s){if(bn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,o){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Jd&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=mo.indexOf(this._offlineEventListener);a!==-1&&mo.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,o),this.writeBuffer=[],this._prevBufferLen=0}}}bn.protocol=Og;class tS extends bn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let o=this.createTransport(s),a=!1;bn.priorWebsocketSuccess=!1;const w=()=>{a||(o.send([{type:"ping",data:"probe"}]),o.once("packet",_=>{if(!a)if(_.type==="pong"&&_.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",o),!o)return;bn.priorWebsocketSuccess=o.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(x(),this.setTransport(o),o.send([{type:"upgrade"}]),this.emitReserved("upgrade",o),o=null,this.upgrading=!1,this.flush())})}else{const L=new Error("probe error");L.transport=o.name,this.emitReserved("upgradeError",L)}}))};function T(){a||(a=!0,x(),o.close(),o=null)}const b=_=>{const L=new Error("probe error: "+_);L.transport=o.name,T(),this.emitReserved("upgradeError",L)};function E(){b("transport closed")}function M(){b("socket closed")}function R(_){o&&_.name!==o.name&&T()}const x=()=>{o.removeListener("open",w),o.removeListener("error",b),o.removeListener("close",E),this.off("close",M),this.off("upgrading",R)};o.once("open",w),o.once("error",b),o.once("close",E),this.once("close",M),this.once("upgrading",R),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{a||o.open()},200):o.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const o=[];for(let a=0;a<s.length;a++)~this.transports.indexOf(s[a])&&o.push(s[a]);return o}}let iS=class extends tS{constructor(s,o={}){const a=typeof s=="object"?s:o;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(w=>Zy[w]).filter(w=>!!w)),super(s,a)}};function nS(d,s="",o){let a=d;o=o||typeof location<"u"&&location,d==null&&(d=o.protocol+"//"+o.host),typeof d=="string"&&(d.charAt(0)==="/"&&(d.charAt(1)==="/"?d=o.protocol+d:d=o.host+d),/^(https?|wss?):\/\//.test(d)||(typeof o<"u"?d=o.protocol+"//"+d:d="https://"+d),a=$d(d)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const T=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+T+":"+a.port+s,a.href=a.protocol+"://"+T+(o&&o.port===a.port?"":":"+a.port),a}const rS=typeof ArrayBuffer=="function",aS=d=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(d):d.buffer instanceof ArrayBuffer,jg=Object.prototype.toString,sS=typeof Blob=="function"||typeof Blob<"u"&&jg.call(Blob)==="[object BlobConstructor]",cS=typeof File=="function"||typeof File<"u"&&jg.call(File)==="[object FileConstructor]";function su(d){return rS&&(d instanceof ArrayBuffer||aS(d))||sS&&d instanceof Blob||cS&&d instanceof File}function go(d,s){if(!d||typeof d!="object")return!1;if(Array.isArray(d)){for(let o=0,a=d.length;o<a;o++)if(go(d[o]))return!0;return!1}if(su(d))return!0;if(d.toJSON&&typeof d.toJSON=="function"&&arguments.length===1)return go(d.toJSON(),!0);for(const o in d)if(Object.prototype.hasOwnProperty.call(d,o)&&go(d[o]))return!0;return!1}function oS(d){const s=[],o=d.data,a=d;return a.data=Wd(o,s),a.attachments=s.length,{packet:a,buffers:s}}function Wd(d,s){if(!d)return d;if(su(d)){const o={_placeholder:!0,num:s.length};return s.push(d),o}else if(Array.isArray(d)){const o=new Array(d.length);for(let a=0;a<d.length;a++)o[a]=Wd(d[a],s);return o}else if(typeof d=="object"&&!(d instanceof Date)){const o={};for(const a in d)Object.prototype.hasOwnProperty.call(d,a)&&(o[a]=Wd(d[a],s));return o}return d}function lS(d,s){return d.data=eu(d.data,s),delete d.attachments,d}function eu(d,s){if(!d)return d;if(d&&d._placeholder===!0){if(typeof d.num=="number"&&d.num>=0&&d.num<s.length)return s[d.num];throw new Error("illegal attachments")}else if(Array.isArray(d))for(let o=0;o<d.length;o++)d[o]=eu(d[o],s);else if(typeof d=="object")for(const o in d)Object.prototype.hasOwnProperty.call(d,o)&&(d[o]=eu(d[o],s));return d}const dS=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],uS=5;var De;(function(d){d[d.CONNECT=0]="CONNECT",d[d.DISCONNECT=1]="DISCONNECT",d[d.EVENT=2]="EVENT",d[d.ACK=3]="ACK",d[d.CONNECT_ERROR=4]="CONNECT_ERROR",d[d.BINARY_EVENT=5]="BINARY_EVENT",d[d.BINARY_ACK=6]="BINARY_ACK"})(De||(De={}));class fS{constructor(s){this.replacer=s}encode(s){return(s.type===De.EVENT||s.type===De.ACK)&&go(s)?this.encodeAsBinary({type:s.type===De.EVENT?De.BINARY_EVENT:De.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let o=""+s.type;return(s.type===De.BINARY_EVENT||s.type===De.BINARY_ACK)&&(o+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(o+=s.nsp+","),s.id!=null&&(o+=s.id),s.data!=null&&(o+=JSON.stringify(s.data,this.replacer)),o}encodeAsBinary(s){const o=oS(s),a=this.encodeAsString(o.packet),w=o.buffers;return w.unshift(a),w}}function im(d){return Object.prototype.toString.call(d)==="[object Object]"}class cu extends We{constructor(s){super(),this.reviver=s}add(s){let o;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");o=this.decodeString(s);const a=o.type===De.BINARY_EVENT;a||o.type===De.BINARY_ACK?(o.type=a?De.EVENT:De.ACK,this.reconstructor=new pS(o),o.attachments===0&&super.emitReserved("decoded",o)):super.emitReserved("decoded",o)}else if(su(s)||s.base64)if(this.reconstructor)o=this.reconstructor.takeBinaryData(s),o&&(this.reconstructor=null,super.emitReserved("decoded",o));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let o=0;const a={type:Number(s.charAt(0))};if(De[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===De.BINARY_EVENT||a.type===De.BINARY_ACK){const T=o+1;for(;s.charAt(++o)!=="-"&&o!=s.length;);const b=s.substring(T,o);if(b!=Number(b)||s.charAt(o)!=="-")throw new Error("Illegal attachments");a.attachments=Number(b)}if(s.charAt(o+1)==="/"){const T=o+1;for(;++o&&!(s.charAt(o)===","||o===s.length););a.nsp=s.substring(T,o)}else a.nsp="/";const w=s.charAt(o+1);if(w!==""&&Number(w)==w){const T=o+1;for(;++o;){const b=s.charAt(o);if(b==null||Number(b)!=b){--o;break}if(o===s.length)break}a.id=Number(s.substring(T,o+1))}if(s.charAt(++o)){const T=this.tryParse(s.substr(o));if(cu.isPayloadValid(a.type,T))a.data=T;else throw new Error("invalid payload")}return a}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,o){switch(s){case De.CONNECT:return im(o);case De.DISCONNECT:return o===void 0;case De.CONNECT_ERROR:return typeof o=="string"||im(o);case De.EVENT:case De.BINARY_EVENT:return Array.isArray(o)&&(typeof o[0]=="number"||typeof o[0]=="string"&&dS.indexOf(o[0])===-1);case De.ACK:case De.BINARY_ACK:return Array.isArray(o)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class pS{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const o=lS(this.reconPack,this.buffers);return this.finishedReconstruction(),o}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const hS=Object.freeze(Object.defineProperty({__proto__:null,Decoder:cu,Encoder:fS,get PacketType(){return De},protocol:uS},Symbol.toStringTag,{value:"Module"}));function fi(d,s,o){return d.on(s,o),function(){d.off(s,o)}}const mS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class zg extends We{constructor(s,o,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=o,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[fi(s,"open",this.onopen.bind(this)),fi(s,"packet",this.onpacket.bind(this)),fi(s,"error",this.onerror.bind(this)),fi(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...o){var a,w,T;if(mS.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(o.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const b={type:De.EVENT,data:o};if(b.options={},b.options.compress=this.flags.compress!==!1,typeof o[o.length-1]=="function"){const x=this.ids++,_=o.pop();this._registerAckCallback(x,_),b.id=x}const E=(w=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||w===void 0?void 0:w.writable,M=this.connected&&!(!((T=this.io.engine)===null||T===void 0)&&T._hasPingExpired());return this.flags.volatile&&!E||(M?(this.notifyOutgoingListeners(b),this.packet(b)):this.sendBuffer.push(b)),this.flags={},this}_registerAckCallback(s,o){var a;const w=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(w===void 0){this.acks[s]=o;return}const T=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let E=0;E<this.sendBuffer.length;E++)this.sendBuffer[E].id===s&&this.sendBuffer.splice(E,1);o.call(this,new Error("operation has timed out"))},w),b=(...E)=>{this.io.clearTimeoutFn(T),o.apply(this,E)};b.withError=!0,this.acks[s]=b}emitWithAck(s,...o){return new Promise((a,w)=>{const T=(b,E)=>b?w(b):a(E);T.withError=!0,o.push(T),this.emit(s,...o)})}_addToQueue(s){let o;typeof s[s.length-1]=="function"&&(o=s.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((w,...T)=>a!==this._queue[0]?void 0:(w!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),o&&o(w)):(this._queue.shift(),o&&o(null,...T)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const o=this._queue[0];o.pending&&!s||(o.pending=!0,o.tryCount++,this.flags=o.flags,this.emit.apply(this,o.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:De.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,o){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,o),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(a=>String(a.id)===s)){const a=this.acks[s];delete this.acks[s],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case De.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case De.EVENT:case De.BINARY_EVENT:this.onevent(s);break;case De.ACK:case De.BINARY_ACK:this.onack(s);break;case De.DISCONNECT:this.ondisconnect();break;case De.CONNECT_ERROR:this.destroy();const a=new Error(s.data.message);a.data=s.data.data,this.emitReserved("connect_error",a);break}}onevent(s){const o=s.data||[];s.id!=null&&o.push(this.ack(s.id)),this.connected?this.emitEvent(o):this.receiveBuffer.push(Object.freeze(o))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const o=this._anyListeners.slice();for(const a of o)a.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const o=this;let a=!1;return function(...w){a||(a=!0,o.packet({type:De.ACK,id:s,data:w}))}}onack(s){const o=this.acks[s.id];typeof o=="function"&&(delete this.acks[s.id],o.withError&&s.data.unshift(null),o.apply(this,s.data))}onconnect(s,o){this.id=s,this.recovered=o&&this._pid===o,this._pid=o,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:De.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const o=this._anyListeners;for(let a=0;a<o.length;a++)if(s===o[a])return o.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const o=this._anyOutgoingListeners;for(let a=0;a<o.length;a++)if(s===o[a])return o.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const o=this._anyOutgoingListeners.slice();for(const a of o)a.apply(this,s.data)}}}function Zr(d){d=d||{},this.ms=d.min||100,this.max=d.max||1e4,this.factor=d.factor||2,this.jitter=d.jitter>0&&d.jitter<=1?d.jitter:0,this.attempts=0}Zr.prototype.duration=function(){var d=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),o=Math.floor(s*this.jitter*d);d=(Math.floor(s*10)&1)==0?d-o:d+o}return Math.min(d,this.max)|0};Zr.prototype.reset=function(){this.attempts=0};Zr.prototype.setMin=function(d){this.ms=d};Zr.prototype.setMax=function(d){this.max=d};Zr.prototype.setJitter=function(d){this.jitter=d};class tu extends We{constructor(s,o){var a;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(o=s,s=void 0),o=o||{},o.path=o.path||"/socket.io",this.opts=o,So(this,o),this.reconnection(o.reconnection!==!1),this.reconnectionAttempts(o.reconnectionAttempts||1/0),this.reconnectionDelay(o.reconnectionDelay||1e3),this.reconnectionDelayMax(o.reconnectionDelayMax||5e3),this.randomizationFactor((a=o.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new Zr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(o.timeout==null?2e4:o.timeout),this._readyState="closed",this.uri=s;const w=o.parser||hS;this.encoder=new w.Encoder,this.decoder=new w.Decoder,this._autoConnect=o.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var o;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(o=this.backoff)===null||o===void 0||o.setMin(s),this)}randomizationFactor(s){var o;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(o=this.backoff)===null||o===void 0||o.setJitter(s),this)}reconnectionDelayMax(s){var o;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(o=this.backoff)===null||o===void 0||o.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new iS(this.uri,this.opts);const o=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const w=fi(o,"open",function(){a.onopen(),s&&s()}),T=E=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",E),s?s(E):this.maybeReconnectOnOpen()},b=fi(o,"error",T);if(this._timeout!==!1){const E=this._timeout,M=this.setTimeoutFn(()=>{w(),T(new Error("timeout")),o.close()},E);this.opts.autoUnref&&M.unref(),this.subs.push(()=>{this.clearTimeoutFn(M)})}return this.subs.push(w),this.subs.push(b),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(fi(s,"ping",this.onping.bind(this)),fi(s,"data",this.ondata.bind(this)),fi(s,"error",this.onerror.bind(this)),fi(s,"close",this.onclose.bind(this)),fi(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(o){this.onclose("parse error",o)}}ondecoded(s){yo(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,o){let a=this.nsps[s];return a?this._autoConnect&&!a.active&&a.connect():(a=new zg(this,s,o),this.nsps[s]=a),a}_destroy(s){const o=Object.keys(this.nsps);for(const a of o)if(this.nsps[a].active)return;this._close()}_packet(s){const o=this.encoder.encode(s);for(let a=0;a<o.length;a++)this.engine.write(o[a],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,o){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,o),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const o=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(w=>{w?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",w)):s.onreconnect()}))},o);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const as={};function _o(d,s){typeof d=="object"&&(s=d,d=void 0),s=s||{};const o=nS(d,s.path||"/socket.io"),a=o.source,w=o.id,T=o.path,b=as[w]&&T in as[w].nsps,E=s.forceNew||s["force new connection"]||s.multiplex===!1||b;let M;return E?M=new tu(a,s):(as[w]||(as[w]=new tu(a,s)),M=as[w]),o.query&&!s.query&&(s.query=o.queryKey),M.socket(o.path,s)}Object.assign(_o,{Manager:tu,Socket:zg,io:_o,connect:_o});var zd={},Xc={exports:{}},Bd,nm;function gS(){if(nm)return Bd;nm=1;var d=1e3,s=d*60,o=s*60,a=o*24,w=a*7,T=a*365.25;Bd=function(x,_){_=_||{};var L=typeof x;if(L==="string"&&x.length>0)return b(x);if(L==="number"&&isFinite(x))return _.long?M(x):E(x);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(x))};function b(x){if(x=String(x),!(x.length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(x);if(_){var L=parseFloat(_[1]),k=(_[2]||"ms").toLowerCase();switch(k){case"years":case"year":case"yrs":case"yr":case"y":return L*T;case"weeks":case"week":case"w":return L*w;case"days":case"day":case"d":return L*a;case"hours":case"hour":case"hrs":case"hr":case"h":return L*o;case"minutes":case"minute":case"mins":case"min":case"m":return L*s;case"seconds":case"second":case"secs":case"sec":case"s":return L*d;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return L;default:return}}}}function E(x){var _=Math.abs(x);return _>=a?Math.round(x/a)+"d":_>=o?Math.round(x/o)+"h":_>=s?Math.round(x/s)+"m":_>=d?Math.round(x/d)+"s":x+"ms"}function M(x){var _=Math.abs(x);return _>=a?R(x,_,a,"day"):_>=o?R(x,_,o,"hour"):_>=s?R(x,_,s,"minute"):_>=d?R(x,_,d,"second"):x+" ms"}function R(x,_,L,k){var N=_>=L*1.5;return Math.round(x/L)+" "+k+(N?"s":"")}return Bd}var qd,rm;function _S(){if(rm)return qd;rm=1;function d(s){a.debug=a,a.default=a,a.coerce=R,a.disable=E,a.enable=T,a.enabled=M,a.humanize=gS(),a.destroy=x,Object.keys(s).forEach(_=>{a[_]=s[_]}),a.names=[],a.skips=[],a.formatters={};function o(_){let L=0;for(let k=0;k<_.length;k++)L=(L<<5)-L+_.charCodeAt(k),L|=0;return a.colors[Math.abs(L)%a.colors.length]}a.selectColor=o;function a(_){let L,k=null,N,g;function h(...c){if(!h.enabled)return;const f=h,u=Number(new Date),p=u-(L||u);f.diff=p,f.prev=L,f.curr=u,L=u,c[0]=a.coerce(c[0]),typeof c[0]!="string"&&c.unshift("%O");let m=0;c[0]=c[0].replace(/%([a-zA-Z%])/g,(v,C)=>{if(v==="%%")return"%";m++;const S=a.formatters[C];if(typeof S=="function"){const O=c[m];v=S.call(f,O),c.splice(m,1),m--}return v}),a.formatArgs.call(f,c),(f.log||a.log).apply(f,c)}return h.namespace=_,h.useColors=a.useColors(),h.color=a.selectColor(_),h.extend=w,h.destroy=a.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>k!==null?k:(N!==a.namespaces&&(N=a.namespaces,g=a.enabled(_)),g),set:c=>{k=c}}),typeof a.init=="function"&&a.init(h),h}function w(_,L){const k=a(this.namespace+(typeof L>"u"?":":L)+_);return k.log=this.log,k}function T(_){a.save(_),a.namespaces=_,a.names=[],a.skips=[];const L=(typeof _=="string"?_:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const k of L)k[0]==="-"?a.skips.push(k.slice(1)):a.names.push(k)}function b(_,L){let k=0,N=0,g=-1,h=0;for(;k<_.length;)if(N<L.length&&(L[N]===_[k]||L[N]==="*"))L[N]==="*"?(g=N,h=k,N++):(k++,N++);else if(g!==-1)N=g+1,h++,k=h;else return!1;for(;N<L.length&&L[N]==="*";)N++;return N===L.length}function E(){const _=[...a.names,...a.skips.map(L=>"-"+L)].join(",");return a.enable(""),_}function M(_){for(const L of a.skips)if(b(_,L))return!1;for(const L of a.names)if(b(_,L))return!0;return!1}function R(_){return _ instanceof Error?_.stack||_.message:_}function x(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.enable(a.load()),a}return qd=d,qd}var am;function bo(){return am||(am=1,function(d,s){var o={};s.formatArgs=w,s.save=T,s.load=b,s.useColors=a,s.storage=E(),s.destroy=(()=>{let R=!1;return()=>{R||(R=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function a(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let R;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(R=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(R[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function w(R){if(R[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+R[0]+(this.useColors?"%c ":" ")+"+"+d.exports.humanize(this.diff),!this.useColors)return;const x="color: "+this.color;R.splice(1,0,x,"color: inherit");let _=0,L=0;R[0].replace(/%[a-zA-Z%]/g,k=>{k!=="%%"&&(_++,k==="%c"&&(L=_))}),R.splice(L,0,x)}s.log=console.debug||console.log||(()=>{});function T(R){try{R?s.storage.setItem("debug",R):s.storage.removeItem("debug")}catch{}}function b(){let R;try{R=s.storage.getItem("debug")||s.storage.getItem("DEBUG")}catch{}return!R&&typeof process<"u"&&"env"in process&&(R=o.DEBUG),R}function E(){try{return localStorage}catch{}}d.exports=_S()(s);const{formatters:M}=d.exports;M.j=function(R){try{return JSON.stringify(R)}catch(x){return"[UnexpectedJSONParseError]: "+x.message}}}(Xc,Xc.exports)),Xc.exports}var Wn={},er={},Us={exports:{}},vS=Us.exports,sm;function yS(){return sm||(sm=1,function(d,s){(function(o,a){var w="2.0.3",T=500,b="user-agent",E="",M="?",R="function",x="undefined",_="object",L="string",k="browser",N="cpu",g="device",h="engine",c="os",f="result",u="name",p="type",m="vendor",y="version",v="architecture",C="major",S="model",O="console",U="mobile",I="tablet",A="smarttv",Y="wearable",Z="xr",j="embedded",V="inapp",te="brands",le="formFactors",q="fullVersionList",W="platform",re="platformVersion",ne="bitness",se="sec-ch-ua",be=se+"-full-version-list",me=se+"-arch",et=se+"-"+ne,ke=se+"-form-factors",Tt=se+"-"+U,$r=se+"-"+S,Cn=se+"-"+W,Jr=Cn+"-version",sr=[te,q,U,S,W,re,v,le,ne],Gi="Amazon",Yi="Apple",js="ASUS",jt="BlackBerry",Ei="Google",Wr="Huawei",ea="Lenovo",En="Honor",cr="LG",or="Microsoft",ta="Motorola",ia="Nvidia",Qi="OnePlus",ut="OPPO",Mt="Samsung",_t="Sharp",Dn="Sony",na="Xiaomi",ra="Zebra",xn="Chrome",Mn="Chromium",vt="Chromecast",lr="Edge",ii="Firefox",Ln="Opera",dr="Facebook",aa="Sogou",mi="Mobile ",ni=" Browser",sa="Windows",ca=typeof o!==x,ft=ca&&o.navigator?o.navigator:a,Qt=ft&&ft.userAgentData?ft.userAgentData:a,oa=function(ie,ce){var ae={},Ce=ce;if(!zt(ce)){Ce={};for(var de in ce)for(var Le in ce[de])Ce[Le]=ce[de][Le].concat(Ce[Le]?Ce[Le]:[])}for(var fe in ie)ae[fe]=Ce[fe]&&Ce[fe].length%2===0?Ce[fe].concat(ie[fe]):ie[fe];return ae},On=function(ie){for(var ce={},ae=0;ae<ie.length;ae++)ce[ie[ae].toUpperCase()]=ie[ae];return ce},la=function(ie,ce){if(typeof ie===_&&ie.length>0){for(var ae in ie)if(yt(ie[ae])==yt(ce))return!0;return!1}return Ve(ie)?yt(ce).indexOf(yt(ie))!==-1:!1},zt=function(ie,ce){for(var ae in ie)return/^(browser|cpu|device|engine|os)$/.test(ae)||(ce?zt(ie[ae]):!1)},Ve=function(ie){return typeof ie===L},rt=function(ie){if(!ie)return a;for(var ce=[],ae=Ki(/\\?\"/g,ie).split(","),Ce=0;Ce<ae.length;Ce++)if(ae[Ce].indexOf(";")>-1){var de=ai(ae[Ce]).split(";v=");ce[Ce]={brand:de[0],version:de[1]}}else ce[Ce]=ai(ae[Ce]);return ce},yt=function(ie){return Ve(ie)?ie.toLowerCase():ie},kn=function(ie){return Ve(ie)?Ki(/[^\d\.]/g,ie).split(".")[0]:a},ri=function(ie){for(var ce in ie){var ae=ie[ce];typeof ae==_&&ae.length==2?this[ae[0]]=ae[1]:this[ae]=a}return this},Ki=function(ie,ce){return Ve(ce)?ce.replace(ie,E):ce},Xi=function(ie){return Ki(/\\?\"/g,ie)},ai=function(ie,ce){if(Ve(ie))return ie=Ki(/^\s\s*/,ie),typeof ce===x?ie:ie.substring(0,T)},An=function(ie,ce){if(!(!ie||!ce))for(var ae=0,Ce,de,Le,fe,Ee,_e;ae<ce.length&&!Ee;){var qe=ce[ae],si=ce[ae+1];for(Ce=de=0;Ce<qe.length&&!Ee&&qe[Ce];)if(Ee=qe[Ce++].exec(ie),Ee)for(Le=0;Le<si.length;Le++)_e=Ee[++de],fe=si[Le],typeof fe===_&&fe.length>0?fe.length===2?typeof fe[1]==R?this[fe[0]]=fe[1].call(this,_e):this[fe[0]]=fe[1]:fe.length===3?typeof fe[1]===R&&!(fe[1].exec&&fe[1].test)?this[fe[0]]=_e?fe[1].call(this,_e,fe[2]):a:this[fe[0]]=_e?_e.replace(fe[1],fe[2]):a:fe.length===4&&(this[fe[0]]=_e?fe[3].call(this,_e.replace(fe[1],fe[2])):a):this[fe]=_e||a;ae+=2}},Ct=function(ie,ce){for(var ae in ce)if(typeof ce[ae]===_&&ce[ae].length>0){for(var Ce=0;Ce<ce[ae].length;Ce++)if(la(ce[ae][Ce],ie))return ae===M?a:ae}else if(la(ce[ae],ie))return ae===M?a:ae;return ce.hasOwnProperty("*")?ce["*"]:ie},Di={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Fi={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":a},xi={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[u,mi+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,y],[/opios[\/ ]+([\w\.]+)/i],[y,[u,Ln+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[y,[u,Ln+" GX"]],[/\bopr\/([\w\.]+)/i],[y,[u,Ln]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[y,[u,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[y,[u,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[u,y],[/quark(?:pc)?\/([-\w\.]+)/i],[y,[u,"Quark"]],[/\bddg\/([\w\.]+)/i],[y,[u,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[u,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[y,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[y,[u,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[y,[u,"Smart "+ea+ni]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure"+ni],y],[/\bfocus\/([\w\.]+)/i],[y,[u,ii+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[u,Ln+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[u,Ln+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[u,"MIUI"+ni]],[/fxios\/([\w\.-]+)/i],[y,[u,mi+ii]],[/\bqihoobrowser\/?([\w\.]*)/i],[y,[u,"360"]],[/\b(qq)\/([\w\.]+)/i],[[u,/(.+)/,"$1Browser"],y],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1"+ni],y],[/samsungbrowser\/([\w\.]+)/i],[y,[u,Mt+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[y,[u,aa+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[u,aa+" Mobile"],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[u,y],[/(lbbrowser|rekonq)/i],[u],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[y,u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,dr],y,[p,V]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[u,y,[p,V]],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[u,"GSA"],[p,V]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[y,[u,"TikTok"],[p,V]],[/\[(linkedin)app\]/i],[u,[p,V]],[/(chromium)[\/ ]([-\w\.]+)/i],[u,y],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[u,xn+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,xn+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[u,"Android"+ni]],[/chrome\/([\w\.]+) mobile/i],[y,[u,mi+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,y],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[y,[u,mi+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[u,mi+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[y,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[y,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[u,y],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[u,mi+ii],y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],y],[/(wolvic|librewolf)\/([\w\.]+)/i],[u,y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[u,ii+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[u,[y,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[u,[y,/[^\d\.]+./,E]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[v,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[v,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[v,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[v,/ower/,E,yt]],[/ sun4\w[;\)]/i],[[v,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[v,yt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[S,[m,Mt],[p,I]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[S,[m,Mt],[p,U]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[S,[m,Yi],[p,U]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[S,[m,Yi],[p,I]],[/(macintosh);/i],[S,[m,Yi]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[S,[m,_t],[p,U]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[S,[m,En],[p,I]],[/honor([-\w ]+)[;\)]/i],[S,[m,En],[p,U]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[S,[m,Wr],[p,I]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[S,[m,Wr],[p,U]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[S,/_/g," "],[m,na],[p,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[S,/_/g," "],[m,na],[p,U]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[S,[m,ut],[p,U]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[S,[m,Ct,{OnePlus:["304","403","203"],"*":ut}],[p,I]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[S,[m,"BLU"],[p,U]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[S,[m,"Vivo"],[p,U]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[S,[m,"Realme"],[p,U]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[S,[m,ta],[p,U]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[S,[m,ta],[p,I]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[S,[m,cr],[p,I]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch))(\w+)/i,/\blg-?([\d\w]+) bui/i],[S,[m,cr],[p,U]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[S,[m,ea],[p,I]],[/(nokia) (t[12][01])/i],[m,S,[p,I]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[S,/_/g," "],[p,U],[m,"Nokia"]],[/(pixel (c|tablet))\b/i],[S,[m,Ei],[p,I]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[S,[m,Ei],[p,U]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[S,[m,Dn],[p,U]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[S,"Xperia Tablet"],[m,Dn],[p,I]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[S,[m,Qi],[p,U]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[S,[m,Gi],[p,I]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[S,/(.+)/g,"Fire Phone $1"],[m,Gi],[p,U]],[/(playbook);[-\w\),; ]+(rim)/i],[S,m,[p,I]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[S,[m,jt],[p,U]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[S,[m,js],[p,I]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[S,[m,js],[p,U]],[/(nexus 9)/i],[S,[m,"HTC"],[p,I]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[S,/_/g," "],[p,U]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[S,[m,"TCL"],[p,I]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[S,[m,"TCL"],[p,U]],[/(itel) ((\w+))/i],[[m,yt],S,[p,Ct,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[S,[m,"Acer"],[p,I]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[S,[m,"Meizu"],[p,U]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[S,[m,"Ulefone"],[p,U]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[S,[m,"Energizer"],[p,U]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[S,[m,"Cat"],[p,U]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[S,[m,"Smartfren"],[p,U]],[/droid.+; (a(?:015|06[35]|142p?))/i],[S,[m,"Nothing"],[p,U]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[S,[m,"Archos"],[p,I]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[S,[m,"Archos"],[p,U]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[m,S,[p,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[m,S,[p,U]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[m,S,[p,I]],[/(surface duo)/i],[S,[m,or],[p,I]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[S,[m,"Fairphone"],[p,U]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[S,[m,ia],[p,I]],[/(sprint) (\w+)/i],[m,S,[p,U]],[/(kin\.[onetw]{3})/i],[[S,/\./g," "],[m,or],[p,U]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[S,[m,ra],[p,I]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[S,[m,ra],[p,U]],[/smart-tv.+(samsung)/i],[m,[p,A]],[/hbbtv.+maple;(\d+)/i],[[S,/^/,"SmartTV"],[m,Mt],[p,A]],[/tcast.+(lg)e?. ([-\w]+)/i],[m,S,[p,A]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,cr],[p,A]],[/(apple) ?tv/i],[m,[S,Yi+" TV"],[p,A]],[/crkey.*devicetype\/chromecast/i],[[S,vt+" Third Generation"],[m,Ei],[p,A]],[/crkey.*devicetype\/([^/]*)/i],[[S,/^/,"Chromecast "],[m,Ei],[p,A]],[/fuchsia.*crkey/i],[[S,vt+" Nest Hub"],[m,Ei],[p,A]],[/crkey/i],[[S,vt],[m,Ei],[p,A]],[/(portaltv)/i],[S,[m,dr],[p,A]],[/droid.+aft(\w+)( bui|\))/i],[S,[m,Gi],[p,A]],[/(shield \w+ tv)/i],[S,[m,ia],[p,A]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[S,[m,_t],[p,A]],[/(bravia[\w ]+)( bui|\))/i],[S,[m,Dn],[p,A]],[/(mi(tv|box)-?\w+) bui/i],[S,[m,na],[p,A]],[/Hbbtv.*(technisat) (.*);/i],[m,S,[p,A]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,ai],[S,ai],[p,A]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[S,[p,A]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,A]],[/(ouya)/i,/(nintendo) (\w+)/i],[m,S,[p,O]],[/droid.+; (shield)( bui|\))/i],[S,[m,ia],[p,O]],[/(playstation \w+)/i],[S,[m,Dn],[p,O]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[S,[m,or],[p,O]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[S,[m,Mt],[p,Y]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[m,S,[p,Y]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[S,[m,ut],[p,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[S,[m,Yi],[p,Y]],[/(opwwe\d{3})/i],[S,[m,Qi],[p,Y]],[/(moto 360)/i],[S,[m,ta],[p,Y]],[/(smartwatch 3)/i],[S,[m,Dn],[p,Y]],[/(g watch r)/i],[S,[m,cr],[p,Y]],[/droid.+; (wt63?0{2,3})\)/i],[S,[m,ra],[p,Y]],[/droid.+; (glass) \d/i],[S,[m,Ei],[p,Z]],[/(pico) (4|neo3(?: link|pro)?)/i],[m,S,[p,Z]],[/(quest( \d| pro)?s?).+vr/i],[S,[m,dr],[p,Z]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,j]],[/(aeobc)\b/i],[S,[m,Gi],[p,j]],[/(homepod).+mac os/i],[S,[m,Yi],[p,j]],[/windows iot/i],[[p,j]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[S,[p,Ct,{mobile:"Mobile",xr:"VR","*":I}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,I]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,U]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[S,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[u,lr+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[u,y],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,y],[/ladybird\//i],[[u,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,y],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[u,[y,Ct,Di]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[y,Ct,Di],[u,sa]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,"macOS"],[y,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[y,[u,vt+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[y,[u,vt+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[y,[u,vt+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[y,[u,vt+" Linux"]],[/crkey\/([\d\.]+)/i],[y,[u,vt]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[y,u],[/(ubuntu) ([\w\.]+) like android/i],[[u,/(.+)/,"$1 Touch"],y],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/\.; ]?([\d\.]*)/i],[u,y],[/\(bb(10);/i],[y,[u,jt]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[y,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[u,ii+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[y,[u,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,"Chrome OS"],y],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,y],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,y]]},Ge=function(){var ie={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return ri.call(ie.init,[[k,[u,y,C,p]],[N,[v]],[g,[p,S,m]],[h,[u,y]],[c,[u,y]]]),ri.call(ie.isIgnore,[[k,[y,C]],[h,[y]],[c,[y]]]),ri.call(ie.isIgnoreRgx,[[k,/ ?browser$/i],[c,/ ?os$/i]]),ri.call(ie.toString,[[k,[u,y]],[N,[v]],[g,[m,S]],[h,[u,y]],[c,[u,y]]]),ie}(),zs=function(ie,ce){var ae=Ge.init[ce],Ce=Ge.isIgnore[ce]||0,de=Ge.isIgnoreRgx[ce]||0,Le=Ge.toString[ce]||0;function fe(){ri.call(this,ae)}return fe.prototype.getItem=function(){return ie},fe.prototype.withClientHints=function(){return Qt?Qt.getHighEntropyValues(sr).then(function(Ee){return ie.setCH(new da(Ee,!1)).parseCH().get()}):ie.parseCH().get()},fe.prototype.withFeatureCheck=function(){return ie.detectFeature().get()},ce!=f&&(fe.prototype.is=function(Ee){var _e=!1;for(var qe in this)if(this.hasOwnProperty(qe)&&!la(Ce,qe)&&yt(de?Ki(de,this[qe]):this[qe])==yt(de?Ki(de,Ee):Ee)){if(_e=!0,Ee!=x)break}else if(Ee==x&&_e){_e=!_e;break}return _e},fe.prototype.toString=function(){var Ee=E;for(var _e in Le)typeof this[Le[_e]]!==x&&(Ee+=(Ee?" ":E)+this[Le[_e]]);return Ee||x}),Qt||(fe.prototype.then=function(Ee){var _e=this,qe=function(){for(var ci in _e)_e.hasOwnProperty(ci)&&(this[ci]=_e[ci])};qe.prototype={is:fe.prototype.is,toString:fe.prototype.toString};var si=new qe;return Ee(si),si}),new fe};function da(ie,ce){if(ie=ie||{},ri.call(this,sr),ce)ri.call(this,[[te,rt(ie[se])],[q,rt(ie[be])],[U,/\?1/.test(ie[Tt])],[S,Xi(ie[$r])],[W,Xi(ie[Cn])],[re,Xi(ie[Jr])],[v,Xi(ie[me])],[le,rt(ie[ke])],[ne,Xi(ie[et])]]);else for(var ae in ie)this.hasOwnProperty(ae)&&typeof ie[ae]!==x&&(this[ae]=ie[ae])}function gi(ie,ce,ae,Ce){return this.get=function(de){return de?this.data.hasOwnProperty(de)?this.data[de]:a:this.data},this.set=function(de,Le){return this.data[de]=Le,this},this.setCH=function(de){return this.uaCH=de,this},this.detectFeature=function(){if(ft&&ft.userAgent==this.ua)switch(this.itemType){case k:ft.brave&&typeof ft.brave.isBrave==R&&this.set(u,"Brave");break;case g:!this.get(p)&&Qt&&Qt[U]&&this.set(p,U),this.get(S)=="Macintosh"&&ft&&typeof ft.standalone!==x&&ft.maxTouchPoints&&ft.maxTouchPoints>2&&this.set(S,"iPad").set(p,I);break;case c:!this.get(u)&&Qt&&Qt[W]&&this.set(u,Qt[W]);break;case f:var de=this.data,Le=function(fe){return de[fe].getItem().detectFeature().get()};this.set(k,Le(k)).set(N,Le(N)).set(g,Le(g)).set(h,Le(h)).set(c,Le(c))}return this},this.parseUA=function(){return this.itemType!=f&&An.call(this.data,this.ua,this.rgxMap),this.itemType==k&&this.set(C,kn(this.get(y))),this},this.parseCH=function(){var de=this.uaCH,Le=this.rgxMap;switch(this.itemType){case k:case h:var fe=de[q]||de[te],Ee;if(fe)for(var _e in fe){var qe=fe[_e].brand||fe[_e],si=fe[_e].version;this.itemType==k&&!/not.a.brand/i.test(qe)&&(!Ee||/chrom/i.test(Ee)&&qe!=Mn)&&(qe=Ct(qe,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"}),this.set(u,qe).set(y,si).set(C,kn(si)),Ee=qe),this.itemType==h&&qe==Mn&&this.set(y,si)}break;case N:var ci=de[v];ci&&(ci&&de[ne]=="64"&&(ci+="64"),An.call(this.data,ci+";",Le));break;case g:if(de[U]&&this.set(p,U),de[S]&&(this.set(S,de[S]),!this.get(p)||!this.get(m))){var st={};An.call(st,"droid 9; "+de[S]+")",Le),!this.get(p)&&st.type&&this.set(p,st.type),!this.get(m)&&st.vendor&&this.set(m,st.vendor)}if(de[le]){var Nn;if(typeof de[le]!="string")for(var Bs=0;!Nn&&Bs<de[le].length;)Nn=Ct(de[le][Bs++],Fi);else Nn=Ct(de[le],Fi);this.set(p,Nn)}break;case c:var $i=de[W];if($i){var ur=de[re];$i==sa&&(ur=parseInt(kn(ur),10)>=13?"11":"10"),this.set(u,$i).set(y,ur)}this.get(u)==sa&&de[S]=="Xbox"&&this.set(u,"Xbox").set(y,a);break;case f:var fr=this.data,Un=function(Lt){return fr[Lt].getItem().setCH(de).parseCH().get()};this.set(k,Un(k)).set(N,Un(N)).set(g,Un(g)).set(h,Un(h)).set(c,Un(c))}return this},ri.call(this,[["itemType",ie],["ua",ce],["uaCH",Ce],["rgxMap",ae],["data",zs(this,ie)]]),this}function at(ie,ce,ae){if(typeof ie===_?(zt(ie,!0)?(typeof ce===_&&(ae=ce),ce=ie):(ae=ie,ce=a),ie=a):typeof ie===L&&!zt(ce,!0)&&(ae=ce,ce=a),ae&&typeof ae.append===R){var Ce={};ae.forEach(function(_e,qe){Ce[qe]=_e}),ae=Ce}if(!(this instanceof at))return new at(ie,ce,ae).getResult();var de=typeof ie===L?ie:ae&&ae[b]?ae[b]:ft&&ft.userAgent?ft.userAgent:E,Le=new da(ae,!0),fe=ce?oa(xi,ce):xi,Ee=function(_e){return _e==f?function(){return new gi(_e,de,fe,Le).set("ua",de).set(k,this.getBrowser()).set(N,this.getCPU()).set(g,this.getDevice()).set(h,this.getEngine()).set(c,this.getOS()).get()}:function(){return new gi(_e,de,fe[_e],Le).parseUA().get()}};return ri.call(this,[["getBrowser",Ee(k)],["getCPU",Ee(N)],["getDevice",Ee(g)],["getEngine",Ee(h)],["getOS",Ee(c)],["getResult",Ee(f)],["getUA",function(){return de}],["setUA",function(_e){return Ve(_e)&&(de=_e.length>T?ai(_e,T):_e),this}]]).setUA(de),this}at.VERSION=w,at.BROWSER=On([u,y,C,p]),at.CPU=On([v]),at.DEVICE=On([S,m,p,O,U,A,I,Y,j]),at.ENGINE=at.OS=On([u,y]),d.exports&&(s=d.exports=at),s.UAParser=at;var Zi=ca&&(o.jQuery||o.Zepto);if(Zi&&!Zi.ua){var Pn=new at;Zi.ua=Pn.getResult(),Zi.ua.get=function(){return Pn.getUA()},Zi.ua.set=function(ie){Pn.setUA(ie);var ce=Pn.getResult();for(var ae in ce)Zi.ua[ae]=ce[ae]}}})(typeof window=="object"?window:vS)}(Us,Us.exports)),Us.exports}var ss={},cm;function Ze(){if(cm)return ss;cm=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.Logger=void 0;const d=bo(),s="mediasoup-client";class o{constructor(w){z(this,"_debug");z(this,"_warn");z(this,"_error");w?(this._debug=(0,d.default)(`${s}:${w}`),this._warn=(0,d.default)(`${s}:WARN:${w}`),this._error=(0,d.default)(`${s}:ERROR:${w}`)):(this._debug=(0,d.default)(s),this._warn=(0,d.default)(`${s}:WARN`),this._error=(0,d.default)(`${s}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}return ss.Logger=o,ss}var cs={},Fc={exports:{}},om;function SS(){if(om)return Fc.exports;om=1;var d=typeof Reflect=="object"?Reflect:null,s=d&&typeof d.apply=="function"?d.apply:function(m,y,v){return Function.prototype.apply.call(m,y,v)},o;d&&typeof d.ownKeys=="function"?o=d.ownKeys:Object.getOwnPropertySymbols?o=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:o=function(m){return Object.getOwnPropertyNames(m)};function a(p){console&&console.warn&&console.warn(p)}var w=Number.isNaN||function(m){return m!==m};function T(){T.init.call(this)}Fc.exports=T,Fc.exports.once=c,T.EventEmitter=T,T.prototype._events=void 0,T.prototype._eventsCount=0,T.prototype._maxListeners=void 0;var b=10;function E(p){if(typeof p!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof p)}Object.defineProperty(T,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(p){if(typeof p!="number"||p<0||w(p))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+p+".");b=p}}),T.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},T.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||w(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function M(p){return p._maxListeners===void 0?T.defaultMaxListeners:p._maxListeners}T.prototype.getMaxListeners=function(){return M(this)},T.prototype.emit=function(m){for(var y=[],v=1;v<arguments.length;v++)y.push(arguments[v]);var C=m==="error",S=this._events;if(S!==void 0)C=C&&S.error===void 0;else if(!C)return!1;if(C){var O;if(y.length>0&&(O=y[0]),O instanceof Error)throw O;var U=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw U.context=O,U}var I=S[m];if(I===void 0)return!1;if(typeof I=="function")s(I,this,y);else for(var A=I.length,Y=N(I,A),v=0;v<A;++v)s(Y[v],this,y);return!0};function R(p,m,y,v){var C,S,O;if(E(y),S=p._events,S===void 0?(S=p._events=Object.create(null),p._eventsCount=0):(S.newListener!==void 0&&(p.emit("newListener",m,y.listener?y.listener:y),S=p._events),O=S[m]),O===void 0)O=S[m]=y,++p._eventsCount;else if(typeof O=="function"?O=S[m]=v?[y,O]:[O,y]:v?O.unshift(y):O.push(y),C=M(p),C>0&&O.length>C&&!O.warned){O.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=p,U.type=m,U.count=O.length,a(U)}return p}T.prototype.addListener=function(m,y){return R(this,m,y,!1)},T.prototype.on=T.prototype.addListener,T.prototype.prependListener=function(m,y){return R(this,m,y,!0)};function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(p,m,y){var v={fired:!1,wrapFn:void 0,target:p,type:m,listener:y},C=x.bind(v);return C.listener=y,v.wrapFn=C,C}T.prototype.once=function(m,y){return E(y),this.on(m,_(this,m,y)),this},T.prototype.prependOnceListener=function(m,y){return E(y),this.prependListener(m,_(this,m,y)),this},T.prototype.removeListener=function(m,y){var v,C,S,O,U;if(E(y),C=this._events,C===void 0)return this;if(v=C[m],v===void 0)return this;if(v===y||v.listener===y)--this._eventsCount===0?this._events=Object.create(null):(delete C[m],C.removeListener&&this.emit("removeListener",m,v.listener||y));else if(typeof v!="function"){for(S=-1,O=v.length-1;O>=0;O--)if(v[O]===y||v[O].listener===y){U=v[O].listener,S=O;break}if(S<0)return this;S===0?v.shift():g(v,S),v.length===1&&(C[m]=v[0]),C.removeListener!==void 0&&this.emit("removeListener",m,U||y)}return this},T.prototype.off=T.prototype.removeListener,T.prototype.removeAllListeners=function(m){var y,v,C;if(v=this._events,v===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete v[m]),this;if(arguments.length===0){var S=Object.keys(v),O;for(C=0;C<S.length;++C)O=S[C],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(y=v[m],typeof y=="function")this.removeListener(m,y);else if(y!==void 0)for(C=y.length-1;C>=0;C--)this.removeListener(m,y[C]);return this};function L(p,m,y){var v=p._events;if(v===void 0)return[];var C=v[m];return C===void 0?[]:typeof C=="function"?y?[C.listener||C]:[C]:y?h(C):N(C,C.length)}T.prototype.listeners=function(m){return L(this,m,!0)},T.prototype.rawListeners=function(m){return L(this,m,!1)},T.listenerCount=function(p,m){return typeof p.listenerCount=="function"?p.listenerCount(m):k.call(p,m)},T.prototype.listenerCount=k;function k(p){var m=this._events;if(m!==void 0){var y=m[p];if(typeof y=="function")return 1;if(y!==void 0)return y.length}return 0}T.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function N(p,m){for(var y=new Array(m),v=0;v<m;++v)y[v]=p[v];return y}function g(p,m){for(;m+1<p.length;m++)p[m]=p[m+1];p.pop()}function h(p){for(var m=new Array(p.length),y=0;y<m.length;++y)m[y]=p[y].listener||p[y];return m}function c(p,m){return new Promise(function(y,v){function C(O){p.removeListener(m,S),v(O)}function S(){typeof p.removeListener=="function"&&p.removeListener("error",C),y([].slice.call(arguments))}u(p,m,S,{once:!0}),m!=="error"&&f(p,C,{once:!0})})}function f(p,m,y){typeof p.on=="function"&&u(p,"error",m,y)}function u(p,m,y,v){if(typeof p.on=="function")v.once?p.once(m,y):p.on(m,y);else if(typeof p.addEventListener=="function")p.addEventListener(m,function C(S){v.once&&p.removeEventListener(m,C),y(S)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof p)}return Fc.exports}var lm;function wn(){if(lm)return cs;lm=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.EnhancedEventEmitter=void 0;const d=SS(),s=Ze(),o=new s.Logger("EnhancedEventEmitter");class a extends d.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(T,...b){return super.emit(T,...b)}safeEmit(T,...b){try{return super.emit(T,...b)}catch(E){o.error("safeEmit() | event listener threw an error [eventName:%s]:%o",T,E);try{super.emit("listenererror",T,E)}catch{}return!!super.listenerCount(T)}}on(T,b){return super.on(T,b),this}off(T,b){return super.off(T,b),this}addListener(T,b){return super.on(T,b),this}prependListener(T,b){return super.prependListener(T,b),this}once(T,b){return super.once(T,b),this}prependOnceListener(T,b){return super.prependOnceListener(T,b),this}removeListener(T,b){return super.off(T,b),this}removeAllListeners(T){return super.removeAllListeners(T),this}listenerCount(T){return super.listenerCount(T)}listeners(T){return super.listeners(T)}rawListeners(T){return super.rawListeners(T)}}return cs.EnhancedEventEmitter=a,cs}var tr={},dm;function wt(){if(dm)return tr;dm=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.InvalidStateError=tr.UnsupportedError=void 0;class d extends Error{constructor(a){super(a),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,d):this.stack=new Error(a).stack}}tr.UnsupportedError=d;class s extends Error{constructor(a){super(a),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,s):this.stack=new Error(a).stack}}return tr.InvalidStateError=s,tr}var Qr={},um;function nt(){if(um)return Qr;um=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.clone=d,Qr.generateRandomNumber=s,Qr.deepFreeze=o;function d(a){if(a!==void 0)return Number.isNaN(a)?NaN:typeof structuredClone=="function"?structuredClone(a):JSON.parse(JSON.stringify(a))}function s(){return Math.round(Math.random()*1e7)}function o(a){const w=Reflect.ownKeys(a);for(const T of w){const b=a[T];(b&&typeof b=="object"||typeof b=="function")&&o(b)}return Object.freeze(a)}return Qr}var Dt={},dt={},ir={},fm;function bS(){if(fm)return ir;fm=1;var d=ir&&ir.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(ir,"__esModule",{value:!0}),ir.Logger=void 0;const s=d(bo()),o="h264-profile-level-id";class a{constructor(T){T?(this._debug=(0,s.default)(`${o}:${T}`),this._warn=(0,s.default)(`${o}:WARN:${T}`),this._error=(0,s.default)(`${o}:ERROR:${T}`)):(this._debug=(0,s.default)(o),this._warn=(0,s.default)(`${o}:WARN`),this._error=(0,s.default)(`${o}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}return ir.Logger=a,ir}var pm;function wS(){if(pm)return dt;pm=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.ProfileLevelId=dt.Level=dt.Profile=void 0,dt.parseProfileLevelId=x,dt.profileLevelIdToString=_,dt.profileToString=L,dt.levelToString=k,dt.parseSdpProfileLevelId=N,dt.isSameProfile=g,dt.isSameProfileAndLevel=h,dt.generateProfileLevelIdStringForAnswer=c,dt.supportedLevel=f;const d=bS(),s=new d.Logger;var o;(function(v){v[v.ConstrainedBaseline=1]="ConstrainedBaseline",v[v.Baseline=2]="Baseline",v[v.Main=3]="Main",v[v.ConstrainedHigh=4]="ConstrainedHigh",v[v.High=5]="High",v[v.PredictiveHigh444=6]="PredictiveHigh444"})(o||(dt.Profile=o={}));var a;(function(v){v[v.L1_b=0]="L1_b",v[v.L1=10]="L1",v[v.L1_1=11]="L1_1",v[v.L1_2=12]="L1_2",v[v.L1_3=13]="L1_3",v[v.L2=20]="L2",v[v.L2_1=21]="L2_1",v[v.L2_2=22]="L2_2",v[v.L3=30]="L3",v[v.L3_1=31]="L3_1",v[v.L3_2=32]="L3_2",v[v.L4=40]="L4",v[v.L4_1=41]="L4_1",v[v.L4_2=42]="L4_2",v[v.L5=50]="L5",v[v.L5_1=51]="L5_1",v[v.L5_2=52]="L5_2"})(a||(dt.Level=a={}));class w{constructor(C,S){this.profile=C,this.level=S}}dt.ProfileLevelId=w;const T=new w(o.ConstrainedBaseline,a.L3_1);class b{constructor(C){this.mask=~u("x",C),this.masked_value=u("1",C)}isMatch(C){return this.masked_value===(C&this.mask)}}class E{constructor(C,S,O){this.profile_idc=C,this.profile_iop=S,this.profile=O}}const M=[new E(66,new b("x1xx0000"),o.ConstrainedBaseline),new E(77,new b("1xxx0000"),o.ConstrainedBaseline),new E(88,new b("11xx0000"),o.ConstrainedBaseline),new E(66,new b("x0xx0000"),o.Baseline),new E(88,new b("10xx0000"),o.Baseline),new E(77,new b("0x0x0000"),o.Main),new E(100,new b("00000000"),o.High),new E(100,new b("00001100"),o.ConstrainedHigh),new E(244,new b("00000000"),o.PredictiveHigh444)],R=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:a.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:a.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:a.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:a.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:a.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:a.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:a.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:a.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:a.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:a.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:a.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:a.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:a.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:a.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:a.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:a.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:a.L5_2}];function x(v){if(typeof v!="string"||v.length!==6)return;const S=parseInt(v,16);if(S===0)return;const O=S&255,U=S>>8&255,I=S>>16&255;let A;switch(O){case a.L1_1:{A=(U&16)!==0?a.L1_b:a.L1_1;break}case a.L1:case a.L1_2:case a.L1_3:case a.L2:case a.L2_1:case a.L2_2:case a.L3:case a.L3_1:case a.L3_2:case a.L4:case a.L4_1:case a.L4_2:case a.L5:case a.L5_1:case a.L5_2:{A=O;break}default:{s.warn(`parseProfileLevelId() | unrecognized level_idc [str:${v}, level_idc:${O}]`);return}}for(const Y of M)if(I===Y.profile_idc&&Y.profile_iop.isMatch(U))return s.debug(`parseProfileLevelId() | result [str:${v}, profile:${Y.profile}, level:${A}]`),new w(Y.profile,A);s.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${v}, profile_idc:${I}, profile_iop:${U}]`)}function _(v){if(v.level==a.L1_b)switch(v.profile){case o.ConstrainedBaseline:return"42f00b";case o.Baseline:return"42100b";case o.Main:return"4d100b";default:{s.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${v.profile}`);return}}let C;switch(v.profile){case o.ConstrainedBaseline:{C="42e0";break}case o.Baseline:{C="4200";break}case o.Main:{C="4d00";break}case o.ConstrainedHigh:{C="640c";break}case o.High:{C="6400";break}case o.PredictiveHigh444:{C="f400";break}default:{s.warn(`profileLevelIdToString() | unrecognized profile ${v.profile}`);return}}let S=v.level.toString(16);return S.length===1&&(S=`0${S}`),`${C}${S}`}function L(v){switch(v){case o.ConstrainedBaseline:return"ConstrainedBaseline";case o.Baseline:return"Baseline";case o.Main:return"Main";case o.ConstrainedHigh:return"ConstrainedHigh";case o.High:return"High";case o.PredictiveHigh444:return"PredictiveHigh444";default:{s.warn(`profileToString() | unrecognized profile ${v}`);return}}}function k(v){switch(v){case a.L1_b:return"1b";case a.L1:return"1";case a.L1_1:return"1.1";case a.L1_2:return"1.2";case a.L1_3:return"1.3";case a.L2:return"2";case a.L2_1:return"2.1";case a.L2_2:return"2.2";case a.L3:return"3";case a.L3_1:return"3.1";case a.L3_2:return"3.2";case a.L4:return"4";case a.L4_1:return"4.1";case a.L4_2:return"4.2";case a.L5:return"5";case a.L5_1:return"5.1";case a.L5_2:return"5.2";default:{s.warn(`levelToString() | unrecognized level ${v}`);return}}}function N(v={}){const C=v["profile-level-id"];return C?x(C):T}function g(v={},C={}){const S=N(v),O=N(C);return!!(S&&O&&S.profile===O.profile)}function h(v={},C={}){const S=N(v),O=N(C);return!!(S&&O&&S.profile===O.profile&&S.level==O.level)}function c(v={},C={}){if(!v["profile-level-id"]&&!C["profile-level-id"]){s.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");return}const S=N(v),O=N(C);if(!S)throw new TypeError("invalid local_profile_level_id");if(!O)throw new TypeError("invalid remote_profile_level_id");if(S.profile!==O.profile)throw new TypeError("H264 Profile mismatch");const U=y(v)&&y(C),I=S.level,A=O.level,Y=m(I,A),Z=U?I:Y;return s.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${S.profile}, level:${Z}]`),_(new w(S.profile,Z))}function f(v,C){for(let O=R.length-1;O>=0;--O){const U=R[O];if(U.max_macroblock_frame_size*256<=v&&U.max_macroblocks_per_second<=C*U.max_macroblock_frame_size)return s.debug(`supportedLevel() | result [max_frame_pixel_count:${v}, max_fps:${C}, level:${U.level}]`),U.level}s.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${v}, max_fps:${C}]`)}function u(v,C){return+(C[0]===v)<<7|+(C[1]===v)<<6|+(C[2]===v)<<5|+(C[3]===v)<<4|+(C[4]===v)<<3|+(C[5]===v)<<2|+(C[6]===v)<<1|+(C[7]===v)<<0}function p(v,C){return v===a.L1_b?C!==a.L1&&C!==a.L1_b:C===a.L1_b?v!==a.L1:v<C}function m(v,C){return p(v,C)?v:C}function y(v={}){const C=v["level-asymmetry-allowed"];return C===!0||C===1||C==="1"}return dt}var hm;function Rt(){if(hm)return Dt;hm=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.validateRtpCapabilities=T,Dt.validateRtpParameters=b,Dt.validateSctpStreamParameters=E,Dt.validateSctpCapabilities=M,Dt.getExtendedRtpCapabilities=R,Dt.getRecvRtpCapabilities=x,Dt.getSendingRtpParameters=_,Dt.getSendingRemoteRtpParameters=L,Dt.reduceCodecs=k,Dt.generateProbatorRtpParameters=N,Dt.canSend=g,Dt.canReceive=h;const d=wS(),s=nt(),o="probator",a=1234,w=127;function T(A){if(typeof A!="object")throw new TypeError("caps is not an object");if(A.codecs&&!Array.isArray(A.codecs))throw new TypeError("caps.codecs is not an array");A.codecs||(A.codecs=[]);for(const Y of A.codecs)c(Y);if(A.headerExtensions&&!Array.isArray(A.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");A.headerExtensions||(A.headerExtensions=[]);for(const Y of A.headerExtensions)u(Y)}function b(A){if(typeof A!="object")throw new TypeError("params is not an object");if(A.mid&&typeof A.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(A.codecs))throw new TypeError("missing params.codecs");for(const Y of A.codecs)p(Y);if(A.headerExtensions&&!Array.isArray(A.headerExtensions))throw new TypeError("params.headerExtensions is not an array");A.headerExtensions||(A.headerExtensions=[]);for(const Y of A.headerExtensions)m(Y);if(A.encodings&&!Array.isArray(A.encodings))throw new TypeError("params.encodings is not an array");A.encodings||(A.encodings=[]);for(const Y of A.encodings)y(Y);if(A.rtcp&&typeof A.rtcp!="object")throw new TypeError("params.rtcp is not an object");A.rtcp||(A.rtcp={}),v(A.rtcp)}function E(A){if(typeof A!="object")throw new TypeError("params is not an object");if(typeof A.streamId!="number")throw new TypeError("missing params.streamId");let Y=!1;if(typeof A.ordered=="boolean"?Y=!0:A.ordered=!0,A.maxPacketLifeTime&&typeof A.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(A.maxRetransmits&&typeof A.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(A.maxPacketLifeTime&&A.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(Y&&A.ordered&&(A.maxPacketLifeTime||A.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!Y&&(A.maxPacketLifeTime||A.maxRetransmits)&&(A.ordered=!1),A.label&&typeof A.label!="string")throw new TypeError("invalid params.label");if(A.protocol&&typeof A.protocol!="string")throw new TypeError("invalid params.protocol")}function M(A){if(typeof A!="object")throw new TypeError("caps is not an object");if(!A.numStreams||typeof A.numStreams!="object")throw new TypeError("missing caps.numStreams");C(A.numStreams)}function R(A,Y,Z){const j={codecs:[],headerExtensions:[]};if(Z)for(const V of A.codecs??[]){if(S(V))continue;const te=(Y.codecs??[]).find(q=>O(q,V,{strict:!0,modify:!0}));if(!te)continue;const le={mimeType:V.mimeType,kind:V.kind,clockRate:V.clockRate,channels:V.channels,localPayloadType:V.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:te.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:V.parameters,remoteParameters:te.parameters,rtcpFeedback:I(V,te)};j.codecs.push(le)}else for(const V of Y.codecs??[]){if(S(V))continue;const te=(A.codecs??[]).find(q=>O(q,V,{strict:!0,modify:!0}));if(!te)continue;const le={mimeType:te.mimeType,kind:te.kind,clockRate:te.clockRate,channels:te.channels,localPayloadType:te.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:V.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:te.parameters,remoteParameters:V.parameters,rtcpFeedback:I(te,V)};j.codecs.push(le)}for(const V of j.codecs){const te=A.codecs.find(q=>S(q)&&q.parameters.apt===V.localPayloadType),le=Y.codecs.find(q=>S(q)&&q.parameters.apt===V.remotePayloadType);te&&le&&(V.localRtxPayloadType=te.preferredPayloadType,V.remoteRtxPayloadType=le.preferredPayloadType)}for(const V of Y.headerExtensions){const te=A.headerExtensions.find(q=>U(q,V));if(!te)continue;const le={kind:V.kind,uri:V.uri,sendId:te.preferredId,recvId:V.preferredId,encrypt:te.preferredEncrypt,direction:"sendrecv"};switch(V.direction){case"sendrecv":{le.direction="sendrecv";break}case"recvonly":{le.direction="sendonly";break}case"sendonly":{le.direction="recvonly";break}case"inactive":{le.direction="inactive";break}}j.headerExtensions.push(le)}return j}function x(A){const Y={codecs:[],headerExtensions:[]};for(const Z of A.codecs){const j={mimeType:Z.mimeType,kind:Z.kind,preferredPayloadType:Z.remotePayloadType,clockRate:Z.clockRate,channels:Z.channels,parameters:Z.localParameters,rtcpFeedback:Z.rtcpFeedback};if(Y.codecs.push(j),!Z.remoteRtxPayloadType)continue;const V={mimeType:`${Z.kind}/rtx`,kind:Z.kind,preferredPayloadType:Z.remoteRtxPayloadType,clockRate:Z.clockRate,parameters:{apt:Z.remotePayloadType},rtcpFeedback:[]};Y.codecs.push(V)}for(const Z of A.headerExtensions){if(Z.direction!=="sendrecv"&&Z.direction!=="recvonly")continue;const j={kind:Z.kind,uri:Z.uri,preferredId:Z.recvId,preferredEncrypt:Z.encrypt,direction:Z.direction};Y.headerExtensions.push(j)}return Y}function _(A,Y){const Z={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const j of Y.codecs){if(j.kind!==A)continue;const V={mimeType:j.mimeType,payloadType:j.localPayloadType,clockRate:j.clockRate,channels:j.channels,parameters:j.localParameters,rtcpFeedback:j.rtcpFeedback};if(Z.codecs.push(V),j.localRtxPayloadType){const te={mimeType:`${j.kind}/rtx`,payloadType:j.localRtxPayloadType,clockRate:j.clockRate,parameters:{apt:j.localPayloadType},rtcpFeedback:[]};Z.codecs.push(te)}}for(const j of Y.headerExtensions){if(j.kind&&j.kind!==A||j.direction!=="sendrecv"&&j.direction!=="sendonly")continue;const V={uri:j.uri,id:j.sendId,encrypt:j.encrypt,parameters:{}};Z.headerExtensions.push(V)}return Z}function L(A,Y){const Z={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const j of Y.codecs){if(j.kind!==A)continue;const V={mimeType:j.mimeType,payloadType:j.localPayloadType,clockRate:j.clockRate,channels:j.channels,parameters:j.remoteParameters,rtcpFeedback:j.rtcpFeedback};if(Z.codecs.push(V),j.localRtxPayloadType){const te={mimeType:`${j.kind}/rtx`,payloadType:j.localRtxPayloadType,clockRate:j.clockRate,parameters:{apt:j.localPayloadType},rtcpFeedback:[]};Z.codecs.push(te)}}for(const j of Y.headerExtensions){if(j.kind&&j.kind!==A||j.direction!=="sendrecv"&&j.direction!=="sendonly")continue;const V={uri:j.uri,id:j.sendId,encrypt:j.encrypt,parameters:{}};Z.headerExtensions.push(V)}if(Z.headerExtensions.some(j=>j.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const j of Z.codecs)j.rtcpFeedback=(j.rtcpFeedback??[]).filter(V=>V.type!=="goog-remb");else if(Z.headerExtensions.some(j=>j.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const j of Z.codecs)j.rtcpFeedback=(j.rtcpFeedback??[]).filter(V=>V.type!=="transport-cc");else for(const j of Z.codecs)j.rtcpFeedback=(j.rtcpFeedback??[]).filter(V=>V.type!=="transport-cc"&&V.type!=="goog-remb");return Z}function k(A,Y){const Z=[];if(!Y)Z.push(A[0]),S(A[1])&&Z.push(A[1]);else{for(let j=0;j<A.length;++j)if(O(A[j],Y,{strict:!0})){Z.push(A[j]),S(A[j+1])&&Z.push(A[j+1]);break}if(Z.length===0)throw new TypeError("no matching codec found")}return Z}function N(A){A=s.clone(A),b(A);const Y={mid:o,codecs:[],headerExtensions:[],encodings:[{ssrc:a}],rtcp:{cname:"probator"}};return Y.codecs.push(A.codecs[0]),Y.codecs[0].payloadType=w,Y.headerExtensions=A.headerExtensions,Y}function g(A,Y){return Y.codecs.some(Z=>Z.kind===A)}function h(A,Y){if(b(A),A.codecs.length===0)return!1;const Z=A.codecs[0];return Y.codecs.some(j=>j.remotePayloadType===Z.payloadType)}function c(A){const Y=new RegExp("^(audio|video)/(.+)","i");if(typeof A!="object")throw new TypeError("codec is not an object");if(!A.mimeType||typeof A.mimeType!="string")throw new TypeError("missing codec.mimeType");const Z=Y.exec(A.mimeType);if(!Z)throw new TypeError("invalid codec.mimeType");if(A.kind=Z[1].toLowerCase(),A.preferredPayloadType&&typeof A.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof A.clockRate!="number")throw new TypeError("missing codec.clockRate");A.kind==="audio"?typeof A.channels!="number"&&(A.channels=1):delete A.channels,(!A.parameters||typeof A.parameters!="object")&&(A.parameters={});for(const j of Object.keys(A.parameters)){let V=A.parameters[j];if(V===void 0&&(A.parameters[j]="",V=""),typeof V!="string"&&typeof V!="number")throw new TypeError(`invalid codec parameter [key:${j}s, value:${V}]`);if(j==="apt"&&typeof V!="number")throw new TypeError("invalid codec apt parameter")}(!A.rtcpFeedback||!Array.isArray(A.rtcpFeedback))&&(A.rtcpFeedback=[]);for(const j of A.rtcpFeedback)f(j)}function f(A){if(typeof A!="object")throw new TypeError("fb is not an object");if(!A.type||typeof A.type!="string")throw new TypeError("missing fb.type");(!A.parameter||typeof A.parameter!="string")&&(A.parameter="")}function u(A){if(typeof A!="object")throw new TypeError("ext is not an object");if(A.kind!=="audio"&&A.kind!=="video")throw new TypeError("invalid ext.kind");if(!A.uri||typeof A.uri!="string")throw new TypeError("missing ext.uri");if(typeof A.preferredId!="number")throw new TypeError("missing ext.preferredId");if(A.preferredEncrypt&&typeof A.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(A.preferredEncrypt||(A.preferredEncrypt=!1),A.direction&&typeof A.direction!="string")throw new TypeError("invalid ext.direction");A.direction||(A.direction="sendrecv")}function p(A){const Y=new RegExp("^(audio|video)/(.+)","i");if(typeof A!="object")throw new TypeError("codec is not an object");if(!A.mimeType||typeof A.mimeType!="string")throw new TypeError("missing codec.mimeType");const Z=Y.exec(A.mimeType);if(!Z)throw new TypeError("invalid codec.mimeType");if(typeof A.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof A.clockRate!="number")throw new TypeError("missing codec.clockRate");Z[1].toLowerCase()==="audio"?typeof A.channels!="number"&&(A.channels=1):delete A.channels,(!A.parameters||typeof A.parameters!="object")&&(A.parameters={});for(const V of Object.keys(A.parameters)){let te=A.parameters[V];if(te===void 0&&(A.parameters[V]="",te=""),typeof te!="string"&&typeof te!="number")throw new TypeError(`invalid codec parameter [key:${V}s, value:${te}]`);if(V==="apt"&&typeof te!="number")throw new TypeError("invalid codec apt parameter")}(!A.rtcpFeedback||!Array.isArray(A.rtcpFeedback))&&(A.rtcpFeedback=[]);for(const V of A.rtcpFeedback)f(V)}function m(A){if(typeof A!="object")throw new TypeError("ext is not an object");if(!A.uri||typeof A.uri!="string")throw new TypeError("missing ext.uri");if(typeof A.id!="number")throw new TypeError("missing ext.id");if(A.encrypt&&typeof A.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");A.encrypt||(A.encrypt=!1),(!A.parameters||typeof A.parameters!="object")&&(A.parameters={});for(const Y of Object.keys(A.parameters)){let Z=A.parameters[Y];if(Z===void 0&&(A.parameters[Y]="",Z=""),typeof Z!="string"&&typeof Z!="number")throw new TypeError("invalid header extension parameter")}}function y(A){if(typeof A!="object")throw new TypeError("encoding is not an object");if(A.ssrc&&typeof A.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(A.rid&&typeof A.rid!="string")throw new TypeError("invalid encoding.rid");if(A.rtx&&typeof A.rtx!="object")throw new TypeError("invalid encoding.rtx");if(A.rtx&&typeof A.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!A.dtx||typeof A.dtx!="boolean")&&(A.dtx=!1),A.scalabilityMode&&typeof A.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function v(A){if(typeof A!="object")throw new TypeError("rtcp is not an object");if(A.cname&&typeof A.cname!="string")throw new TypeError("invalid rtcp.cname");(!A.reducedSize||typeof A.reducedSize!="boolean")&&(A.reducedSize=!0)}function C(A){if(typeof A!="object")throw new TypeError("numStreams is not an object");if(typeof A.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof A.MIS!="number")throw new TypeError("missing numStreams.MIS")}function S(A){return A?/.+\/rtx$/i.test(A.mimeType):!1}function O(A,Y,{strict:Z=!1,modify:j=!1}={}){const V=A.mimeType.toLowerCase(),te=Y.mimeType.toLowerCase();if(V!==te||A.clockRate!==Y.clockRate||A.channels!==Y.channels)return!1;switch(V){case"video/h264":{if(Z){const le=A.parameters["packetization-mode"]??0,q=Y.parameters["packetization-mode"]??0;if(le!==q||!d.isSameProfile(A.parameters,Y.parameters))return!1;let W;try{W=d.generateProfileLevelIdStringForAnswer(A.parameters,Y.parameters)}catch{return!1}j&&(W?(A.parameters["profile-level-id"]=W,Y.parameters["profile-level-id"]=W):(delete A.parameters["profile-level-id"],delete Y.parameters["profile-level-id"]))}break}case"video/vp9":{if(Z){const le=A.parameters["profile-id"]??0,q=Y.parameters["profile-id"]??0;if(le!==q)return!1}break}}return!0}function U(A,Y){return!(A.kind&&Y.kind&&A.kind!==Y.kind||A.uri!==Y.uri)}function I(A,Y){const Z=[];for(const j of A.rtcpFeedback??[]){const V=(Y.rtcpFeedback??[]).find(te=>te.type===j.type&&(te.parameter===j.parameter||!te.parameter&&!j.parameter));V&&Z.push(V)}return Z}return Dt}var os={},Id={},ls={},ds={},mm;function RS(){if(mm)return ds;mm=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.Logger=void 0;const d=bo(),s="awaitqueue";let o=class{constructor(w){z(this,"_debug");z(this,"_warn");z(this,"_error");w?(this._debug=d(`${s}:${w}`),this._warn=d(`${s}:WARN:${w}`),this._error=d(`${s}:ERROR:${w}`)):(this._debug=d(s),this._warn=d(`${s}:WARN`),this._error=d(`${s}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};return ds.Logger=o,ds}var nr={},gm;function Bg(){if(gm)return nr;gm=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.AwaitQueueRemovedTaskError=nr.AwaitQueueStoppedError=void 0;class d extends Error{constructor(a){super(a??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,d)}}nr.AwaitQueueStoppedError=d;class s extends Error{constructor(a){super(a??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,s)}}return nr.AwaitQueueRemovedTaskError=s,nr}var _m;function TS(){if(_m)return ls;_m=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.AwaitQueue=void 0;const d=RS(),s=Bg(),o=new d.Logger("AwaitQueue");let a=class{constructor(){z(this,"pendingTasks",new Map);z(this,"nextTaskId",0);z(this,"stopping",!1);o.debug("constructor()")}get size(){return this.pendingTasks.size}async push(T,b){if(b=b??T.name,o.debug(`push() [name:${b}]`),typeof T!="function")throw new TypeError("given task is not a function");if(b)try{Object.defineProperty(T,"name",{value:b})}catch{}return new Promise((E,M)=>{const R={id:this.nextTaskId++,task:T,name:b,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:x=>{if(R.completed)return;R.completed=!0,this.pendingTasks.delete(R.id),o.debug(`resolving task [name:${R.name}]`),E(x);const[_]=this.pendingTasks.values();_&&!_.executedAt&&this.execute(_)},reject:x=>{if(!R.completed&&(R.completed=!0,this.pendingTasks.delete(R.id),o.debug(`rejecting task [name:${R.name}]: %s`,String(x)),M(x),!this.stopping)){const[_]=this.pendingTasks.values();_&&!_.executedAt&&this.execute(_)}}};this.pendingTasks.set(R.id,R),this.pendingTasks.size===1&&this.execute(R)})}stop(){o.debug("stop()"),this.stopping=!0;for(const T of this.pendingTasks.values())o.debug(`stop() | stopping task [name:${T.name}]`),T.reject(new s.AwaitQueueStoppedError);this.stopping=!1}remove(T){o.debug(`remove() [taskIdx:${T}]`);const b=Array.from(this.pendingTasks.values())[T];if(!b){o.debug(`stop() | no task with given idx [taskIdx:${T}]`);return}b.reject(new s.AwaitQueueRemovedTaskError)}dump(){const T=Date.now();let b=0;return Array.from(this.pendingTasks.values()).map(E=>({idx:b++,task:E.task,name:E.name,enqueuedTime:E.executedAt?E.executedAt-E.enqueuedAt:T-E.enqueuedAt,executionTime:E.executedAt?T-E.executedAt:0}))}async execute(T){if(o.debug(`execute() [name:${T.name}]`),T.executedAt)throw new Error("task already being executed");T.executedAt=Date.now();try{const b=await T.task();T.resolve(b)}catch(b){T.reject(b)}}};return ls.AwaitQueue=a,ls}var vm;function CS(){return vm||(vm=1,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.AwaitQueueRemovedTaskError=d.AwaitQueueStoppedError=d.AwaitQueue=void 0;var s=TS();Object.defineProperty(d,"AwaitQueue",{enumerable:!0,get:function(){return s.AwaitQueue}});var o=Bg();Object.defineProperty(d,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return o.AwaitQueueStoppedError}}),Object.defineProperty(d,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return o.AwaitQueueRemovedTaskError}})}(Id)),Id}var us={},ym;function qg(){if(ym)return us;ym=1,Object.defineProperty(us,"__esModule",{value:!0}),us.Producer=void 0;const d=Ze(),s=wn(),o=wt(),a=new d.Logger("Producer");let w=class extends s.EnhancedEventEmitter{constructor({id:E,localId:M,rtpSender:R,track:x,rtpParameters:_,stopTracks:L,disableTrackOnPause:k,zeroRtpOnPause:N,appData:g}){super();z(this,"_id");z(this,"_localId");z(this,"_closed",!1);z(this,"_rtpSender");z(this,"_track");z(this,"_kind");z(this,"_rtpParameters");z(this,"_paused");z(this,"_maxSpatialLayer");z(this,"_stopTracks");z(this,"_disableTrackOnPause");z(this,"_zeroRtpOnPause");z(this,"_appData");z(this,"_observer",new s.EnhancedEventEmitter);a.debug("constructor()"),this._id=E,this._localId=M,this._rtpSender=R,this._track=x,this._kind=x.kind,this._rtpParameters=_,this._paused=k?!x.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=L,this._disableTrackOnPause=k,this._zeroRtpOnPause=N,this._appData=g??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(E){this._appData=E}get observer(){return this._observer}close(){this._closed||(a.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(a.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new o.InvalidStateError("closed");return new Promise((E,M)=>{this.safeEmit("@getstats",E,M)})}pause(){if(a.debug("pause()"),this._closed){a.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((E,M)=>{this.safeEmit("@pause",E,M)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(a.debug("resume()"),this._closed){a.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((E,M)=>{this.safeEmit("@resume",E,M)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:E}){if(a.debug("replaceTrack() [track:%o]",E),this._closed){if(E&&this._stopTracks)try{E.stop()}catch{}throw new o.InvalidStateError("closed")}else if(E&&E.readyState==="ended")throw new o.InvalidStateError("track ended");if(E===this._track){a.debug("replaceTrack() | same track, ignored");return}await new Promise((M,R)=>{this.safeEmit("@replacetrack",E,M,R)}),this.destroyTrack(),this._track=E,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(E){if(this._closed)throw new o.InvalidStateError("closed");if(this._kind!=="video")throw new o.UnsupportedError("not a video Producer");if(typeof E!="number")throw new TypeError("invalid spatialLayer");E!==this._maxSpatialLayer&&(await new Promise((M,R)=>{this.safeEmit("@setmaxspatiallayer",E,M,R)}).catch(()=>{}),this._maxSpatialLayer=E)}async setRtpEncodingParameters(E){if(this._closed)throw new o.InvalidStateError("closed");if(typeof E!="object")throw new TypeError("invalid params");await new Promise((M,R)=>{this.safeEmit("@setrtpencodingparameters",E,M,R)})}onTrackEnded(){a.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};return us.Producer=w,us}var fs={},Sm;function Ig(){if(Sm)return fs;Sm=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.Consumer=void 0;const d=Ze(),s=wn(),o=wt(),a=new d.Logger("Consumer");let w=class extends s.EnhancedEventEmitter{constructor({id:E,localId:M,producerId:R,rtpReceiver:x,track:_,rtpParameters:L,appData:k}){super();z(this,"_id");z(this,"_localId");z(this,"_producerId");z(this,"_closed",!1);z(this,"_rtpReceiver");z(this,"_track");z(this,"_rtpParameters");z(this,"_paused");z(this,"_appData");z(this,"_observer",new s.EnhancedEventEmitter);a.debug("constructor()"),this._id=E,this._localId=M,this._producerId=R,this._rtpReceiver=x,this._track=_,this._rtpParameters=L,this._paused=!_.enabled,this._appData=k??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(E){this._appData=E}get observer(){return this._observer}close(){this._closed||(a.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(a.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new o.InvalidStateError("closed");return new Promise((E,M)=>{this.safeEmit("@getstats",E,M)})}pause(){if(a.debug("pause()"),this._closed){a.error("pause() | Consumer closed");return}if(this._paused){a.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(a.debug("resume()"),this._closed){a.error("resume() | Consumer closed");return}if(!this._paused){a.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){a.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};return fs.Consumer=w,fs}var ps={},bm;function Hg(){if(bm)return ps;bm=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.DataProducer=void 0;const d=Ze(),s=wn(),o=wt(),a=new d.Logger("DataProducer");let w=class extends s.EnhancedEventEmitter{constructor({id:E,dataChannel:M,sctpStreamParameters:R,appData:x}){super();z(this,"_id");z(this,"_dataChannel");z(this,"_closed",!1);z(this,"_sctpStreamParameters");z(this,"_appData");z(this,"_observer",new s.EnhancedEventEmitter);a.debug("constructor()"),this._id=E,this._dataChannel=M,this._sctpStreamParameters=R,this._appData=x??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(E){this._dataChannel.bufferedAmountLowThreshold=E}get appData(){return this._appData}set appData(E){this._appData=E}get observer(){return this._observer}close(){this._closed||(a.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(a.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(E){if(a.debug("send()"),this._closed)throw new o.InvalidStateError("closed");this._dataChannel.send(E)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(a.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",E=>{if(this._closed)return;let{error:M}=E;M||(M=new Error("unknown DataChannel error")),M.errorDetail==="sctp-failure"?a.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",M.sctpCauseCode,M.message):a.error('DataChannel "error" event: %o',M),this.safeEmit("error",M)}),this._dataChannel.addEventListener("close",()=>{this._closed||(a.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||a.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}};return ps.DataProducer=w,ps}var hs={},wm;function Vg(){if(wm)return hs;wm=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.DataConsumer=void 0;const d=Ze(),s=wn(),o=new d.Logger("DataConsumer");let a=class extends s.EnhancedEventEmitter{constructor({id:b,dataProducerId:E,dataChannel:M,sctpStreamParameters:R,appData:x}){super();z(this,"_id");z(this,"_dataProducerId");z(this,"_dataChannel");z(this,"_closed",!1);z(this,"_sctpStreamParameters");z(this,"_appData");z(this,"_observer",new s.EnhancedEventEmitter);o.debug("constructor()"),this._id=b,this._dataProducerId=E,this._dataChannel=M,this._sctpStreamParameters=R,this._appData=x??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(b){this._dataChannel.binaryType=b}get appData(){return this._appData}set appData(b){this._appData=b}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(o.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",b=>{if(this._closed)return;let{error:E}=b;E||(E=new Error("unknown DataChannel error")),E.errorDetail==="sctp-failure"?o.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",E.sctpCauseCode,E.message):o.error('DataChannel "error" event: %o',E),this.safeEmit("error",E)}),this._dataChannel.addEventListener("close",()=>{this._closed||(o.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",b=>{this._closed||this.safeEmit("message",b.data)})}};return hs.DataConsumer=a,hs}var Rm;function Gg(){if(Rm)return os;Rm=1,Object.defineProperty(os,"__esModule",{value:!0}),os.Transport=void 0;const d=CS(),s=Ze(),o=wn(),a=wt(),w=nt(),T=Rt(),b=qg(),E=Ig(),M=Hg(),R=Vg(),x=new s.Logger("Transport");class _{constructor(N){z(this,"consumerOptions");z(this,"promise");z(this,"resolve");z(this,"reject");this.consumerOptions=N,this.promise=new Promise((g,h)=>{this.resolve=g,this.reject=h})}}let L=class extends o.EnhancedEventEmitter{constructor({direction:g,id:h,iceParameters:c,iceCandidates:f,dtlsParameters:u,sctpParameters:p,iceServers:m,iceTransportPolicy:y,additionalSettings:v,proprietaryConstraints:C,appData:S,handlerFactory:O,extendedRtpCapabilities:U,canProduceByKind:I}){super();z(this,"_id");z(this,"_closed",!1);z(this,"_direction");z(this,"_extendedRtpCapabilities");z(this,"_canProduceByKind");z(this,"_maxSctpMessageSize");z(this,"_handler");z(this,"_iceGatheringState","new");z(this,"_connectionState","new");z(this,"_appData");z(this,"_producers",new Map);z(this,"_consumers",new Map);z(this,"_dataProducers",new Map);z(this,"_dataConsumers",new Map);z(this,"_probatorConsumerCreated",!1);z(this,"_awaitQueue",new d.AwaitQueue);z(this,"_pendingConsumerTasks",[]);z(this,"_consumerCreationInProgress",!1);z(this,"_pendingPauseConsumers",new Map);z(this,"_consumerPauseInProgress",!1);z(this,"_pendingResumeConsumers",new Map);z(this,"_consumerResumeInProgress",!1);z(this,"_pendingCloseConsumers",new Map);z(this,"_consumerCloseInProgress",!1);z(this,"_observer",new o.EnhancedEventEmitter);x.debug("constructor() [id:%s, direction:%s]",h,g),this._id=h,this._direction=g,this._extendedRtpCapabilities=U,this._canProduceByKind=I,this._maxSctpMessageSize=p?p.maxMessageSize:null;const A=w.clone(v)??{};delete A.iceServers,delete A.iceTransportPolicy,delete A.bundlePolicy,delete A.rtcpMuxPolicy,delete A.sdpSemantics,this._handler=O(),this._handler.run({direction:g,iceParameters:c,iceCandidates:f,dtlsParameters:u,sctpParameters:p,iceServers:m,iceTransportPolicy:y,additionalSettings:A,proprietaryConstraints:C,extendedRtpCapabilities:U}),this._appData=S??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){if(!this._closed){x.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const g of this._producers.values())g.transportClosed();this._producers.clear();for(const g of this._consumers.values())g.transportClosed();this._consumers.clear();for(const g of this._dataProducers.values())g.transportClosed();this._dataProducers.clear();for(const g of this._dataConsumers.values())g.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new a.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:g}){if(x.debug("restartIce()"),this._closed)throw new a.InvalidStateError("closed");if(!g)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(g),"transport.restartIce()")}async updateIceServers({iceServers:g}={}){if(x.debug("updateIceServers()"),this._closed)throw new a.InvalidStateError("closed");if(!Array.isArray(g))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(g),"transport.updateIceServers()")}async produce({track:g,encodings:h,codecOptions:c,codec:f,stopTracks:u=!0,disableTrackOnPause:p=!0,zeroRtpOnPause:m=!1,onRtpSender:y,appData:v={}}={}){if(x.debug("produce() [track:%o]",g),this._closed)throw new a.InvalidStateError("closed");if(g){if(this._direction!=="send")throw new a.UnsupportedError("not a sending Transport");if(this._canProduceByKind[g.kind]){if(g.readyState==="ended")throw new a.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(v&&typeof v!="object")throw new TypeError("if given, appData must be an object")}else throw new a.UnsupportedError(`cannot produce ${g.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let C;if(h&&!Array.isArray(h))throw TypeError("encodings must be an array");h&&h.length===0?C=void 0:h&&(C=h.map(I=>{const A={active:!0};return I.active===!1&&(A.active=!1),typeof I.dtx=="boolean"&&(A.dtx=I.dtx),typeof I.scalabilityMode=="string"&&(A.scalabilityMode=I.scalabilityMode),typeof I.scaleResolutionDownBy=="number"&&(A.scaleResolutionDownBy=I.scaleResolutionDownBy),typeof I.maxBitrate=="number"&&(A.maxBitrate=I.maxBitrate),typeof I.maxFramerate=="number"&&(A.maxFramerate=I.maxFramerate),typeof I.adaptivePtime=="boolean"&&(A.adaptivePtime=I.adaptivePtime),typeof I.priority=="string"&&(A.priority=I.priority),typeof I.networkPriority=="string"&&(A.networkPriority=I.networkPriority),A}));const{localId:S,rtpParameters:O,rtpSender:U}=await this._handler.send({track:g,encodings:C,codecOptions:c,codec:f,onRtpSender:y});try{T.validateRtpParameters(O);const{id:I}=await new Promise((Y,Z)=>{this.safeEmit("produce",{kind:g.kind,rtpParameters:O,appData:v},Y,Z)}),A=new b.Producer({id:I,localId:S,rtpSender:U,track:g,rtpParameters:O,stopTracks:u,disableTrackOnPause:p,zeroRtpOnPause:m,appData:v});return this._producers.set(A.id,A),this.handleProducer(A),this._observer.safeEmit("newproducer",A),A}catch(I){throw this._handler.stopSending(S).catch(()=>{}),I}},"transport.produce()").catch(C=>{if(u)try{g.stop()}catch{}throw C})}async consume({id:g,producerId:h,kind:c,rtpParameters:f,streamId:u,onRtpReceiver:p,appData:m={}}){if(x.debug("consume()"),this._closed)throw new a.InvalidStateError("closed");if(this._direction!=="recv")throw new a.UnsupportedError("not a receiving Transport");if(typeof g!="string")throw new TypeError("missing id");if(typeof h!="string")throw new TypeError("missing producerId");if(c!=="audio"&&c!=="video")throw new TypeError(`invalid kind '${c}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(m&&typeof m!="object")throw new TypeError("if given, appData must be an object");const y=w.clone(f);if(!T.canReceive(y,this._extendedRtpCapabilities))throw new a.UnsupportedError("cannot consume this Producer");const C=new _({id:g,producerId:h,kind:c,rtpParameters:y,streamId:u,onRtpReceiver:p,appData:m});return this._pendingConsumerTasks.push(C),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),C.promise}async produceData({ordered:g=!0,maxPacketLifeTime:h,maxRetransmits:c,label:f="",protocol:u="",appData:p={}}={}){if(x.debug("produceData()"),this._closed)throw new a.InvalidStateError("closed");if(this._direction!=="send")throw new a.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(p&&typeof p!="object")throw new TypeError("if given, appData must be an object")}else throw new a.UnsupportedError("SCTP not enabled by remote Transport");return(h||c)&&(g=!1),this._awaitQueue.push(async()=>{const{dataChannel:m,sctpStreamParameters:y}=await this._handler.sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:c,label:f,protocol:u});T.validateSctpStreamParameters(y);const{id:v}=await new Promise((S,O)=>{this.safeEmit("producedata",{sctpStreamParameters:y,label:f,protocol:u,appData:p},S,O)}),C=new M.DataProducer({id:v,dataChannel:m,sctpStreamParameters:y,appData:p});return this._dataProducers.set(C.id,C),this.handleDataProducer(C),this._observer.safeEmit("newdataproducer",C),C},"transport.produceData()")}async consumeData({id:g,dataProducerId:h,sctpStreamParameters:c,label:f="",protocol:u="",appData:p={}}){if(x.debug("consumeData()"),this._closed)throw new a.InvalidStateError("closed");if(this._direction!=="recv")throw new a.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof g!="string")throw new TypeError("missing id");if(typeof h!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(p&&typeof p!="object")throw new TypeError("if given, appData must be an object")}else throw new a.UnsupportedError("SCTP not enabled by remote Transport");const m=w.clone(c);return T.validateSctpStreamParameters(m),this._awaitQueue.push(async()=>{const{dataChannel:y}=await this._handler.receiveDataChannel({sctpStreamParameters:m,label:f,protocol:u}),v=new R.DataConsumer({id:g,dataProducerId:h,dataChannel:y,sctpStreamParameters:m,appData:p});return this._dataConsumers.set(v.id,v),this.handleDataConsumer(v),this._observer.safeEmit("newdataconsumer",v),v},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){x.debug("createPendingConsumers() | there is no Consumer to be created");return}const g=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let h;const c=[];for(const f of g){const{id:u,kind:p,rtpParameters:m,streamId:y,onRtpReceiver:v}=f.consumerOptions;c.push({trackId:u,kind:p,rtpParameters:m,streamId:y,onRtpReceiver:v})}try{const f=await this._handler.receive(c);for(let u=0;u<f.length;++u){const p=g[u],m=f[u],{id:y,producerId:v,kind:C,rtpParameters:S,appData:O}=p.consumerOptions,{localId:U,rtpReceiver:I,track:A}=m,Y=new E.Consumer({id:y,localId:U,producerId:v,rtpReceiver:I,track:A,rtpParameters:S,appData:O});this._consumers.set(Y.id,Y),this.handleConsumer(Y),!this._probatorConsumerCreated&&!h&&C==="video"&&(h=Y),this._observer.safeEmit("newconsumer",Y),p.resolve(Y)}}catch(f){for(const u of g)u.reject(f)}if(h)try{const f=T.generateProbatorRtpParameters(h.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:f}]),x.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(f){x.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",f)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){x.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const g=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const h=g.map(c=>c.localId);await this._handler.pauseReceiving(h)}catch(h){x.error("pausePendingConsumers() | failed to pause Consumers:",h)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){x.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const g=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const h=g.map(c=>c.localId);await this._handler.resumeReceiving(h)}catch(h){x.error("resumePendingConsumers() | failed to resume Consumers:",h)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){x.debug("closePendingConsumers() | there is no Consumer to be closed");return}const g=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(g.map(h=>h.localId))}catch(h){x.error("closePendingConsumers() | failed to close Consumers:",h)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const g=this._handler;g.on("@connect",({dtlsParameters:h},c,f)=>{if(this._closed){f(new a.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:h},c,f)}),g.on("@icegatheringstatechange",h=>{h!==this._iceGatheringState&&(x.debug("ICE gathering state changed to %s",h),this._iceGatheringState=h,this._closed||this.safeEmit("icegatheringstatechange",h))}),g.on("@icecandidateerror",h=>{x.warn(`ICE candidate error [url:${h.url}, localAddress:${h.address}, localPort:${h.port}]: ${h.errorCode} "${h.errorText}"`),this.safeEmit("icecandidateerror",h)}),g.on("@connectionstatechange",h=>{h!==this._connectionState&&(x.debug("connection state changed to %s",h),this._connectionState=h,this._closed||this.safeEmit("connectionstatechange",h))})}handleProducer(g){g.on("@close",()=>{this._producers.delete(g.id),!this._closed&&this._awaitQueue.push(async()=>await this._handler.stopSending(g.localId),"producer @close event").catch(h=>x.warn("producer.close() failed:%o",h))}),g.on("@pause",(h,c)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(g.localId),"producer @pause event").then(h).catch(c)}),g.on("@resume",(h,c)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(g.localId),"producer @resume event").then(h).catch(c)}),g.on("@replacetrack",(h,c,f)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(g.localId,h),"producer @replacetrack event").then(c).catch(f)}),g.on("@setmaxspatiallayer",(h,c,f)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(g.localId,h),"producer @setmaxspatiallayer event").then(c).catch(f)}),g.on("@setrtpencodingparameters",(h,c,f)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(g.localId,h),"producer @setrtpencodingparameters event").then(c).catch(f)}),g.on("@getstats",(h,c)=>{if(this._closed)return c(new a.InvalidStateError("closed"));this._handler.getSenderStats(g.localId).then(h).catch(c)})}handleConsumer(g){g.on("@close",()=>{this._consumers.delete(g.id),this._pendingPauseConsumers.delete(g.id),this._pendingResumeConsumers.delete(g.id),!this._closed&&(this._pendingCloseConsumers.set(g.id,g),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),g.on("@pause",()=>{this._pendingResumeConsumers.has(g.id)&&this._pendingResumeConsumers.delete(g.id),this._pendingPauseConsumers.set(g.id,g),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),g.on("@resume",()=>{this._pendingPauseConsumers.has(g.id)&&this._pendingPauseConsumers.delete(g.id),this._pendingResumeConsumers.set(g.id,g),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),g.on("@getstats",(h,c)=>{if(this._closed)return c(new a.InvalidStateError("closed"));this._handler.getReceiverStats(g.localId).then(h).catch(c)})}handleDataProducer(g){g.on("@close",()=>{this._dataProducers.delete(g.id)})}handleDataConsumer(g){g.on("@close",()=>{this._dataConsumers.delete(g.id)})}};return os.Transport=L,os}var ms={},ui={},Hd={},Vd={exports:{}},Tm;function ou(){if(Tm)return Vd.exports;Tm=1;var d=Vd.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(s){return s.encoding?"rtpmap:%d %s/%s/%s":s.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(s){return s.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(s){return s.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(s){return"extmap:%d"+(s.direction?"/%s":"%v")+(s["encrypt-uri"]?" %s":"%v")+" %s"+(s.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(s){return s.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(s){var o="candidate:%s %d %s %d %s %d typ %s";return o+=s.raddr!=null?" raddr %s rport %d":"%v%v",o+=s.tcptype!=null?" tcptype %s":"%v",s.generation!=null&&(o+=" generation %d"),o+=s["network-id"]!=null?" network-id %d":"%v",o+=s["network-cost"]!=null?" network-cost %d":"%v",o}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(s){var o="ssrc:%d";return s.attribute!=null&&(o+=" %s",s.value!=null&&(o+=":%s")),o}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(s){return s.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(s){return s.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(s){return"imageattr:%s %s %s"+(s.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(s){return"simulcast:%s %s"+(s.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(s){return"ts-refclk:%s"+(s.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(s){var o="mediaclk:";return o+=s.id!=null?"id=%s %s":"%v%s",o+=s.mediaClockValue!=null?"=%s":"",o+=s.rateNumerator!=null?" rate=%s":"",o+=s.rateDenominator!=null?"/%s":"",o}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(d).forEach(function(s){var o=d[s];o.forEach(function(a){a.reg||(a.reg=/(.*)/),a.format||(a.format="%s")})}),Vd.exports}var Cm;function ES(){return Cm||(Cm=1,function(d){var s=function(E){return String(Number(E))===E?Number(E):E},o=function(E,M,R,x){if(x&&!R)M[x]=s(E[1]);else for(var _=0;_<R.length;_+=1)E[_+1]!=null&&(M[R[_]]=s(E[_+1]))},a=function(E,M,R){var x=E.name&&E.names;E.push&&!M[E.push]?M[E.push]=[]:x&&!M[E.name]&&(M[E.name]={});var _=E.push?{}:x?M[E.name]:M;o(R.match(E.reg),_,E.names,E.name),E.push&&M[E.push].push(_)},w=ou(),T=RegExp.prototype.test.bind(/^([a-z])=(.*)/);d.parse=function(E){var M={},R=[],x=M;return E.split(/(\r\n|\r|\n)/).filter(T).forEach(function(_){var L=_[0],k=_.slice(2);L==="m"&&(R.push({rtp:[],fmtp:[]}),x=R[R.length-1]);for(var N=0;N<(w[L]||[]).length;N+=1){var g=w[L][N];if(g.reg.test(k))return a(g,x,k)}}),M.media=R,M};var b=function(E,M){var R=M.split(/=(.+)/,2);return R.length===2?E[R[0]]=s(R[1]):R.length===1&&M.length>1&&(E[R[0]]=void 0),E};d.parseParams=function(E){return E.split(/;\s?/).reduce(b,{})},d.parseFmtpConfig=d.parseParams,d.parsePayloads=function(E){return E.toString().split(" ").map(Number)},d.parseRemoteCandidates=function(E){for(var M=[],R=E.split(" ").map(s),x=0;x<R.length;x+=3)M.push({component:R[x],ip:R[x+1],port:R[x+2]});return M},d.parseImageAttributes=function(E){return E.split(" ").map(function(M){return M.substring(1,M.length-1).split(",").reduce(b,{})})},d.parseSimulcastStreamList=function(E){return E.split(";").map(function(M){return M.split(",").map(function(R){var x,_=!1;return R[0]!=="~"?x=s(R):(x=s(R.substring(1,R.length)),_=!0),{scid:x,paused:_}})})}}(Hd)),Hd}var Gd,Em;function DS(){if(Em)return Gd;Em=1;var d=ou(),s=/%[sdv%]/g,o=function(b){var E=1,M=arguments,R=M.length;return b.replace(s,function(x){if(E>=R)return x;var _=M[E];switch(E+=1,x){case"%%":return"%";case"%s":return String(_);case"%d":return Number(_);case"%v":return""}})},a=function(b,E,M){var R=E.format instanceof Function?E.format(E.push?M:M[E.name]):E.format,x=[b+"="+R];if(E.names)for(var _=0;_<E.names.length;_+=1){var L=E.names[_];E.name?x.push(M[E.name][L]):x.push(M[E.names[_]])}else x.push(M[E.name]);return o.apply(null,x)},w=["v","o","s","i","u","e","p","c","b","t","r","z","a"],T=["i","c","b","a"];return Gd=function(b,E){E=E||{},b.version==null&&(b.version=0),b.name==null&&(b.name=" "),b.media.forEach(function(_){_.payloads==null&&(_.payloads="")});var M=E.outerOrder||w,R=E.innerOrder||T,x=[];return M.forEach(function(_){d[_].forEach(function(L){L.name in b&&b[L.name]!=null?x.push(a(_,L,b)):L.push in b&&b[L.push]!=null&&b[L.push].forEach(function(k){x.push(a(_,L,k))})})}),b.media.forEach(function(_){x.push(a("m",d.m[0],_)),R.forEach(function(L){d[L].forEach(function(k){k.name in _&&_[k.name]!=null?x.push(a(L,k,_)):k.push in _&&_[k.push]!=null&&_[k.push].forEach(function(N){x.push(a(L,k,N))})})})}),x.join(`\r
`)+`\r
`},Gd}var Dm;function Nt(){if(Dm)return ui;Dm=1;var d=ES(),s=DS(),o=ou();return ui.grammar=o,ui.write=s,ui.parse=d.parse,ui.parseParams=d.parseParams,ui.parseFmtpConfig=d.parseFmtpConfig,ui.parsePayloads=d.parsePayloads,ui.parseRemoteCandidates=d.parseRemoteCandidates,ui.parseImageAttributes=d.parseImageAttributes,ui.parseSimulcastStreamList=d.parseSimulcastStreamList,ui}var rr={},xm;function pi(){if(xm)return rr;xm=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.extractRtpCapabilities=s,rr.extractDtlsParameters=o,rr.getCname=a,rr.applyCodecParameters=w;const d=Nt();function s({sdpObject:T}){const b=new Map,E=[];let M=!1,R=!1;for(const _ of T.media){const L=_.type;switch(L){case"audio":{if(M)continue;M=!0;break}case"video":{if(R)continue;R=!0;break}default:continue}for(const k of _.rtp){const N={kind:L,mimeType:`${L}/${k.codec}`,preferredPayloadType:k.payload,clockRate:k.rate,channels:k.encoding,parameters:{},rtcpFeedback:[]};b.set(N.preferredPayloadType,N)}for(const k of _.fmtp??[]){const N=d.parseParams(k.config),g=b.get(k.payload);g&&(N!=null&&N.hasOwnProperty("profile-level-id")&&(N["profile-level-id"]=String(N["profile-level-id"])),g.parameters=N)}for(const k of _.rtcpFb??[]){const N={type:k.type,parameter:k.subtype};if(N.parameter||delete N.parameter,k.payload!=="*"){const g=b.get(k.payload);if(!g)continue;g.rtcpFeedback.push(N)}else for(const g of b.values())g.kind===L&&!/.+\/rtx$/i.test(g.mimeType)&&g.rtcpFeedback.push(N)}for(const k of _.ext??[]){if(k["encrypt-uri"])continue;const N={kind:L,uri:k.uri,preferredId:k.value};E.push(N)}}return{codecs:Array.from(b.values()),headerExtensions:E}}function o({sdpObject:T}){let b=T.setup,E=T.fingerprint;if(!b||!E){const x=(T.media??[]).find(_=>_.port!==0);x&&(b??(b=x.setup),E??(E=x.fingerprint))}if(b){if(!E)throw new Error("no a=fingerprint found at SDP session or media level")}else throw new Error("no a=setup found at SDP session or media level");let M;switch(b){case"active":{M="client";break}case"passive":{M="server";break}case"actpass":{M="auto";break}}return{role:M,fingerprints:[{algorithm:E.type,value:E.hash}]}}function a({offerMediaObject:T}){const b=(T.ssrcs??[]).find(E=>E.attribute==="cname");return b?b.value:""}function w({offerRtpParameters:T,answerMediaObject:b}){for(const E of T.codecs){const M=E.mimeType.toLowerCase();if(M!=="audio/opus"||!(b.rtp??[]).find(L=>L.payload===E.payloadType))continue;b.fmtp=b.fmtp??[];let x=b.fmtp.find(L=>L.payload===E.payloadType);x||(x={payload:E.payloadType,config:""},b.fmtp.push(x));const _=d.parseParams(x.config);switch(M){case"audio/opus":{const L=E.parameters["sprop-stereo"];L!==void 0&&(_.stereo=Number(L)?1:0);break}}x.config="";for(const L of Object.keys(_))x.config&&(x.config+=";"),x.config+=`${L}=${_[L]}`}}return rr}var gs={},Mm;function ar(){if(Mm)return gs;Mm=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.getRtpEncodings=d,gs.addLegacySimulcast=s;function d({offerMediaObject:o}){const a=new Set;for(const b of o.ssrcs??[]){const E=b.id;a.add(E)}if(a.size===0)throw new Error("no a=ssrc lines found");const w=new Map;for(const b of o.ssrcGroups??[]){if(b.semantics!=="FID")continue;let[E,M]=b.ssrcs.split(/\s+/);E=Number(E),M=Number(M),a.has(E)&&(a.delete(E),a.delete(M),w.set(E,M))}for(const b of a)w.set(b,null);const T=[];for(const[b,E]of w){const M={ssrc:b};E&&(M.rtx={ssrc:E}),T.push(M)}return T}function s({offerMediaObject:o,numStreams:a}){if(a<=1)throw new TypeError("numStreams must be greater than 1");const w=(o.ssrcs??[]).find(k=>k.attribute==="msid");if(!w)throw new Error("a=ssrc line with msid information not found");const[T,b]=w.value.split(" "),E=Number(w.id);let M;(o.ssrcGroups??[]).some(k=>{if(k.semantics!=="FID")return!1;const N=k.ssrcs.split(/\s+/);return Number(N[0])===E?(M=Number(N[1]),!0):!1});const R=o.ssrcs.find(k=>k.attribute==="cname");if(!R)throw new Error("a=ssrc line with cname information not found");const x=R.value,_=[],L=[];for(let k=0;k<a;++k)_.push(E+k),M&&L.push(M+k);o.ssrcGroups=[],o.ssrcs=[],o.ssrcGroups.push({semantics:"SIM",ssrcs:_.join(" ")});for(const k of _)o.ssrcs.push({id:k,attribute:"cname",value:x}),o.ssrcs.push({id:k,attribute:"msid",value:`${T} ${b}`});for(let k=0;k<L.length;++k){const N=_[k],g=L[k];o.ssrcs.push({id:g,attribute:"cname",value:x}),o.ssrcs.push({id:g,attribute:"msid",value:`${T} ${b}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${N} ${g}`})}}return gs}var Zc={},Lm;function wo(){if(Lm)return Zc;Lm=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.addNackSupportForOpus=d;function d(s){var o;for(const a of s.codecs??[])(a.mimeType.toLowerCase()==="audio/opus"||a.mimeType.toLowerCase()==="audio/multiopus")&&!((o=a.rtcpFeedback)!=null&&o.some(w=>w.type==="nack"&&!w.parameter))&&(a.rtcpFeedback||(a.rtcpFeedback=[]),a.rtcpFeedback.push({type:"nack"}))}return Zc}var _s={},Om;function Ut(){if(Om)return _s;Om=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.HandlerInterface=void 0;const d=wn();let s=class extends d.EnhancedEventEmitter{constructor(){super()}};return _s.HandlerInterface=s,_s}var vs={},Vi={},km;function xS(){if(km)return Vi;km=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.OfferMediaSection=Vi.AnswerMediaSection=Vi.MediaSection=void 0;const d=Nt(),s=nt();let o=class{constructor({iceParameters:E,iceCandidates:M,dtlsParameters:R,planB:x=!1}){z(this,"_mediaObject");z(this,"_planB");if(this._mediaObject={},this._planB=x,E&&this.setIceParameters(E),M){this._mediaObject.candidates=[];for(const _ of M){const L={};L.component=1,L.foundation=_.foundation,L.ip=_.address??_.ip,L.port=_.port,L.priority=_.priority,L.transport=_.protocol,L.type=_.type,_.tcpType&&(L.tcptype=_.tcpType),this._mediaObject.candidates.push(L)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}R&&this.setDtlsRole(R.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(E){this._mediaObject.iceUfrag=E.usernameFragment,this._mediaObject.icePwd=E.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}};Vi.MediaSection=o;class a extends o{constructor({iceParameters:E,iceCandidates:M,dtlsParameters:R,sctpParameters:x,plainRtpParameters:_,planB:L=!1,offerMediaObject:k,offerRtpParameters:N,answerRtpParameters:g,codecOptions:h}){switch(super({iceParameters:E,iceCandidates:M,dtlsParameters:R,planB:L}),this._mediaObject.mid=String(k.mid),this._mediaObject.type=k.type,this._mediaObject.protocol=k.protocol,_?(this._mediaObject.connection={ip:_.ip,version:_.ipVersion},this._mediaObject.port=_.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),k.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const c of g.codecs){const f={payload:c.payloadType,codec:T(c),rate:c.clockRate};c.channels>1&&(f.encoding=c.channels),this._mediaObject.rtp.push(f);const u=s.clone(c.parameters)??{};let p=s.clone(c.rtcpFeedback)??[];if(h){const{opusStereo:y,opusFec:v,opusDtx:C,opusMaxPlaybackRate:S,opusMaxAverageBitrate:O,opusPtime:U,opusNack:I,videoGoogleStartBitrate:A,videoGoogleMaxBitrate:Y,videoGoogleMinBitrate:Z}=h,j=N.codecs.find(V=>V.payloadType===c.payloadType);switch(c.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":{y!==void 0&&(j.parameters["sprop-stereo"]=y?1:0,u.stereo=y?1:0),v!==void 0&&(j.parameters.useinbandfec=v?1:0,u.useinbandfec=v?1:0),C!==void 0&&(j.parameters.usedtx=C?1:0,u.usedtx=C?1:0),S!==void 0&&(u.maxplaybackrate=S),O!==void 0&&(u.maxaveragebitrate=O),U!==void 0&&(j.parameters.ptime=U,u.ptime=U),I||(j.rtcpFeedback=j.rtcpFeedback.filter(V=>V.type!=="nack"||V.parameter),p=p.filter(V=>V.type!=="nack"||V.parameter));break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{A!==void 0&&(u["x-google-start-bitrate"]=A),Y!==void 0&&(u["x-google-max-bitrate"]=Y),Z!==void 0&&(u["x-google-min-bitrate"]=Z);break}}}const m={payload:c.payloadType,config:""};for(const y of Object.keys(u))m.config&&(m.config+=";"),m.config+=`${y}=${u[y]}`;m.config&&this._mediaObject.fmtp.push(m);for(const y of p)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:y.type,subtype:y.parameter})}this._mediaObject.payloads=g.codecs.map(c=>c.payloadType).join(" "),this._mediaObject.ext=[];for(const c of g.headerExtensions)(k.ext??[]).some(u=>u.uri===c.uri)&&this._mediaObject.ext.push({uri:c.uri,value:c.id});if(k.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),k.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:k.simulcast.list1},this._mediaObject.rids=[];for(const c of k.rids??[])c.direction==="send"&&this._mediaObject.rids.push({id:c.id,direction:"recv"})}else if(k.simulcast_03){this._mediaObject.simulcast_03={value:k.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const c of k.rids??[])c.direction==="send"&&this._mediaObject.rids.push({id:c.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof k.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=x.port,this._mediaObject.maxMessageSize=x.maxMessageSize):k.sctpmap&&(this._mediaObject.payloads=x.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:x.port,maxMessageSize:x.maxMessageSize});break}}}setDtlsRole(E){switch(E){case"client":{this._mediaObject.setup="active";break}case"server":{this._mediaObject.setup="passive";break}case"auto":{this._mediaObject.setup="actpass";break}}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(E){var _,L;if(!((_=this._mediaObject.simulcast)!=null&&_.list1))return;const M={};for(const k of E)k.rid&&(M[k.rid]=k);const R=this._mediaObject.simulcast.list1,x=d.parseSimulcastStreamList(R);for(const k of x)for(const N of k)N.paused=!((L=M[N.scid])!=null&&L.active);this._mediaObject.simulcast.list1=x.map(k=>k.map(N=>`${N.paused?"~":""}${N.scid}`).join(",")).join(";")}}Vi.AnswerMediaSection=a;class w extends o{constructor({iceParameters:E,iceCandidates:M,dtlsParameters:R,sctpParameters:x,plainRtpParameters:_,planB:L=!1,mid:k,kind:N,offerRtpParameters:g,streamId:h,trackId:c,oldDataChannelSpec:f=!1}){var u;switch(super({iceParameters:E,iceCandidates:M,dtlsParameters:R,planB:L}),this._mediaObject.mid=String(k),this._mediaObject.type=N,_?(this._mediaObject.connection={ip:_.ip,version:_.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=_.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},x?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",N){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${h??"-"} ${c}`);for(const v of g.codecs){const C={payload:v.payloadType,codec:T(v),rate:v.clockRate};v.channels>1&&(C.encoding=v.channels),this._mediaObject.rtp.push(C);const S={payload:v.payloadType,config:""};for(const O of Object.keys(v.parameters))S.config&&(S.config+=";"),S.config+=`${O}=${v.parameters[O]}`;S.config&&this._mediaObject.fmtp.push(S);for(const O of v.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:v.payloadType,type:O.type,subtype:O.parameter})}this._mediaObject.payloads=g.codecs.map(v=>v.payloadType).join(" "),this._mediaObject.ext=[];for(const v of g.headerExtensions)this._mediaObject.ext.push({uri:v.uri,value:v.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const p=g.encodings[0],m=p.ssrc,y=(u=p.rtx)==null?void 0:u.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],g.rtcp.cname&&this._mediaObject.ssrcs.push({id:m,attribute:"cname",value:g.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:m,attribute:"msid",value:`${h??"-"} ${c}`}),y&&(g.rtcp.cname&&this._mediaObject.ssrcs.push({id:y,attribute:"cname",value:g.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:y,attribute:"msid",value:`${h??"-"} ${c}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${m} ${y}`}));break}case"application":{f?(this._mediaObject.payloads=x.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:x.port,maxMessageSize:x.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=x.port,this._mediaObject.maxMessageSize=x.maxMessageSize);break}}}setDtlsRole(E){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:E,streamId:M,trackId:R}){var N;const x=E.encodings[0],_=x.ssrc,L=(N=x.rtx)==null?void 0:N.ssrc,k=this._mediaObject.payloads.split(" ");for(const g of E.codecs){if(k.includes(String(g.payloadType)))continue;const h={payload:g.payloadType,codec:T(g),rate:g.clockRate};g.channels>1&&(h.encoding=g.channels),this._mediaObject.rtp.push(h);const c={payload:g.payloadType,config:""};for(const f of Object.keys(g.parameters))c.config&&(c.config+=";"),c.config+=`${f}=${g.parameters[f]}`;c.config&&this._mediaObject.fmtp.push(c);for(const f of g.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:g.payloadType,type:f.type,subtype:f.parameter})}this._mediaObject.payloads+=` ${E.codecs.filter(g=>!this._mediaObject.payloads.includes(g.payloadType)).map(g=>g.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),E.rtcp.cname&&this._mediaObject.ssrcs.push({id:_,attribute:"cname",value:E.rtcp.cname}),this._mediaObject.ssrcs.push({id:_,attribute:"msid",value:`${M??"-"} ${R}`}),L&&(E.rtcp.cname&&this._mediaObject.ssrcs.push({id:L,attribute:"cname",value:E.rtcp.cname}),this._mediaObject.ssrcs.push({id:L,attribute:"msid",value:`${M??"-"} ${R}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${_} ${L}`}))}planBStopReceiving({offerRtpParameters:E}){var _;const M=E.encodings[0],R=M.ssrc,x=(_=M.rtx)==null?void 0:_.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(L=>L.id!==R&&L.id!==x),x&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(L=>L.ssrcs!==`${R} ${x}`))}}Vi.OfferMediaSection=w;function T(b){const M=new RegExp("^(audio|video)/(.+)","i").exec(b.mimeType);if(!M)throw new TypeError("invalid codec.mimeType");return M[2]}return Vi}var Am;function hi(){if(Am)return vs;Am=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.RemoteSdp=void 0;const d=Nt(),s=Ze(),o=xS(),a=new s.Logger("RemoteSdp");let w=class{constructor({iceParameters:b,iceCandidates:E,dtlsParameters:M,sctpParameters:R,plainRtpParameters:x,planB:_=!1}){z(this,"_iceParameters");z(this,"_iceCandidates");z(this,"_dtlsParameters");z(this,"_sctpParameters");z(this,"_plainRtpParameters");z(this,"_planB");z(this,"_mediaSections",[]);z(this,"_midToIndex",new Map);z(this,"_firstMid");z(this,"_sdpObject");if(this._iceParameters=b,this._iceCandidates=E,this._dtlsParameters=M,this._sctpParameters=R,this._plainRtpParameters=x,this._planB=_,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},b!=null&&b.iceLite&&(this._sdpObject.icelite="ice-lite"),M){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const L=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:M.fingerprints[L-1].algorithm,hash:M.fingerprints[L-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}x&&(this._sdpObject.origin.address=x.ip,this._sdpObject.origin.ipVer=x.ipVersion)}updateIceParameters(b){a.debug("updateIceParameters() [iceParameters:%o]",b),this._iceParameters=b,this._sdpObject.icelite=b.iceLite?"ice-lite":void 0;for(const E of this._mediaSections)E.setIceParameters(b)}updateDtlsRole(b){a.debug("updateDtlsRole() [role:%s]",b),this._dtlsParameters.role=b;for(const E of this._mediaSections)E.setDtlsRole(b)}setSessionExtmapAllowMixed(){a.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let b=0;b<this._mediaSections.length;++b){const E=this._mediaSections[b];if(E.closed)return{idx:b,reuseMid:E.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:b,reuseMid:E,offerRtpParameters:M,answerRtpParameters:R,codecOptions:x}){const _=new o.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:b,offerRtpParameters:M,answerRtpParameters:R,codecOptions:x});E?this._replaceMediaSection(_,E):this._midToIndex.has(_.mid)?this._replaceMediaSection(_):this._addMediaSection(_)}receive({mid:b,kind:E,offerRtpParameters:M,streamId:R,trackId:x}){const _=this._midToIndex.get(b);let L;if(_!==void 0&&(L=this._mediaSections[_]),this.setSessionExtmapAllowMixed(),L)L.planBReceive({offerRtpParameters:M,streamId:R,trackId:x}),this._replaceMediaSection(L);else{L=new o.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:b,kind:E,offerRtpParameters:M,streamId:R,trackId:x});const k=this._mediaSections.find(N=>N.closed);k?this._replaceMediaSection(L,k.mid):this._addMediaSection(L)}}pauseMediaSection(b){this._findMediaSection(b).pause()}resumeSendingMediaSection(b){this._findMediaSection(b).resume()}resumeReceivingMediaSection(b){this._findMediaSection(b).resume()}disableMediaSection(b){this._findMediaSection(b).disable()}closeMediaSection(b){const E=this._findMediaSection(b);return b===this._firstMid?(a.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",b),this.disableMediaSection(b),!1):(E.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(b,E){const M=this._findMediaSection(b);M.muxSimulcastStreams(E),this._replaceMediaSection(M)}planBStopReceiving({mid:b,offerRtpParameters:E}){const M=this._findMediaSection(b);M.planBStopReceiving({offerRtpParameters:E}),this._replaceMediaSection(M)}sendSctpAssociation({offerMediaObject:b}){const E=new o.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:b});this._addMediaSection(E)}receiveSctpAssociation({oldDataChannelSpec:b=!1}={}){const E=new o.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:b});this._addMediaSection(E)}getSdp(){return this._sdpObject.origin.sessionVersion++,d.write(this._sdpObject)}_addMediaSection(b){this._firstMid||(this._firstMid=b.mid),this._mediaSections.push(b),this._midToIndex.set(b.mid,this._mediaSections.length-1),this._sdpObject.media.push(b.getObject()),this._regenerateBundleMids()}_replaceMediaSection(b,E){if(typeof E=="string"){const M=this._midToIndex.get(E);if(M===void 0)throw new Error(`no media section found for reuseMid '${E}'`);const R=this._mediaSections[M];this._mediaSections[M]=b,this._midToIndex.delete(R.mid),this._midToIndex.set(b.mid,M),this._sdpObject.media[M]=b.getObject(),this._regenerateBundleMids()}else{const M=this._midToIndex.get(b.mid);if(M===void 0)throw new Error(`no media section found with mid '${b.mid}'`);this._mediaSections[M]=b,this._sdpObject.media[M]=b.getObject()}}_findMediaSection(b){const E=this._midToIndex.get(b);if(E===void 0)throw new Error(`no media section found with mid '${b}'`);return this._mediaSections[E]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(b=>!b.closed).map(b=>b.mid).join(" "))}};return vs.RemoteSdp=w,vs}var $c={},Pm;function Rn(){if(Pm)return $c;Pm=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.parse=s;const d=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function s(o){const a=d.exec(o??"");return a?{spatialLayers:Number(a[1]),temporalLayers:Number(a[2])}:{spatialLayers:1,temporalLayers:1}}return $c}var Nm;function MS(){if(Nm)return ms;Nm=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.Chrome111=void 0;const d=Nt(),s=Ze(),o=nt(),a=Rt(),w=pi(),T=ar(),b=wo(),E=wt(),M=Ut(),R=hi(),x=Rn(),_=new s.Logger("Chrome111"),L="Chrome111",k={OS:1024,MIS:1024};let N=class Yg extends M.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new Yg}get name(){return L}close(){if(_.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){_.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const f=await c.createOffer();try{c.close()}catch{}const u=d.parse(f.sdp),p=w.extractRtpCapabilities({sdpObject:u});return b.addNackSupportForOpus(p),p}catch(f){try{c.close()}catch{}throw f}}async getNativeSctpCapabilities(){return _.debug("getNativeSctpCapabilities()"),{numStreams:k}}run({direction:c,iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m,iceServers:y,iceTransportPolicy:v,additionalSettings:C,proprietaryConstraints:S,extendedRtpCapabilities:O}){this.assertNotClosed(),_.debug("run()"),this._direction=c,this._remoteSdp=new R.RemoteSdp({iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",O),video:a.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",O),video:a.getSendingRemoteRtpParameters("video",O)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:y??[],iceTransportPolicy:v??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...C},S),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",U=>{this.emit("@icecandidateerror",U)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(_.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(c){this.assertNotClosed(),_.debug("updateIceServers()");const f=this._pc.getConfiguration();f.iceServers=c,this._pc.setConfiguration(f)}async restartIce(c){if(this.assertNotClosed(),_.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),!!this._transportReady)if(this._direction==="send"){const f=await this._pc.createOffer({iceRestart:!0});_.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:f,codecOptions:u,codec:p,onRtpSender:m}){if(this.assertNotClosed(),this.assertSendDirection(),_.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),f&&f.length>1){let Z=1;for(const j of f){const V=j.scalabilityMode?(0,x.parse)(j.scalabilityMode).temporalLayers:3;V>Z&&(Z=V)}f.forEach((j,V)=>{j.rid=`r${V}`,j.scalabilityMode=`L1T${Z}`})}const y=o.clone(this._sendingRtpParametersByKind[c.kind]);y.codecs=a.reduceCodecs(y.codecs,p);const v=o.clone(this._sendingRemoteRtpParametersByKind[c.kind]);v.codecs=a.reduceCodecs(v.codecs,p);const C=this._remoteSdp.getNextMediaSectionIdx(),S=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:f});m&&m(S.sender);const O=await this._pc.createOffer();let U=d.parse(O.sdp);U.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U}),_.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const I=S.mid;y.mid=I,U=d.parse(this._pc.localDescription.sdp);const A=U.media[C.idx];if(y.rtcp.cname=w.getCname({offerMediaObject:A}),!f)y.encodings=T.getRtpEncodings({offerMediaObject:A});else if(f.length===1){const Z=T.getRtpEncodings({offerMediaObject:A});Object.assign(Z[0],f[0]),y.encodings=Z}else y.encodings=f;this._remoteSdp.send({offerMediaObject:A,reuseMid:C.reuseMid,offerRtpParameters:y,answerRtpParameters:v,codecOptions:u});const Y={type:"answer",sdp:this._remoteSdp.getSdp()};return _.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Y),await this._pc.setRemoteDescription(Y),this._mapMidTransceiver.set(I,S),{localId:I,rtpParameters:y,rtpSender:S.sender}}async stopSending(c){if(this.assertSendDirection(),_.debug("stopSending() [localId:%s]",c),this._closed)return;const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");if(f.sender.replaceTrack(null),this._pc.removeTrack(f.sender),this._remoteSdp.closeMediaSection(f.mid))try{f.stop()}catch{}const p=await this._pc.createOffer();_.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),_.debug("pauseSending() [localId:%s]",c);const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="inactive",this._remoteSdp.pauseMediaSection(c);const u=await this._pc.createOffer();_.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),_.debug("resumeSending() [localId:%s]",c);const f=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="sendonly";const u=await this._pc.createOffer();_.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(c,f){this.assertNotClosed(),this.assertSendDirection(),f?_.debug("replaceTrack() [localId:%s, track.id:%s]",c,f.id):_.debug("replaceTrack() [localId:%s, no track]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(f)}async setMaxSpatialLayer(c,f){this.assertNotClosed(),this.assertSendDirection(),_.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,f);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,C)=>{C<=f?v.active=!0:v.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(c,p.encodings);const m=await this._pc.createOffer();_.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const y={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y)}async setRtpEncodingParameters(c,f){this.assertNotClosed(),this.assertSendDirection(),_.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,f);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,C)=>{p.encodings[C]={...v,...f}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(c,p.encodings);const m=await this._pc.createOffer();_.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const y={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:f,maxRetransmits:u,label:p,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const y={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:f,maxRetransmits:u,protocol:m};_.debug("sendDataChannel() [options:%o]",y);const v=this._pc.createDataChannel(p,y);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const S=await this._pc.createOffer(),O=d.parse(S.sdp),U=O.media.find(A=>A.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),_.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const I={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._hasDataChannelMediaSection=!0}const C={streamId:y.id,ordered:y.ordered,maxPacketLifeTime:y.maxPacketLifeTime,maxRetransmits:y.maxRetransmits};return{dataChannel:v,sctpStreamParameters:C}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const f=[],u=new Map;for(const v of c){const{trackId:C,kind:S,rtpParameters:O,streamId:U}=v;_.debug("receive() [trackId:%s, kind:%s]",C,S);const I=O.mid??String(this._mapMidTransceiver.size);u.set(C,I),this._remoteSdp.receive({mid:I,kind:S,offerRtpParameters:O,streamId:U??O.rtcp.cname,trackId:C})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);for(const v of c){const{trackId:C,onRtpReceiver:S}=v;if(S){const O=u.get(C),U=this._pc.getTransceivers().find(I=>I.mid===O);if(!U)throw new Error("transceiver not found");S(U.receiver)}}let m=await this._pc.createAnswer();const y=d.parse(m.sdp);for(const v of c){const{trackId:C,rtpParameters:S}=v,O=u.get(C),U=y.media.find(I=>String(I.mid)===O);w.applyCodecParameters({offerRtpParameters:S,answerMediaObject:U})}m={type:"answer",sdp:d.write(y)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:y}),_.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const v of c){const{trackId:C}=v,S=u.get(C),O=this._pc.getTransceivers().find(U=>U.mid===S);if(O)this._mapMidTransceiver.set(S,O),f.push({localId:S,track:O.receiver.track,rtpReceiver:O.receiver});else throw new Error("new RTCRtpTransceiver not found")}return f}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const p of c){_.debug("stopReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of c)this._mapMidTransceiver.delete(p)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const p of c){_.debug("pauseReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const p of c){_.debug("resumeReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:f,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:m,maxPacketLifeTime:y,maxRetransmits:v}=c,C={negotiated:!0,id:p,ordered:m,maxPacketLifeTime:y,maxRetransmits:v,protocol:u};_.debug("receiveDataChannel() [options:%o]",C);const S=this._pc.createDataChannel(f,C);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const U=await this._pc.createAnswer();if(!this._transportReady){const I=d.parse(U.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I})}_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setLocalDescription(U),this._hasDataChannelMediaSection=!0}return{dataChannel:S}}async setupTransport({localDtlsRole:c,localSdpObject:f}){f||(f=d.parse(this._pc.localDescription.sdp));const u=w.extractDtlsParameters({sdpObject:f});u.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((p,m)=>{this.safeEmit("@connect",{dtlsParameters:u},p,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new E.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return ms.Chrome111=N,ms}var ys={},Um;function LS(){if(Um)return ys;Um=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.Chrome74=void 0;const d=Nt(),s=Ze(),o=nt(),a=Rt(),w=pi(),T=ar(),b=wo(),E=wt(),M=Ut(),R=hi(),x=Rn(),_=new s.Logger("Chrome74"),L="Chrome74",k={OS:1024,MIS:1024};let N=class Qg extends M.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new Qg}get name(){return L}close(){if(_.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){_.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const f=await c.createOffer();try{c.close()}catch{}const u=d.parse(f.sdp),p=w.extractRtpCapabilities({sdpObject:u});return b.addNackSupportForOpus(p),p}catch(f){try{c.close()}catch{}throw f}}async getNativeSctpCapabilities(){return _.debug("getNativeSctpCapabilities()"),{numStreams:k}}run({direction:c,iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m,iceServers:y,iceTransportPolicy:v,additionalSettings:C,proprietaryConstraints:S,extendedRtpCapabilities:O}){_.debug("run()"),this._direction=c,this._remoteSdp=new R.RemoteSdp({iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",O),video:a.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",O),video:a.getSendingRemoteRtpParameters("video",O)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:y??[],iceTransportPolicy:v??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...C},S),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",U=>{this.emit("@icecandidateerror",U)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(_.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(c){this.assertNotClosed(),_.debug("updateIceServers()");const f=this._pc.getConfiguration();f.iceServers=c,this._pc.setConfiguration(f)}async restartIce(c){if(this.assertNotClosed(),_.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),!!this._transportReady)if(this._direction==="send"){const f=await this._pc.createOffer({iceRestart:!0});_.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:f,codecOptions:u,codec:p}){this.assertNotClosed(),this.assertSendDirection(),_.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),f&&f.length>1&&f.forEach((j,V)=>{j.rid=`r${V}`});const m=o.clone(this._sendingRtpParametersByKind[c.kind]);m.codecs=a.reduceCodecs(m.codecs,p);const y=o.clone(this._sendingRemoteRtpParametersByKind[c.kind]);y.codecs=a.reduceCodecs(y.codecs,p);const v=this._remoteSdp.getNextMediaSectionIdx(),C=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:f});let S=await this._pc.createOffer(),O=d.parse(S.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let U;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O});let I=!1;const A=(0,x.parse)((f??[{}])[0].scalabilityMode);f&&f.length===1&&A.spatialLayers>1&&m.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(_.debug("send() | enabling legacy simulcast for VP9 SVC"),I=!0,O=d.parse(S.sdp),U=O.media[v.idx],T.addLegacySimulcast({offerMediaObject:U,numStreams:A.spatialLayers}),S={type:"offer",sdp:d.write(O)}),_.debug("send() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S);const Y=C.mid;if(m.mid=Y,O=d.parse(this._pc.localDescription.sdp),U=O.media[v.idx],m.rtcp.cname=w.getCname({offerMediaObject:U}),!f)m.encodings=T.getRtpEncodings({offerMediaObject:U});else if(f.length===1){let j=T.getRtpEncodings({offerMediaObject:U});Object.assign(j[0],f[0]),I&&(j=[j[0]]),m.encodings=j}else m.encodings=f;if(m.encodings.length>1&&(m.codecs[0].mimeType.toLowerCase()==="video/vp8"||m.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const j of m.encodings)j.scalabilityMode?j.scalabilityMode=`L1T${A.temporalLayers}`:j.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:U,reuseMid:v.reuseMid,offerRtpParameters:m,answerRtpParameters:y,codecOptions:u});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};return _.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._mapMidTransceiver.set(Y,C),{localId:Y,rtpParameters:m,rtpSender:C.sender}}async stopSending(c){if(this.assertSendDirection(),_.debug("stopSending() [localId:%s]",c),this._closed)return;const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");if(f.sender.replaceTrack(null),this._pc.removeTrack(f.sender),this._remoteSdp.closeMediaSection(f.mid))try{f.stop()}catch{}const p=await this._pc.createOffer();_.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),_.debug("pauseSending() [localId:%s]",c);const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="inactive",this._remoteSdp.pauseMediaSection(c);const u=await this._pc.createOffer();_.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),_.debug("resumeSending() [localId:%s]",c);const f=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="sendonly";const u=await this._pc.createOffer();_.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(c,f){this.assertNotClosed(),this.assertSendDirection(),f?_.debug("replaceTrack() [localId:%s, track.id:%s]",c,f.id):_.debug("replaceTrack() [localId:%s, no track]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(f)}async setMaxSpatialLayer(c,f){this.assertNotClosed(),this.assertSendDirection(),_.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,f);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,C)=>{C<=f?v.active=!0:v.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(c,p.encodings);const m=await this._pc.createOffer();_.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const y={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y)}async setRtpEncodingParameters(c,f){this.assertNotClosed(),this.assertSendDirection(),_.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,f);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,C)=>{p.encodings[C]={...v,...f}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(c,p.encodings);const m=await this._pc.createOffer();_.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const y={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:f,maxRetransmits:u,label:p,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const y={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:f,maxRetransmits:u,protocol:m};_.debug("sendDataChannel() [options:%o]",y);const v=this._pc.createDataChannel(p,y);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const S=await this._pc.createOffer(),O=d.parse(S.sdp),U=O.media.find(A=>A.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),_.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const I={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._hasDataChannelMediaSection=!0}const C={streamId:y.id,ordered:y.ordered,maxPacketLifeTime:y.maxPacketLifeTime,maxRetransmits:y.maxRetransmits};return{dataChannel:v,sctpStreamParameters:C}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const f=[],u=new Map;for(const v of c){const{trackId:C,kind:S,rtpParameters:O,streamId:U}=v;_.debug("receive() [trackId:%s, kind:%s]",C,S);const I=O.mid??String(this._mapMidTransceiver.size);u.set(C,I),this._remoteSdp.receive({mid:I,kind:S,offerRtpParameters:O,streamId:U??O.rtcp.cname,trackId:C})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let m=await this._pc.createAnswer();const y=d.parse(m.sdp);for(const v of c){const{trackId:C,rtpParameters:S}=v,O=u.get(C),U=y.media.find(I=>String(I.mid)===O);w.applyCodecParameters({offerRtpParameters:S,answerMediaObject:U})}m={type:"answer",sdp:d.write(y)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:y}),_.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const v of c){const{trackId:C}=v,S=u.get(C),O=this._pc.getTransceivers().find(U=>U.mid===S);if(O)this._mapMidTransceiver.set(S,O),f.push({localId:S,track:O.receiver.track,rtpReceiver:O.receiver});else throw new Error("new RTCRtpTransceiver not found")}return f}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const p of c){_.debug("stopReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of c)this._mapMidTransceiver.delete(p)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const p of c){_.debug("pauseReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const p of c){_.debug("resumeReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:f,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:m,maxPacketLifeTime:y,maxRetransmits:v}=c,C={negotiated:!0,id:p,ordered:m,maxPacketLifeTime:y,maxRetransmits:v,protocol:u};_.debug("receiveDataChannel() [options:%o]",C);const S=this._pc.createDataChannel(f,C);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const U=await this._pc.createAnswer();if(!this._transportReady){const I=d.parse(U.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I})}_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setLocalDescription(U),this._hasDataChannelMediaSection=!0}return{dataChannel:S}}async setupTransport({localDtlsRole:c,localSdpObject:f}){f||(f=d.parse(this._pc.localDescription.sdp));const u=w.extractDtlsParameters({sdpObject:f});u.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((p,m)=>{this.safeEmit("@connect",{dtlsParameters:u},p,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new E.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return ys.Chrome74=N,ys}var Ss={},jm;function OS(){if(jm)return Ss;jm=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.Chrome70=void 0;const d=Nt(),s=Ze(),o=nt(),a=Rt(),w=pi(),T=ar(),b=Ut(),E=hi(),M=Rn(),R=new s.Logger("Chrome70"),x="Chrome70",_={OS:1024,MIS:1024};let L=class Kg extends b.HandlerInterface{constructor(){super();z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new Kg}get name(){return x}close(){if(R.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const g=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{g.addTransceiver("audio"),g.addTransceiver("video");const h=await g.createOffer();try{g.close()}catch{}const c=d.parse(h.sdp);return w.extractRtpCapabilities({sdpObject:c})}catch(h){try{g.close()}catch{}throw h}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:_}}run({direction:g,iceParameters:h,iceCandidates:c,dtlsParameters:f,sctpParameters:u,iceServers:p,iceTransportPolicy:m,additionalSettings:y,proprietaryConstraints:v,extendedRtpCapabilities:C}){R.debug("run()"),this._direction=g,this._remoteSdp=new E.RemoteSdp({iceParameters:h,iceCandidates:c,dtlsParameters:f,sctpParameters:u}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",C),video:a.getSendingRtpParameters("video",C)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",C),video:a.getSendingRemoteRtpParameters("video",C)},f.role&&f.role!=="auto"&&(this._forcedLocalDtlsRole=f.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:p??[],iceTransportPolicy:m??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...y},v),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",S=>{this.emit("@icecandidateerror",S)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(g){R.debug("updateIceServers()");const h=this._pc.getConfiguration();h.iceServers=g,this._pc.setConfiguration(h)}async restartIce(g){if(R.debug("restartIce()"),this._remoteSdp.updateIceParameters(g),!!this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const c={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const c=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:g,encodings:h,codecOptions:c,codec:f}){this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",g.kind,g.id);const u=o.clone(this._sendingRtpParametersByKind[g.kind]);u.codecs=a.reduceCodecs(u.codecs,f);const p=o.clone(this._sendingRemoteRtpParametersByKind[g.kind]);p.codecs=a.reduceCodecs(p.codecs,f);const m=this._remoteSdp.getNextMediaSectionIdx(),y=this._pc.addTransceiver(g,{direction:"sendonly",streams:[this._sendStream]});let v=await this._pc.createOffer(),C=d.parse(v.sdp);C.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let S;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:C}),h&&h.length>1&&(R.debug("send() | enabling legacy simulcast"),C=d.parse(v.sdp),S=C.media[m.idx],T.addLegacySimulcast({offerMediaObject:S,numStreams:h.length}),v={type:"offer",sdp:d.write(C)});let O=!1;const U=(0,M.parse)((h??[{}])[0].scalabilityMode);if(h&&h.length===1&&U.spatialLayers>1&&u.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(R.debug("send() | enabling legacy simulcast for VP9 SVC"),O=!0,C=d.parse(v.sdp),S=C.media[m.idx],T.addLegacySimulcast({offerMediaObject:S,numStreams:U.spatialLayers}),v={type:"offer",sdp:d.write(C)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),h){R.debug("send() | applying given encodings");const Y=y.sender.getParameters();for(let Z=0;Z<(Y.encodings??[]).length;++Z){const j=Y.encodings[Z],V=h[Z];if(!V)break;Y.encodings[Z]=Object.assign(j,V)}await y.sender.setParameters(Y)}const I=y.mid;if(u.mid=I,C=d.parse(this._pc.localDescription.sdp),S=C.media[m.idx],u.rtcp.cname=w.getCname({offerMediaObject:S}),u.encodings=T.getRtpEncodings({offerMediaObject:S}),h)for(let Y=0;Y<u.encodings.length;++Y)h[Y]&&Object.assign(u.encodings[Y],h[Y]);if(O&&(u.encodings=[u.encodings[0]]),u.encodings.length>1&&(u.codecs[0].mimeType.toLowerCase()==="video/vp8"||u.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Y of u.encodings)Y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:S,reuseMid:m.reuseMid,offerRtpParameters:u,answerRtpParameters:p,codecOptions:c});const A={type:"answer",sdp:this._remoteSdp.getSdp()};return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._mapMidTransceiver.set(I,y),{localId:I,rtpParameters:u,rtpSender:y.sender}}async stopSending(g){this.assertSendDirection(),R.debug("stopSending() [localId:%s]",g);const h=this._mapMidTransceiver.get(g);if(!h)throw new Error("associated RTCRtpTransceiver not found");if(h.sender.replaceTrack(null),this._pc.removeTrack(h.sender),this._remoteSdp.closeMediaSection(h.mid))try{h.stop()}catch{}const f=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(g)}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,h){this.assertSendDirection(),h?R.debug("replaceTrack() [localId:%s, track.id:%s]",g,h.id):R.debug("replaceTrack() [localId:%s, no track]",g);const c=this._mapMidTransceiver.get(g);if(!c)throw new Error("associated RTCRtpTransceiver not found");await c.sender.replaceTrack(h)}async setMaxSpatialLayer(g,h){this.assertSendDirection(),R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",g,h);const c=this._mapMidTransceiver.get(g);if(!c)throw new Error("associated RTCRtpTransceiver not found");const f=c.sender.getParameters();f.encodings.forEach((m,y)=>{y<=h?m.active=!0:m.active=!1}),await c.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(g,f.encodings);const u=await this._pc.createOffer();R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async setRtpEncodingParameters(g,h){this.assertSendDirection(),R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",g,h);const c=this._mapMidTransceiver.get(g);if(!c)throw new Error("associated RTCRtpTransceiver not found");const f=c.sender.getParameters();f.encodings.forEach((m,y)=>{f.encodings[y]={...m,...h}}),await c.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(g,f.encodings);const u=await this._pc.createOffer();R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async getSenderStats(g){this.assertSendDirection();const h=this._mapMidTransceiver.get(g);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.sender.getStats()}async sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:c,label:f,protocol:u}){this.assertSendDirection();const p={negotiated:!0,id:this._nextSendSctpStreamId,ordered:g,maxPacketLifeTime:h,maxRetransmitTime:h,maxRetransmits:c,protocol:u};R.debug("sendDataChannel() [options:%o]",p);const m=this._pc.createDataChannel(f,p);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%_.MIS,!this._hasDataChannelMediaSection){const v=await this._pc.createOffer(),C=d.parse(v.sdp),S=C.media.find(U=>U.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:C}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),this._remoteSdp.sendSctpAssociation({offerMediaObject:S});const O={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._hasDataChannelMediaSection=!0}const y={streamId:p.id,ordered:p.ordered,maxPacketLifeTime:p.maxPacketLifeTime,maxRetransmits:p.maxRetransmits};return{dataChannel:m,sctpStreamParameters:y}}async receive(g){this.assertRecvDirection();const h=[],c=new Map;for(const m of g){const{trackId:y,kind:v,rtpParameters:C,streamId:S}=m;R.debug("receive() [trackId:%s, kind:%s]",y,v);const O=C.mid??String(this._mapMidTransceiver.size);c.set(y,O),this._remoteSdp.receive({mid:O,kind:v,offerRtpParameters:C,streamId:S??C.rtcp.cname,trackId:y})}const f={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);let u=await this._pc.createAnswer();const p=d.parse(u.sdp);for(const m of g){const{trackId:y,rtpParameters:v}=m,C=c.get(y),S=p.media.find(O=>String(O.mid)===C);w.applyCodecParameters({offerRtpParameters:v,answerMediaObject:S})}u={type:"answer",sdp:d.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const m of g){const{trackId:y}=m,v=c.get(y),C=this._pc.getTransceivers().find(S=>S.mid===v);if(!C)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(v,C),h.push({localId:v,track:C.receiver.track,rtpReceiver:C.receiver})}return h}async stopReceiving(g){this.assertRecvDirection();for(const f of g){R.debug("stopReceiving() [localId:%s]",f);const u=this._mapMidTransceiver.get(f);if(!u)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(u.mid)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const c=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const f of g)this._mapMidTransceiver.delete(f)}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){this.assertRecvDirection();const h=this._mapMidTransceiver.get(g);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:g,label:h,protocol:c}){this.assertRecvDirection();const{streamId:f,ordered:u,maxPacketLifeTime:p,maxRetransmits:m}=g,y={negotiated:!0,id:f,ordered:u,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:m,protocol:c};R.debug("receiveDataChannel() [options:%o]",y);const v=this._pc.createDataChannel(h,y);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const C={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const S=await this._pc.createAnswer();if(!this._transportReady){const O=d.parse(S.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setLocalDescription(S),this._hasDataChannelMediaSection=!0}return{dataChannel:v}}async setupTransport({localDtlsRole:g,localSdpObject:h}){h||(h=d.parse(this._pc.localDescription.sdp));const c=w.extractDtlsParameters({sdpObject:h});c.role=g,this._remoteSdp.updateDtlsRole(g==="client"?"server":"client"),await new Promise((f,u)=>{this.safeEmit("@connect",{dtlsParameters:c},f,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Ss.Chrome70=L,Ss}var bs={},ws={},zm;function Ro(){if(zm)return ws;zm=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.getRtpEncodings=d,ws.addLegacySimulcast=s;function d({offerMediaObject:o,track:a}){const w=new Set;for(const E of o.ssrcs??[]){if(E.attribute!=="msid")continue;if(E.value.split(" ")[1]===a.id){const R=E.id;w.add(R)}}if(w.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${a.id}]`);const T=new Map;for(const E of o.ssrcGroups??[]){if(E.semantics!=="FID")continue;let[M,R]=E.ssrcs.split(/\s+/);M=Number(M),R=Number(R),w.has(M)&&(w.delete(M),w.delete(R),T.set(M,R))}for(const E of w)T.set(E,null);const b=[];for(const[E,M]of T){const R={ssrc:E};M&&(R.rtx={ssrc:M}),b.push(R)}return b}function s({offerMediaObject:o,track:a,numStreams:w}){if(w<=1)throw new TypeError("numStreams must be greater than 1");let T,b,E;if(!(o.ssrcs??[]).find(k=>k.attribute!=="msid"?!1:k.value.split(" ")[1]===a.id?(T=k.id,E=k.value.split(" ")[0],!0):!1))throw new Error(`a=ssrc line with msid information not found [track.id:${a.id}]`);(o.ssrcGroups??[]).some(k=>{if(k.semantics!=="FID")return!1;const N=k.ssrcs.split(/\s+/);return Number(N[0])===T?(b=Number(N[1]),!0):!1});const R=o.ssrcs.find(k=>k.attribute==="cname"&&k.id===T);if(!R)throw new Error(`a=ssrc line with cname information not found [track.id:${a.id}]`);const x=R.value,_=[],L=[];for(let k=0;k<w;++k)_.push(T+k),b&&L.push(b+k);o.ssrcGroups=o.ssrcGroups??[],o.ssrcs=o.ssrcs??[],o.ssrcGroups.push({semantics:"SIM",ssrcs:_.join(" ")});for(const k of _)o.ssrcs.push({id:k,attribute:"cname",value:x}),o.ssrcs.push({id:k,attribute:"msid",value:`${E} ${a.id}`});for(let k=0;k<L.length;++k){const N=_[k],g=L[k];o.ssrcs.push({id:g,attribute:"cname",value:x}),o.ssrcs.push({id:g,attribute:"msid",value:`${E} ${a.id}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${N} ${g}`})}}return ws}var Bm;function kS(){if(Bm)return bs;Bm=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.Chrome67=void 0;const d=Nt(),s=Ze(),o=nt(),a=Rt(),w=pi(),T=Ro(),b=Ut(),E=hi(),M=new s.Logger("Chrome67"),R="Chrome67",x={OS:1024,MIS:1024};let _=class Xg extends b.HandlerInterface{constructor(){super();z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_sendStream",new MediaStream);z(this,"_mapSendLocalIdRtpSender",new Map);z(this,"_nextSendLocalId",0);z(this,"_mapRecvLocalIdInfo",new Map);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new Xg}get name(){return R}close(){if(M.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){M.debug("getNativeRtpCapabilities()");const N=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const g=await N.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{N.close()}catch{}const h=d.parse(g.sdp);return w.extractRtpCapabilities({sdpObject:h})}catch(g){try{N.close()}catch{}throw g}}async getNativeSctpCapabilities(){return M.debug("getNativeSctpCapabilities()"),{numStreams:x}}run({direction:N,iceParameters:g,iceCandidates:h,dtlsParameters:c,sctpParameters:f,iceServers:u,iceTransportPolicy:p,additionalSettings:m,proprietaryConstraints:y,extendedRtpCapabilities:v}){M.debug("run()"),this._direction=N,this._remoteSdp=new E.RemoteSdp({iceParameters:g,iceCandidates:h,dtlsParameters:c,sctpParameters:f,planB:!0}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",v),video:a.getSendingRtpParameters("video",v)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",v),video:a.getSendingRemoteRtpParameters("video",v)},c.role&&c.role!=="auto"&&(this._forcedLocalDtlsRole=c.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:u??[],iceTransportPolicy:p??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...m},y),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",C=>{this.emit("@icecandidateerror",C)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(M.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(N){M.debug("updateIceServers()");const g=this._pc.getConfiguration();g.iceServers=N,this._pc.setConfiguration(g)}async restartIce(N){if(M.debug("restartIce()"),this._remoteSdp.updateIceParameters(N),!!this._transportReady)if(this._direction==="send"){const g=await this._pc.createOffer({iceRestart:!0});M.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const h={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const g={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();M.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:N,encodings:g,codecOptions:h,codec:c}){this.assertSendDirection(),M.debug("send() [kind:%s, track.id:%s]",N.kind,N.id),c&&M.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(N),this._pc.addTrack(N,this._sendStream);let f=await this._pc.createOffer(),u=d.parse(f.sdp);u.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let p;const m=o.clone(this._sendingRtpParametersByKind[N.kind]);m.codecs=a.reduceCodecs(m.codecs);const y=o.clone(this._sendingRemoteRtpParametersByKind[N.kind]);if(y.codecs=a.reduceCodecs(y.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),N.kind==="video"&&g&&g.length>1&&(M.debug("send() | enabling simulcast"),u=d.parse(f.sdp),p=u.media.find(O=>O.type==="video"),T.addLegacySimulcast({offerMediaObject:p,track:N,numStreams:g.length}),f={type:"offer",sdp:d.write(u)}),M.debug("send() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),u=d.parse(this._pc.localDescription.sdp),p=u.media.find(O=>O.type===N.kind),m.rtcp.cname=w.getCname({offerMediaObject:p}),m.encodings=T.getRtpEncodings({offerMediaObject:p,track:N}),g)for(let O=0;O<m.encodings.length;++O)g[O]&&Object.assign(m.encodings[O],g[O]);if(m.encodings.length>1&&m.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const O of m.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:m,answerRtpParameters:y,codecOptions:h});const v={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("send() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v);const C=String(this._nextSendLocalId);this._nextSendLocalId++;const S=this._pc.getSenders().find(O=>O.track===N);return this._mapSendLocalIdRtpSender.set(C,S),{localId:C,rtpParameters:m,rtpSender:S}}async stopSending(N){this.assertSendDirection(),M.debug("stopSending() [localId:%s]",N);const g=this._mapSendLocalIdRtpSender.get(N);if(!g)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(g),g.track&&this._sendStream.removeTrack(g.track),this._mapSendLocalIdRtpSender.delete(N);const h=await this._pc.createOffer();M.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h);try{await this._pc.setLocalDescription(h)}catch(f){if(this._sendStream.getTracks().length===0){M.warn("stopSending() | ignoring expected error due no sending tracks: %s",f.toString());return}throw f}if(this._pc.signalingState==="stable")return;const c={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async pauseSending(N){}async resumeSending(N){}async replaceTrack(N,g){this.assertSendDirection(),g?M.debug("replaceTrack() [localId:%s, track.id:%s]",N,g.id):M.debug("replaceTrack() [localId:%s, no track]",N);const h=this._mapSendLocalIdRtpSender.get(N);if(!h)throw new Error("associated RTCRtpSender not found");const c=h.track;await h.replaceTrack(g),c&&this._sendStream.removeTrack(c),g&&this._sendStream.addTrack(g)}async setMaxSpatialLayer(N,g){this.assertSendDirection(),M.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",N,g);const h=this._mapSendLocalIdRtpSender.get(N);if(!h)throw new Error("associated RTCRtpSender not found");const c=h.getParameters();c.encodings.forEach((f,u)=>{u<=g?f.active=!0:f.active=!1}),await h.setParameters(c)}async setRtpEncodingParameters(N,g){this.assertSendDirection(),M.debug("setRtpEncodingParameters() [localId:%s, params:%o]",N,g);const h=this._mapSendLocalIdRtpSender.get(N);if(!h)throw new Error("associated RTCRtpSender not found");const c=h.getParameters();c.encodings.forEach((f,u)=>{c.encodings[u]={...f,...g}}),await h.setParameters(c)}async getSenderStats(N){this.assertSendDirection();const g=this._mapSendLocalIdRtpSender.get(N);if(!g)throw new Error("associated RTCRtpSender not found");return g.getStats()}async sendDataChannel({ordered:N,maxPacketLifeTime:g,maxRetransmits:h,label:c,protocol:f}){this.assertSendDirection();const u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:N,maxPacketLifeTime:g,maxRetransmitTime:g,maxRetransmits:h,protocol:f};M.debug("sendDataChannel() [options:%o]",u);const p=this._pc.createDataChannel(c,u);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,!this._hasDataChannelMediaSection){const y=await this._pc.createOffer(),v=d.parse(y.sdp),C=v.media.find(O=>O.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v}),M.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",y),await this._pc.setLocalDescription(y),this._remoteSdp.sendSctpAssociation({offerMediaObject:C});const S={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._hasDataChannelMediaSection=!0}const m={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits};return{dataChannel:p,sctpStreamParameters:m}}async receive(N){this.assertRecvDirection();const g=[];for(const u of N){const{trackId:p,kind:m,rtpParameters:y,streamId:v}=u;M.debug("receive() [trackId:%s, kind:%s]",p,m);const C=m;this._remoteSdp.receive({mid:C,kind:m,offerRtpParameters:y,streamId:v??y.rtcp.cname,trackId:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);let c=await this._pc.createAnswer();const f=d.parse(c.sdp);for(const u of N){const{kind:p,rtpParameters:m}=u,y=p,v=f.media.find(C=>String(C.mid)===y);w.applyCodecParameters({offerRtpParameters:m,answerMediaObject:v})}c={type:"answer",sdp:d.write(f)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),M.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const u of N){const{kind:p,trackId:m,rtpParameters:y}=u,v=m,C=p,S=this._pc.getReceivers().find(O=>O.track&&O.track.id===v);if(!S)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(v,{mid:C,rtpParameters:y,rtpReceiver:S}),g.push({localId:v,track:S.track,rtpReceiver:S})}return g}async stopReceiving(N){this.assertRecvDirection();for(const c of N){M.debug("stopReceiving() [localId:%s]",c);const{mid:f,rtpParameters:u}=this._mapRecvLocalIdInfo.get(c)??{};this._mapRecvLocalIdInfo.delete(c),this._remoteSdp.planBStopReceiving({mid:f,offerRtpParameters:u})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();M.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}async pauseReceiving(N){}async resumeReceiving(N){}async getReceiverStats(N){this.assertRecvDirection();const{rtpReceiver:g}=this._mapRecvLocalIdInfo.get(N)??{};if(!g)throw new Error("associated RTCRtpReceiver not found");return g.getStats()}async receiveDataChannel({sctpStreamParameters:N,label:g,protocol:h}){this.assertRecvDirection();const{streamId:c,ordered:f,maxPacketLifeTime:u,maxRetransmits:p}=N,m={negotiated:!0,id:c,ordered:f,maxPacketLifeTime:u,maxRetransmitTime:u,maxRetransmits:p,protocol:h};M.debug("receiveDataChannel() [options:%o]",m);const y=this._pc.createDataChannel(g,m);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const v={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const C=await this._pc.createAnswer();if(!this._transportReady){const S=d.parse(C.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:S})}M.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setLocalDescription(C),this._hasDataChannelMediaSection=!0}return{dataChannel:y}}async setupTransport({localDtlsRole:N,localSdpObject:g}){g||(g=d.parse(this._pc.localDescription.sdp));const h=w.extractDtlsParameters({sdpObject:g});h.role=N,this._remoteSdp.updateDtlsRole(N==="client"?"server":"client"),await new Promise((c,f)=>{this.safeEmit("@connect",{dtlsParameters:h},c,f)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return bs.Chrome67=_,bs}var Rs={},qm;function AS(){if(qm)return Rs;qm=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.Chrome55=void 0;const d=Nt(),s=Ze(),o=wt(),a=nt(),w=Rt(),T=pi(),b=Ro(),E=Ut(),M=hi(),R=new s.Logger("Chrome55"),x="Chrome55",_={OS:1024,MIS:1024};let L=class Fg extends E.HandlerInterface{constructor(){super();z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_sendStream",new MediaStream);z(this,"_mapSendLocalIdTrack",new Map);z(this,"_nextSendLocalId",0);z(this,"_mapRecvLocalIdInfo",new Map);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new Fg}get name(){return x}close(){if(R.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const g=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const h=await g.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{g.close()}catch{}const c=d.parse(h.sdp);return T.extractRtpCapabilities({sdpObject:c})}catch(h){try{g.close()}catch{}throw h}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:_}}run({direction:g,iceParameters:h,iceCandidates:c,dtlsParameters:f,sctpParameters:u,iceServers:p,iceTransportPolicy:m,additionalSettings:y,proprietaryConstraints:v,extendedRtpCapabilities:C}){R.debug("run()"),this._direction=g,this._remoteSdp=new M.RemoteSdp({iceParameters:h,iceCandidates:c,dtlsParameters:f,sctpParameters:u,planB:!0}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",C),video:w.getSendingRtpParameters("video",C)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",C),video:w.getSendingRemoteRtpParameters("video",C)},f.role&&f.role!=="auto"&&(this._forcedLocalDtlsRole=f.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:p??[],iceTransportPolicy:m??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...y},v),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",S=>{this.emit("@icecandidateerror",S)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(g){R.debug("updateIceServers()");const h=this._pc.getConfiguration();h.iceServers=g,this._pc.setConfiguration(h)}async restartIce(g){if(R.debug("restartIce()"),this._remoteSdp.updateIceParameters(g),!!this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const c={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const c=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:g,encodings:h,codecOptions:c,codec:f}){this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",g.kind,g.id),f&&R.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(g),this._pc.addStream(this._sendStream);let u=await this._pc.createOffer(),p=d.parse(u.sdp);p.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let m;const y=a.clone(this._sendingRtpParametersByKind[g.kind]);y.codecs=w.reduceCodecs(y.codecs);const v=a.clone(this._sendingRemoteRtpParametersByKind[g.kind]);if(v.codecs=w.reduceCodecs(v.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),g.kind==="video"&&h&&h.length>1&&(R.debug("send() | enabling simulcast"),p=d.parse(u.sdp),m=p.media.find(O=>O.type==="video"),b.addLegacySimulcast({offerMediaObject:m,track:g,numStreams:h.length}),u={type:"offer",sdp:d.write(p)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),p=d.parse(this._pc.localDescription.sdp),m=p.media.find(O=>O.type===g.kind),y.rtcp.cname=T.getCname({offerMediaObject:m}),y.encodings=b.getRtpEncodings({offerMediaObject:m,track:g}),h)for(let O=0;O<y.encodings.length;++O)h[O]&&Object.assign(y.encodings[O],h[O]);if(y.encodings.length>1&&y.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const O of y.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:m,offerRtpParameters:y,answerRtpParameters:v,codecOptions:c});const C={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C);const S=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(S,g),{localId:S,rtpParameters:y}}async stopSending(g){this.assertSendDirection(),R.debug("stopSending() [localId:%s]",g);const h=this._mapSendLocalIdTrack.get(g);if(!h)throw new Error("track not found");this._mapSendLocalIdTrack.delete(g),this._sendStream.removeTrack(h),this._pc.addStream(this._sendStream);const c=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c);try{await this._pc.setLocalDescription(c)}catch(u){if(this._sendStream.getTracks().length===0){R.warn("stopSending() | ignoring expected error due no sending tracks: %s",u.toString());return}throw u}if(this._pc.signalingState==="stable")return;const f={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,h){throw new o.UnsupportedError("not implemented")}async setMaxSpatialLayer(g,h){throw new o.UnsupportedError(" not implemented")}async setRtpEncodingParameters(g,h){throw new o.UnsupportedError("not supported")}async getSenderStats(g){throw new o.UnsupportedError("not implemented")}async sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:c,label:f,protocol:u}){this.assertSendDirection();const p={negotiated:!0,id:this._nextSendSctpStreamId,ordered:g,maxPacketLifeTime:h,maxRetransmitTime:h,maxRetransmits:c,protocol:u};R.debug("sendDataChannel() [options:%o]",p);const m=this._pc.createDataChannel(f,p);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%_.MIS,!this._hasDataChannelMediaSection){const v=await this._pc.createOffer(),C=d.parse(v.sdp),S=C.media.find(U=>U.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:C}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),this._remoteSdp.sendSctpAssociation({offerMediaObject:S});const O={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._hasDataChannelMediaSection=!0}const y={streamId:p.id,ordered:p.ordered,maxPacketLifeTime:p.maxPacketLifeTime,maxRetransmits:p.maxRetransmits};return{dataChannel:m,sctpStreamParameters:y}}async receive(g){this.assertRecvDirection();const h=[];for(const p of g){const{trackId:m,kind:y,rtpParameters:v,streamId:C}=p;R.debug("receive() [trackId:%s, kind:%s]",m,y);const S=y;this._remoteSdp.receive({mid:S,kind:y,offerRtpParameters:v,streamId:C??v.rtcp.cname,trackId:m})}const c={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);let f=await this._pc.createAnswer();const u=d.parse(f.sdp);for(const p of g){const{kind:m,rtpParameters:y}=p,v=m,C=u.media.find(S=>String(S.mid)===v);T.applyCodecParameters({offerRtpParameters:y,answerMediaObject:C})}f={type:"answer",sdp:d.write(u)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f);for(const p of g){const{kind:m,trackId:y,rtpParameters:v}=p,C=m,S=y,O=p.streamId??v.rtcp.cname,I=this._pc.getRemoteStreams().find(A=>A.id===O).getTrackById(S);if(!I)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(S,{mid:C,rtpParameters:v}),h.push({localId:S,track:I})}return h}async stopReceiving(g){this.assertRecvDirection();for(const f of g){R.debug("stopReceiving() [localId:%s]",f);const{mid:u,rtpParameters:p}=this._mapRecvLocalIdInfo.get(f)??{};this._mapRecvLocalIdInfo.delete(f),this._remoteSdp.planBStopReceiving({mid:u,offerRtpParameters:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const c=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){throw new o.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:g,label:h,protocol:c}){this.assertRecvDirection();const{streamId:f,ordered:u,maxPacketLifeTime:p,maxRetransmits:m}=g,y={negotiated:!0,id:f,ordered:u,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:m,protocol:c};R.debug("receiveDataChannel() [options:%o]",y);const v=this._pc.createDataChannel(h,y);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const C={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const S=await this._pc.createAnswer();if(!this._transportReady){const O=d.parse(S.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setLocalDescription(S),this._hasDataChannelMediaSection=!0}return{dataChannel:v}}async setupTransport({localDtlsRole:g,localSdpObject:h}){h||(h=d.parse(this._pc.localDescription.sdp));const c=T.extractDtlsParameters({sdpObject:h});c.role=g,this._remoteSdp.updateDtlsRole(g==="client"?"server":"client"),await new Promise((f,u)=>{this.safeEmit("@connect",{dtlsParameters:c},f,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Rs.Chrome55=L,Rs}var Ts={},Im;function PS(){if(Im)return Ts;Im=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.Firefox120=void 0;const d=Nt(),s=Ze(),o=wt(),a=nt(),w=Rt(),T=pi(),b=ar(),E=Ut(),M=hi(),R=Rn(),x=new s.Logger("Firefox120"),_="Firefox120",L={OS:16,MIS:2048};let k=class Zg extends E.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new Zg}get name(){return _}close(){if(x.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){x.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),c=document.createElement("canvas");c.getContext("2d");const u=c.captureStream().getVideoTracks()[0];try{h.addTransceiver("audio",{direction:"sendrecv"}),h.addTransceiver(u,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const p=await h.createOffer();try{c.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}const m=d.parse(p.sdp);return T.extractRtpCapabilities({sdpObject:m})}catch(p){try{c.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}throw p}}async getNativeSctpCapabilities(){return x.debug("getNativeSctpCapabilities()"),{numStreams:L}}run({direction:h,iceParameters:c,iceCandidates:f,dtlsParameters:u,sctpParameters:p,iceServers:m,iceTransportPolicy:y,additionalSettings:v,proprietaryConstraints:C,extendedRtpCapabilities:S}){this.assertNotClosed(),x.debug("run()"),this._direction=h,this._remoteSdp=new M.RemoteSdp({iceParameters:c,iceCandidates:f,dtlsParameters:u,sctpParameters:p}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",S),video:w.getSendingRtpParameters("video",S)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",S),video:w.getSendingRemoteRtpParameters("video",S)},this._pc=new RTCPeerConnection({iceServers:m??[],iceTransportPolicy:y??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...v},C),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",O=>{this.emit("@icecandidateerror",O)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(x.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(h){throw this.assertNotClosed(),new o.UnsupportedError("not supported")}async restartIce(h){if(this.assertNotClosed(),x.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),!!this._transportReady)if(this._direction==="send"){const c=await this._pc.createOffer({iceRestart:!0});x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const f={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}else{const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const f=await this._pc.createAnswer();x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:c,codecOptions:f,codec:u,onRtpSender:p}){this.assertNotClosed(),this.assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),c&&c.length>1&&c.forEach((Y,Z)=>{Y.rid=`r${Z}`});const m=a.clone(this._sendingRtpParametersByKind[h.kind]);m.codecs=w.reduceCodecs(m.codecs,u);const y=a.clone(this._sendingRemoteRtpParametersByKind[h.kind]);y.codecs=w.reduceCodecs(y.codecs,u);const v=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream],sendEncodings:c});p&&p(v.sender);const C=await this._pc.createOffer();let S=d.parse(C.sdp);S.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:S});const O=(0,R.parse)((c??[{}])[0].scalabilityMode);x.debug("send() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const U=v.mid;m.mid=U,S=d.parse(this._pc.localDescription.sdp);const I=S.media[S.media.length-1];if(m.rtcp.cname=T.getCname({offerMediaObject:I}),!c)m.encodings=b.getRtpEncodings({offerMediaObject:I});else if(c.length===1){const Y=b.getRtpEncodings({offerMediaObject:I});Object.assign(Y[0],c[0]),m.encodings=Y}else m.encodings=c;if(m.encodings.length>1&&(m.codecs[0].mimeType.toLowerCase()==="video/vp8"||m.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Y of m.encodings)Y.scalabilityMode?Y.scalabilityMode=`L1T${O.temporalLayers}`:Y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:I,offerRtpParameters:m,answerRtpParameters:y,codecOptions:f});const A={type:"answer",sdp:this._remoteSdp.getSdp()};return x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",A),await this._pc.setRemoteDescription(A),this._mapMidTransceiver.set(U,v),{localId:U,rtpParameters:m,rtpSender:v.sender}}async stopSending(h){if(this.assertSendDirection(),x.debug("stopSending() [localId:%s]",h),this._closed)return;const c=this._mapMidTransceiver.get(h);if(!c)throw new Error("associated transceiver not found");c.sender.replaceTrack(null),this._pc.removeTrack(c.sender),this._remoteSdp.disableMediaSection(c.mid);const f=await this._pc.createOffer();x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),x.debug("pauseSending() [localId:%s]",h);const c=this._mapMidTransceiver.get(h);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="inactive",this._remoteSdp.pauseMediaSection(h);const f=await this._pc.createOffer();x.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),x.debug("resumeSending() [localId:%s]",h);const c=this._mapMidTransceiver.get(h);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(h);const f=await this._pc.createOffer();x.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async replaceTrack(h,c){this.assertNotClosed(),this.assertSendDirection(),c?x.debug("replaceTrack() [localId:%s, track.id:%s]",h,c.id):x.debug("replaceTrack() [localId:%s, no track]",h);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated RTCRtpTransceiver not found");await f.sender.replaceTrack(c)}async setMaxSpatialLayer(h,c){this.assertNotClosed(),this.assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,c);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated transceiver not found");const u=f.sender.getParameters();u.encodings.forEach((y,v)=>{v<=c?y.active=!0:y.active=!1}),await f.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();x.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async setRtpEncodingParameters(h,c){this.assertNotClosed(),this.assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,c);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated RTCRtpTransceiver not found");const u=f.sender.getParameters();u.encodings.forEach((y,v)=>{u.encodings[v]={...y,...c}}),await f.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();x.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const c=this._mapMidTransceiver.get(h);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:c,maxRetransmits:f,label:u,protocol:p}){this.assertNotClosed(),this.assertSendDirection();const m={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:c,maxRetransmits:f,protocol:p};x.debug("sendDataChannel() [options:%o]",m);const y=this._pc.createDataChannel(u,m);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%L.MIS,!this._hasDataChannelMediaSection){const C=await this._pc.createOffer(),S=d.parse(C.sdp),O=S.media.find(I=>I.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:S}),x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const U={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setRemoteDescription(U),this._hasDataChannelMediaSection=!0}const v={streamId:m.id,ordered:m.ordered,maxPacketLifeTime:m.maxPacketLifeTime,maxRetransmits:m.maxRetransmits};return{dataChannel:y,sctpStreamParameters:v}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const c=[],f=new Map;for(const y of h){const{trackId:v,kind:C,rtpParameters:S,streamId:O}=y;x.debug("receive() [trackId:%s, kind:%s]",v,C);const U=S.mid??String(this._mapMidTransceiver.size);f.set(v,U),this._remoteSdp.receive({mid:U,kind:C,offerRtpParameters:S,streamId:O??S.rtcp.cname,trackId:v})}const u={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);for(const y of h){const{trackId:v,onRtpReceiver:C}=y;if(C){const S=f.get(v),O=this._pc.getTransceivers().find(U=>U.mid===S);if(!O)throw new Error("transceiver not found");C(O.receiver)}}let p=await this._pc.createAnswer();const m=d.parse(p.sdp);for(const y of h){const{trackId:v,rtpParameters:C}=y,S=f.get(v),O=m.media.find(U=>String(U.mid)===S);T.applyCodecParameters({offerRtpParameters:C,answerMediaObject:O}),p={type:"answer",sdp:d.write(m)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:m}),x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const y of h){const{trackId:v}=y,C=f.get(v),S=this._pc.getTransceivers().find(O=>O.mid===C);if(!S)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(C,S),c.push({localId:C,track:S.receiver.track,rtpReceiver:S.receiver})}return c}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const u of h){x.debug("stopReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(p.mid)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const f=await this._pc.createAnswer();x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f);for(const u of h)this._mapMidTransceiver.delete(u)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){x.debug("pauseReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(u)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const f=await this._pc.createAnswer();x.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){x.debug("resumeReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(u)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const f=await this._pc.createAnswer();x.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}async getReceiverStats(h){this.assertRecvDirection();const c=this._mapMidTransceiver.get(h);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:c,protocol:f}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:u,ordered:p,maxPacketLifeTime:m,maxRetransmits:y}=h,v={negotiated:!0,id:u,ordered:p,maxPacketLifeTime:m,maxRetransmits:y,protocol:f};x.debug("receiveDataChannel() [options:%o]",v);const C=this._pc.createDataChannel(c,v);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const S={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const O=await this._pc.createAnswer();if(!this._transportReady){const U=d.parse(O.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:U})}x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:C}}async setupTransport({localDtlsRole:h,localSdpObject:c}){c||(c=d.parse(this._pc.localDescription.sdp));const f=T.extractDtlsParameters({sdpObject:c});f.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((u,p)=>{this.safeEmit("@connect",{dtlsParameters:f},u,p)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new o.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Ts.Firefox120=k,Ts}var Cs={},Hm;function NS(){if(Hm)return Cs;Hm=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.Firefox60=void 0;const d=Nt(),s=Ze(),o=wt(),a=nt(),w=Rt(),T=pi(),b=ar(),E=Ut(),M=hi(),R=Rn(),x=new s.Logger("Firefox60"),_="Firefox60",L={OS:16,MIS:2048};let k=class $g extends E.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new $g}get name(){return _}close(){if(x.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){x.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),c=document.createElement("canvas");c.getContext("2d");const u=c.captureStream().getVideoTracks()[0];try{h.addTransceiver("audio",{direction:"sendrecv"});const p=h.addTransceiver(u,{direction:"sendrecv"}),m=p.sender.getParameters(),y=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];m.encodings=y,await p.sender.setParameters(m);const v=await h.createOffer();try{c.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}const C=d.parse(v.sdp);return T.extractRtpCapabilities({sdpObject:C})}catch(p){try{c.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}throw p}}async getNativeSctpCapabilities(){return x.debug("getNativeSctpCapabilities()"),{numStreams:L}}run({direction:h,iceParameters:c,iceCandidates:f,dtlsParameters:u,sctpParameters:p,iceServers:m,iceTransportPolicy:y,additionalSettings:v,proprietaryConstraints:C,extendedRtpCapabilities:S}){this.assertNotClosed(),x.debug("run()"),this._direction=h,this._remoteSdp=new M.RemoteSdp({iceParameters:c,iceCandidates:f,dtlsParameters:u,sctpParameters:p}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",S),video:w.getSendingRtpParameters("video",S)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",S),video:w.getSendingRemoteRtpParameters("video",S)},this._pc=new RTCPeerConnection({iceServers:m??[],iceTransportPolicy:y??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...v},C),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",O=>{this.emit("@icecandidateerror",O)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(x.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(h){throw this.assertNotClosed(),new o.UnsupportedError("not supported")}async restartIce(h){if(this.assertNotClosed(),x.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),!!this._transportReady)if(this._direction==="send"){const c=await this._pc.createOffer({iceRestart:!0});x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const f={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}else{const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const f=await this._pc.createAnswer();x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:c,codecOptions:f,codec:u}){this.assertNotClosed(),this.assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),c&&(c=a.clone(c),c.forEach((A,Y)=>{A.rid=`r${Y}`}),c.reverse());const p=a.clone(this._sendingRtpParametersByKind[h.kind]);p.codecs=w.reduceCodecs(p.codecs,u);const m=a.clone(this._sendingRemoteRtpParametersByKind[h.kind]);m.codecs=w.reduceCodecs(m.codecs,u);const y=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream]});if(c){const A=y.sender.getParameters();A.encodings=c,await y.sender.setParameters(A)}const v=await this._pc.createOffer();let C=d.parse(v.sdp);C.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:C});const S=(0,R.parse)((c??[{}])[0].scalabilityMode);x.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const O=y.mid;p.mid=O,C=d.parse(this._pc.localDescription.sdp);const U=C.media[C.media.length-1];if(p.rtcp.cname=T.getCname({offerMediaObject:U}),!c)p.encodings=b.getRtpEncodings({offerMediaObject:U});else if(c.length===1){const A=b.getRtpEncodings({offerMediaObject:U});Object.assign(A[0],c[0]),p.encodings=A}else p.encodings=c.reverse();if(p.encodings.length>1&&(p.codecs[0].mimeType.toLowerCase()==="video/vp8"||p.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const A of p.encodings)A.scalabilityMode?A.scalabilityMode=`L1T${S.temporalLayers}`:A.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:U,offerRtpParameters:p,answerRtpParameters:m,codecOptions:f});const I={type:"answer",sdp:this._remoteSdp.getSdp()};return x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._mapMidTransceiver.set(O,y),{localId:O,rtpParameters:p,rtpSender:y.sender}}async stopSending(h){if(this.assertSendDirection(),x.debug("stopSending() [localId:%s]",h),this._closed)return;const c=this._mapMidTransceiver.get(h);if(!c)throw new Error("associated transceiver not found");c.sender.replaceTrack(null),this._pc.removeTrack(c.sender),this._remoteSdp.disableMediaSection(c.mid);const f=await this._pc.createOffer();x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),x.debug("pauseSending() [localId:%s]",h);const c=this._mapMidTransceiver.get(h);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="inactive",this._remoteSdp.pauseMediaSection(h);const f=await this._pc.createOffer();x.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),x.debug("resumeSending() [localId:%s]",h);const c=this._mapMidTransceiver.get(h);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(h);const f=await this._pc.createOffer();x.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async replaceTrack(h,c){this.assertNotClosed(),this.assertSendDirection(),c?x.debug("replaceTrack() [localId:%s, track.id:%s]",h,c.id):x.debug("replaceTrack() [localId:%s, no track]",h);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated RTCRtpTransceiver not found");await f.sender.replaceTrack(c)}async setMaxSpatialLayer(h,c){this.assertNotClosed(),this.assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,c);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated transceiver not found");const u=f.sender.getParameters();c=u.encodings.length-1-c,u.encodings.forEach((y,v)=>{v>=c?y.active=!0:y.active=!1}),await f.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();x.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async setRtpEncodingParameters(h,c){this.assertNotClosed(),this.assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,c);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated RTCRtpTransceiver not found");const u=f.sender.getParameters();u.encodings.forEach((y,v)=>{u.encodings[v]={...y,...c}}),await f.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();x.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const c=this._mapMidTransceiver.get(h);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:c,maxRetransmits:f,label:u,protocol:p}){this.assertNotClosed(),this.assertSendDirection();const m={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:c,maxRetransmits:f,protocol:p};x.debug("sendDataChannel() [options:%o]",m);const y=this._pc.createDataChannel(u,m);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%L.MIS,!this._hasDataChannelMediaSection){const C=await this._pc.createOffer(),S=d.parse(C.sdp),O=S.media.find(I=>I.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:S}),x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const U={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setRemoteDescription(U),this._hasDataChannelMediaSection=!0}const v={streamId:m.id,ordered:m.ordered,maxPacketLifeTime:m.maxPacketLifeTime,maxRetransmits:m.maxRetransmits};return{dataChannel:y,sctpStreamParameters:v}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const c=[],f=new Map;for(const y of h){const{trackId:v,kind:C,rtpParameters:S,streamId:O}=y;x.debug("receive() [trackId:%s, kind:%s]",v,C);const U=S.mid??String(this._mapMidTransceiver.size);f.set(v,U),this._remoteSdp.receive({mid:U,kind:C,offerRtpParameters:S,streamId:O??S.rtcp.cname,trackId:v})}const u={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let p=await this._pc.createAnswer();const m=d.parse(p.sdp);for(const y of h){const{trackId:v,rtpParameters:C}=y,S=f.get(v),O=m.media.find(U=>String(U.mid)===S);T.applyCodecParameters({offerRtpParameters:C,answerMediaObject:O}),p={type:"answer",sdp:d.write(m)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:m}),x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const y of h){const{trackId:v}=y,C=f.get(v),S=this._pc.getTransceivers().find(O=>O.mid===C);if(!S)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(C,S),c.push({localId:C,track:S.receiver.track,rtpReceiver:S.receiver})}return c}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const u of h){x.debug("stopReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(p.mid)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const f=await this._pc.createAnswer();x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f);for(const u of h)this._mapMidTransceiver.delete(u)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){x.debug("pauseReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(u)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const f=await this._pc.createAnswer();x.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){x.debug("resumeReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(u)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const f=await this._pc.createAnswer();x.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}async getReceiverStats(h){this.assertRecvDirection();const c=this._mapMidTransceiver.get(h);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:c,protocol:f}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:u,ordered:p,maxPacketLifeTime:m,maxRetransmits:y}=h,v={negotiated:!0,id:u,ordered:p,maxPacketLifeTime:m,maxRetransmits:y,protocol:f};x.debug("receiveDataChannel() [options:%o]",v);const C=this._pc.createDataChannel(c,v);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const S={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",S),await this._pc.setRemoteDescription(S);const O=await this._pc.createAnswer();if(!this._transportReady){const U=d.parse(O.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:U})}x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:C}}async setupTransport({localDtlsRole:h,localSdpObject:c}){c||(c=d.parse(this._pc.localDescription.sdp));const f=T.extractDtlsParameters({sdpObject:c});f.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((u,p)=>{this.safeEmit("@connect",{dtlsParameters:f},u,p)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new o.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Cs.Firefox60=k,Cs}var Es={},Vm;function US(){if(Vm)return Es;Vm=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.Safari12=void 0;const d=Nt(),s=Ze(),o=nt(),a=Rt(),w=pi(),T=ar(),b=wo(),E=wt(),M=Ut(),R=hi(),x=Rn(),_=new s.Logger("Safari12"),L="Safari12",k={OS:1024,MIS:1024};let N=class Jg extends M.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new Jg}get name(){return L}close(){if(_.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){_.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{c.addTransceiver("audio"),c.addTransceiver("video");const f=await c.createOffer();try{c.close()}catch{}const u=d.parse(f.sdp),p=w.extractRtpCapabilities({sdpObject:u});return b.addNackSupportForOpus(p),p}catch(f){try{c.close()}catch{}throw f}}async getNativeSctpCapabilities(){return _.debug("getNativeSctpCapabilities()"),{numStreams:k}}run({direction:c,iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m,iceServers:y,iceTransportPolicy:v,additionalSettings:C,proprietaryConstraints:S,extendedRtpCapabilities:O}){this.assertNotClosed(),_.debug("run()"),this._direction=c,this._remoteSdp=new R.RemoteSdp({iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",O),video:a.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",O),video:a.getSendingRemoteRtpParameters("video",O)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:y??[],iceTransportPolicy:v??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...C},S),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",U=>{this.emit("@icecandidateerror",U)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(_.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(c){this.assertNotClosed(),_.debug("updateIceServers()");const f=this._pc.getConfiguration();f.iceServers=c,this._pc.setConfiguration(f)}async restartIce(c){if(this.assertNotClosed(),_.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),!!this._transportReady)if(this._direction==="send"){const f=await this._pc.createOffer({iceRestart:!0});_.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:f,codecOptions:u,codec:p,onRtpSender:m}){this.assertNotClosed(),this.assertSendDirection(),_.debug("send() [kind:%s, track.id:%s]",c.kind,c.id);const y=o.clone(this._sendingRtpParametersByKind[c.kind]);y.codecs=a.reduceCodecs(y.codecs,p);const v=o.clone(this._sendingRemoteRtpParametersByKind[c.kind]);v.codecs=a.reduceCodecs(v.codecs,p);const C=this._remoteSdp.getNextMediaSectionIdx(),S=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream]});m&&m(S.sender);let O=await this._pc.createOffer(),U=d.parse(O.sdp);U.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let I;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U});const A=(0,x.parse)((f??[{}])[0].scalabilityMode);f&&f.length>1&&(_.debug("send() | enabling legacy simulcast"),U=d.parse(O.sdp),I=U.media[C.idx],T.addLegacySimulcast({offerMediaObject:I,numStreams:f.length}),O={type:"offer",sdp:d.write(U)}),_.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const Y=S.mid;if(y.mid=Y,U=d.parse(this._pc.localDescription.sdp),I=U.media[C.idx],y.rtcp.cname=w.getCname({offerMediaObject:I}),y.encodings=T.getRtpEncodings({offerMediaObject:I}),f)for(let j=0;j<y.encodings.length;++j)f[j]&&Object.assign(y.encodings[j],f[j]);if(y.encodings.length>1&&(y.codecs[0].mimeType.toLowerCase()==="video/vp8"||y.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const j of y.encodings)j.scalabilityMode?j.scalabilityMode=`L1T${A.temporalLayers}`:j.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:I,reuseMid:C.reuseMid,offerRtpParameters:y,answerRtpParameters:v,codecOptions:u});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};return _.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._mapMidTransceiver.set(Y,S),{localId:Y,rtpParameters:y,rtpSender:S.sender}}async stopSending(c){if(this.assertSendDirection(),this._closed)return;_.debug("stopSending() [localId:%s]",c);const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");if(f.sender.replaceTrack(null),this._pc.removeTrack(f.sender),this._remoteSdp.closeMediaSection(f.mid))try{f.stop()}catch{}const p=await this._pc.createOffer();_.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),_.debug("pauseSending() [localId:%s]",c);const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="inactive",this._remoteSdp.pauseMediaSection(c);const u=await this._pc.createOffer();_.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),_.debug("resumeSending() [localId:%s]",c);const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(c);const u=await this._pc.createOffer();_.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(c,f){this.assertNotClosed(),this.assertSendDirection(),f?_.debug("replaceTrack() [localId:%s, track.id:%s]",c,f.id):_.debug("replaceTrack() [localId:%s, no track]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(f)}async setMaxSpatialLayer(c,f){this.assertNotClosed(),this.assertSendDirection(),_.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,f);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,C)=>{C<=f?v.active=!0:v.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(c,p.encodings);const m=await this._pc.createOffer();_.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const y={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y)}async setRtpEncodingParameters(c,f){this.assertNotClosed(),this.assertSendDirection(),_.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,f);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,C)=>{p.encodings[C]={...v,...f}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(c,p.encodings);const m=await this._pc.createOffer();_.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const y={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:f,maxRetransmits:u,label:p,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const y={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:f,maxRetransmits:u,protocol:m};_.debug("sendDataChannel() [options:%o]",y);const v=this._pc.createDataChannel(p,y);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const S=await this._pc.createOffer(),O=d.parse(S.sdp),U=O.media.find(A=>A.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),_.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const I={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._hasDataChannelMediaSection=!0}const C={streamId:y.id,ordered:y.ordered,maxPacketLifeTime:y.maxPacketLifeTime,maxRetransmits:y.maxRetransmits};return{dataChannel:v,sctpStreamParameters:C}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const f=[],u=new Map;for(const v of c){const{trackId:C,kind:S,rtpParameters:O,streamId:U}=v;_.debug("receive() [trackId:%s, kind:%s]",C,S);const I=O.mid??String(this._mapMidTransceiver.size);u.set(C,I),this._remoteSdp.receive({mid:I,kind:S,offerRtpParameters:O,streamId:U??O.rtcp.cname,trackId:C})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);for(const v of c){const{trackId:C,onRtpReceiver:S}=v;if(S){const O=u.get(C),U=this._pc.getTransceivers().find(I=>I.mid===O);if(!U)throw new Error("transceiver not found");S(U.receiver)}}let m=await this._pc.createAnswer();const y=d.parse(m.sdp);for(const v of c){const{trackId:C,rtpParameters:S}=v,O=u.get(C),U=y.media.find(I=>String(I.mid)===O);w.applyCodecParameters({offerRtpParameters:S,answerMediaObject:U})}m={type:"answer",sdp:d.write(y)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:y}),_.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const v of c){const{trackId:C}=v,S=u.get(C),O=this._pc.getTransceivers().find(U=>U.mid===S);if(!O)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(S,O),f.push({localId:S,track:O.receiver.track,rtpReceiver:O.receiver})}return f}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const p of c){_.debug("stopReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of c)this._mapMidTransceiver.delete(p)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const p of c){_.debug("pauseReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const p of c){_.debug("resumeReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:f,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:m,maxPacketLifeTime:y,maxRetransmits:v}=c,C={negotiated:!0,id:p,ordered:m,maxPacketLifeTime:y,maxRetransmits:v,protocol:u};_.debug("receiveDataChannel() [options:%o]",C);const S=this._pc.createDataChannel(f,C);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const U=await this._pc.createAnswer();if(!this._transportReady){const I=d.parse(U.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I})}_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setLocalDescription(U),this._hasDataChannelMediaSection=!0}return{dataChannel:S}}async setupTransport({localDtlsRole:c,localSdpObject:f}){f||(f=d.parse(this._pc.localDescription.sdp));const u=w.extractDtlsParameters({sdpObject:f});u.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((p,m)=>{this.safeEmit("@connect",{dtlsParameters:u},p,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new E.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Es.Safari12=N,Es}var Ds={},Gm;function jS(){if(Gm)return Ds;Gm=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.Safari11=void 0;const d=Nt(),s=Ze(),o=nt(),a=Rt(),w=pi(),T=Ro(),b=Ut(),E=hi(),M=new s.Logger("Safari11"),R="Safari11",x={OS:1024,MIS:1024};let _=class Wg extends b.HandlerInterface{constructor(){super();z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_sendStream",new MediaStream);z(this,"_mapSendLocalIdRtpSender",new Map);z(this,"_nextSendLocalId",0);z(this,"_mapRecvLocalIdInfo",new Map);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new Wg}get name(){return R}close(){if(M.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){M.debug("getNativeRtpCapabilities()");const N=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const g=await N.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{N.close()}catch{}const h=d.parse(g.sdp);return w.extractRtpCapabilities({sdpObject:h})}catch(g){try{N.close()}catch{}throw g}}async getNativeSctpCapabilities(){return M.debug("getNativeSctpCapabilities()"),{numStreams:x}}run({direction:N,iceParameters:g,iceCandidates:h,dtlsParameters:c,sctpParameters:f,iceServers:u,iceTransportPolicy:p,additionalSettings:m,proprietaryConstraints:y,extendedRtpCapabilities:v}){M.debug("run()"),this._direction=N,this._remoteSdp=new E.RemoteSdp({iceParameters:g,iceCandidates:h,dtlsParameters:c,sctpParameters:f,planB:!0}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",v),video:a.getSendingRtpParameters("video",v)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",v),video:a.getSendingRemoteRtpParameters("video",v)},c.role&&c.role!=="auto"&&(this._forcedLocalDtlsRole=c.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:u??[],iceTransportPolicy:p??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...m},y),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",C=>{this.emit("@icecandidateerror",C)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(M.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(N){M.debug("updateIceServers()");const g=this._pc.getConfiguration();g.iceServers=N,this._pc.setConfiguration(g)}async restartIce(N){if(M.debug("restartIce()"),this._remoteSdp.updateIceParameters(N),!!this._transportReady)if(this._direction==="send"){const g=await this._pc.createOffer({iceRestart:!0});M.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const h={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const g={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();M.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:N,encodings:g,codecOptions:h,codec:c}){this.assertSendDirection(),M.debug("send() [kind:%s, track.id:%s]",N.kind,N.id),c&&M.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(N),this._pc.addTrack(N,this._sendStream);let f=await this._pc.createOffer(),u=d.parse(f.sdp);u.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let p;const m=o.clone(this._sendingRtpParametersByKind[N.kind]);m.codecs=a.reduceCodecs(m.codecs);const y=o.clone(this._sendingRemoteRtpParametersByKind[N.kind]);if(y.codecs=a.reduceCodecs(y.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),N.kind==="video"&&g&&g.length>1&&(M.debug("send() | enabling simulcast"),u=d.parse(f.sdp),p=u.media.find(O=>O.type==="video"),T.addLegacySimulcast({offerMediaObject:p,track:N,numStreams:g.length}),f={type:"offer",sdp:d.write(u)}),M.debug("send() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),u=d.parse(this._pc.localDescription.sdp),p=u.media.find(O=>O.type===N.kind),m.rtcp.cname=w.getCname({offerMediaObject:p}),m.encodings=T.getRtpEncodings({offerMediaObject:p,track:N}),g)for(let O=0;O<m.encodings.length;++O)g[O]&&Object.assign(m.encodings[O],g[O]);if(m.encodings.length>1&&m.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const O of m.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:m,answerRtpParameters:y,codecOptions:h});const v={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("send() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v);const C=String(this._nextSendLocalId);this._nextSendLocalId++;const S=this._pc.getSenders().find(O=>O.track===N);return this._mapSendLocalIdRtpSender.set(C,S),{localId:C,rtpParameters:m,rtpSender:S}}async stopSending(N){this.assertSendDirection();const g=this._mapSendLocalIdRtpSender.get(N);if(!g)throw new Error("associated RTCRtpSender not found");g.track&&this._sendStream.removeTrack(g.track),this._mapSendLocalIdRtpSender.delete(N);const h=await this._pc.createOffer();M.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h);try{await this._pc.setLocalDescription(h)}catch(f){if(this._sendStream.getTracks().length===0){M.warn("stopSending() | ignoring expected error due no sending tracks: %s",f.toString());return}throw f}if(this._pc.signalingState==="stable")return;const c={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async pauseSending(N){}async resumeSending(N){}async replaceTrack(N,g){this.assertSendDirection(),g?M.debug("replaceTrack() [localId:%s, track.id:%s]",N,g.id):M.debug("replaceTrack() [localId:%s, no track]",N);const h=this._mapSendLocalIdRtpSender.get(N);if(!h)throw new Error("associated RTCRtpSender not found");const c=h.track;await h.replaceTrack(g),c&&this._sendStream.removeTrack(c),g&&this._sendStream.addTrack(g)}async setMaxSpatialLayer(N,g){this.assertSendDirection(),M.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",N,g);const h=this._mapSendLocalIdRtpSender.get(N);if(!h)throw new Error("associated RTCRtpSender not found");const c=h.getParameters();c.encodings.forEach((f,u)=>{u<=g?f.active=!0:f.active=!1}),await h.setParameters(c)}async setRtpEncodingParameters(N,g){this.assertSendDirection(),M.debug("setRtpEncodingParameters() [localId:%s, params:%o]",N,g);const h=this._mapSendLocalIdRtpSender.get(N);if(!h)throw new Error("associated RTCRtpSender not found");const c=h.getParameters();c.encodings.forEach((f,u)=>{c.encodings[u]={...f,...g}}),await h.setParameters(c)}async getSenderStats(N){this.assertSendDirection();const g=this._mapSendLocalIdRtpSender.get(N);if(!g)throw new Error("associated RTCRtpSender not found");return g.getStats()}async sendDataChannel({ordered:N,maxPacketLifeTime:g,maxRetransmits:h,label:c,protocol:f}){this.assertSendDirection();const u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:N,maxPacketLifeTime:g,maxRetransmits:h,protocol:f};M.debug("sendDataChannel() [options:%o]",u);const p=this._pc.createDataChannel(c,u);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,!this._hasDataChannelMediaSection){const y=await this._pc.createOffer(),v=d.parse(y.sdp),C=v.media.find(O=>O.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:v}),M.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",y),await this._pc.setLocalDescription(y),this._remoteSdp.sendSctpAssociation({offerMediaObject:C});const S={type:"answer",sdp:this._remoteSdp.getSdp()};M.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._hasDataChannelMediaSection=!0}const m={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits};return{dataChannel:p,sctpStreamParameters:m}}async receive(N){this.assertRecvDirection();const g=[];for(const u of N){const{trackId:p,kind:m,rtpParameters:y,streamId:v}=u;M.debug("receive() [trackId:%s, kind:%s]",p,m);const C=m;this._remoteSdp.receive({mid:C,kind:m,offerRtpParameters:y,streamId:v??y.rtcp.cname,trackId:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);let c=await this._pc.createAnswer();const f=d.parse(c.sdp);for(const u of N){const{kind:p,rtpParameters:m}=u,y=p,v=f.media.find(C=>String(C.mid)===y);w.applyCodecParameters({offerRtpParameters:m,answerMediaObject:v})}c={type:"answer",sdp:d.write(f)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),M.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const u of N){const{kind:p,trackId:m,rtpParameters:y}=u,v=p,C=m,S=this._pc.getReceivers().find(O=>O.track&&O.track.id===C);if(!S)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(C,{mid:v,rtpParameters:y,rtpReceiver:S}),g.push({localId:C,track:S.track,rtpReceiver:S})}return g}async stopReceiving(N){this.assertRecvDirection();for(const c of N){M.debug("stopReceiving() [localId:%s]",c);const{mid:f,rtpParameters:u}=this._mapRecvLocalIdInfo.get(c)??{};this._mapRecvLocalIdInfo.delete(c),this._remoteSdp.planBStopReceiving({mid:f,offerRtpParameters:u})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();M.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}async getReceiverStats(N){this.assertRecvDirection();const{rtpReceiver:g}=this._mapRecvLocalIdInfo.get(N)??{};if(!g)throw new Error("associated RTCRtpReceiver not found");return g.getStats()}async pauseReceiving(N){}async resumeReceiving(N){}async receiveDataChannel({sctpStreamParameters:N,label:g,protocol:h}){this.assertRecvDirection();const{streamId:c,ordered:f,maxPacketLifeTime:u,maxRetransmits:p}=N,m={negotiated:!0,id:c,ordered:f,maxPacketLifeTime:u,maxRetransmits:p,protocol:h};M.debug("receiveDataChannel() [options:%o]",m);const y=this._pc.createDataChannel(g,m);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const v={type:"offer",sdp:this._remoteSdp.getSdp()};M.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const C=await this._pc.createAnswer();if(!this._transportReady){const S=d.parse(C.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:S})}M.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setLocalDescription(C),this._hasDataChannelMediaSection=!0}return{dataChannel:y}}async setupTransport({localDtlsRole:N,localSdpObject:g}){g||(g=d.parse(this._pc.localDescription.sdp));const h=w.extractDtlsParameters({sdpObject:g});h.role=N,this._remoteSdp.updateDtlsRole(N==="client"?"server":"client"),await new Promise((c,f)=>{this.safeEmit("@connect",{dtlsParameters:h},c,f)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Ds.Safari11=_,Ds}var xs={},Ms={},Ym;function zS(){if(Ym)return Ms;Ym=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.getCapabilities=s,Ms.mangleRtpParameters=o;const d=nt();function s(){const a=RTCRtpReceiver.getCapabilities(),w=d.clone(a);for(const T of w.codecs??[]){if(T.channels=T.numChannels,delete T.numChannels,T.mimeType=T.mimeType??`${T.kind}/${T.name}`,T.parameters){const b=T.parameters;b.apt&&(b.apt=Number(b.apt)),b["packetization-mode"]&&(b["packetization-mode"]=Number(b["packetization-mode"]))}for(const b of T.rtcpFeedback??[])b.parameter||(b.parameter="")}return w}function o(a){const w=d.clone(a);w.mid&&(w.muxId=w.mid,delete w.mid);for(const T of w.codecs)T.channels&&(T.numChannels=T.channels,delete T.channels),T.mimeType&&!T.name&&(T.name=T.mimeType.split("/")[1]),delete T.mimeType;return w}return Ms}var Qm;function BS(){if(Qm)return xs;Qm=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.Edge11=void 0;const d=Ze(),s=wt(),o=nt(),a=Rt(),w=zS(),T=Ut(),b=new d.Logger("Edge11"),E="Edge11";let M=class e_ extends T.HandlerInterface{constructor(){super();z(this,"_sendingRtpParametersByKind");z(this,"_remoteIceParameters");z(this,"_remoteIceCandidates");z(this,"_remoteDtlsParameters");z(this,"_iceGatherer");z(this,"_iceTransport");z(this,"_dtlsTransport");z(this,"_rtpSenders",new Map);z(this,"_rtpReceivers",new Map);z(this,"_nextSendLocalId",0);z(this,"_cname");z(this,"_transportReady",!1)}static createFactory(){return()=>new e_}get name(){return E}close(){b.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const _ of this._rtpSenders.values())try{_.stop()}catch{}for(const _ of this._rtpReceivers.values())try{_.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return b.debug("getNativeRtpCapabilities()"),w.getCapabilities()}async getNativeSctpCapabilities(){return b.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:_,iceParameters:L,iceCandidates:k,dtlsParameters:N,sctpParameters:g,iceServers:h,iceTransportPolicy:c,additionalSettings:f,proprietaryConstraints:u,extendedRtpCapabilities:p}){b.debug("run()"),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",p),video:a.getSendingRtpParameters("video",p)},this._remoteIceParameters=L,this._remoteIceCandidates=k,this._remoteDtlsParameters=N,this._cname=`CNAME-${o.generateRandomNumber()}`,this.setIceGatherer({iceServers:h,iceTransportPolicy:c}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(_){throw new s.UnsupportedError("not supported")}async restartIce(_){if(b.debug("restartIce()"),this._remoteIceParameters=_,!!this._transportReady){b.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,_,"controlling");for(const L of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(L);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:_,encodings:L,codecOptions:k,codec:N}){b.debug("send() [kind:%s, track.id:%s]",_.kind,_.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),b.debug("send() | calling new RTCRtpSender()");const g=new RTCRtpSender(_,this._dtlsTransport),h=o.clone(this._sendingRtpParametersByKind[_.kind]);h.codecs=a.reduceCodecs(h.codecs,N);const c=h.codecs.some(p=>/.+\/rtx$/i.test(p.mimeType));L||(L=[{}]);for(const p of L)p.ssrc=o.generateRandomNumber(),c&&(p.rtx={ssrc:o.generateRandomNumber()});h.encodings=L,h.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const f=w.mangleRtpParameters(h);b.debug("send() | calling rtpSender.send() [params:%o]",f),await g.send(f);const u=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(u,g),{localId:u,rtpParameters:h,rtpSender:g}}async stopSending(_){b.debug("stopSending() [localId:%s]",_);const L=this._rtpSenders.get(_);if(!L)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(_);try{b.debug("stopSending() | calling rtpSender.stop()"),L.stop()}catch(k){throw b.warn("stopSending() | rtpSender.stop() failed:%o",k),k}}async pauseSending(_){}async resumeSending(_){}async replaceTrack(_,L){L?b.debug("replaceTrack() [localId:%s, track.id:%s]",_,L.id):b.debug("replaceTrack() [localId:%s, no track]",_);const k=this._rtpSenders.get(_);if(!k)throw new Error("RTCRtpSender not found");k.setTrack(L)}async setMaxSpatialLayer(_,L){b.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",_,L);const k=this._rtpSenders.get(_);if(!k)throw new Error("RTCRtpSender not found");const N=k.getParameters();N.encodings.forEach((g,h)=>{h<=L?g.active=!0:g.active=!1}),await k.setParameters(N)}async setRtpEncodingParameters(_,L){b.debug("setRtpEncodingParameters() [localId:%s, params:%o]",_,L);const k=this._rtpSenders.get(_);if(!k)throw new Error("RTCRtpSender not found");const N=k.getParameters();N.encodings.forEach((g,h)=>{N.encodings[h]={...g,...L}}),await k.setParameters(N)}async getSenderStats(_){const L=this._rtpSenders.get(_);if(!L)throw new Error("RTCRtpSender not found");return L.getStats()}async sendDataChannel(_){throw new s.UnsupportedError("not implemented")}async receive(_){const L=[];for(const k of _){const{trackId:N,kind:g}=k;b.debug("receive() [trackId:%s, kind:%s]",N,g)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const k of _){const{trackId:N,kind:g,rtpParameters:h}=k;b.debug("receive() | calling new RTCRtpReceiver()");const c=new RTCRtpReceiver(this._dtlsTransport,g);c.addEventListener("error",p=>{b.error('rtpReceiver "error" event [event:%o]',p)});const f=w.mangleRtpParameters(h);b.debug("receive() | calling rtpReceiver.receive() [params:%o]",f),await c.receive(f);const u=N;this._rtpReceivers.set(u,c),L.push({localId:u,track:c.track,rtpReceiver:c})}return L}async stopReceiving(_){for(const L of _){b.debug("stopReceiving() [localId:%s]",L);const k=this._rtpReceivers.get(L);if(!k)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(L);try{b.debug("stopReceiving() | calling rtpReceiver.stop()"),k.stop()}catch(N){b.warn("stopReceiving() | rtpReceiver.stop() failed:%o",N)}}}async pauseReceiving(_){}async resumeReceiving(_){}async getReceiverStats(_){const L=this._rtpReceivers.get(_);if(!L)throw new Error("RTCRtpReceiver not found");return L.getStats()}async receiveDataChannel(_){throw new s.UnsupportedError("not implemented")}setIceGatherer({iceServers:_,iceTransportPolicy:L}){const k=new RTCIceGatherer({iceServers:_??[],gatherPolicy:L??"all"});k.addEventListener("error",N=>{b.error('iceGatherer "error" event [event:%o]',N)});try{k.gather()}catch(N){b.debug("setIceGatherer() | iceGatherer.gather() failed: %s",N.toString())}this._iceGatherer=k}setIceTransport(){const _=new RTCIceTransport(this._iceGatherer);_.addEventListener("statechange",()=>{switch(_.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),_.addEventListener("icestatechange",()=>{switch(_.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),_.addEventListener("candidatepairchange",L=>{b.debug('iceTransport "candidatepairchange" event [pair:%o]',L.pair)}),this._iceTransport=_}setDtlsTransport(){const _=new RTCDtlsTransport(this._iceTransport);_.addEventListener("statechange",()=>{b.debug('dtlsTransport "statechange" event [state:%s]',_.state)}),_.addEventListener("dtlsstatechange",()=>{b.debug('dtlsTransport "dtlsstatechange" event [state:%s]',_.state),_.state==="closed"&&this.emit("@connectionstatechange","closed")}),_.addEventListener("error",L=>{b.error('dtlsTransport "error" event [event:%o]',L)}),this._dtlsTransport=_}async setupTransport({localDtlsRole:_}){b.debug("setupTransport()");const L=this._dtlsTransport.getLocalParameters();L.role=_,await new Promise((k,N)=>{this.safeEmit("@connect",{dtlsParameters:L},k,N)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const k of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(k);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(k=>k.algorithm==="sha-256"||k.algorithm==="sha-384"||k.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}};return xs.Edge11=M,xs}var Ls={},Km;function qS(){if(Km)return Ls;Km=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.ReactNativeUnifiedPlan=void 0;const d=Nt(),s=Ze(),o=nt(),a=Rt(),w=pi(),T=ar(),b=wo(),E=wt(),M=Ut(),R=hi(),x=Rn(),_=new s.Logger("ReactNativeUnifiedPlan"),L="ReactNativeUnifiedPlan",k={OS:1024,MIS:1024};let N=class t_ extends M.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new t_}get name(){return L}close(){if(_.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){_.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const f=await c.createOffer();try{c.close()}catch{}const u=d.parse(f.sdp),p=w.extractRtpCapabilities({sdpObject:u});return b.addNackSupportForOpus(p),p}catch(f){try{c.close()}catch{}throw f}}async getNativeSctpCapabilities(){return _.debug("getNativeSctpCapabilities()"),{numStreams:k}}run({direction:c,iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m,iceServers:y,iceTransportPolicy:v,additionalSettings:C,proprietaryConstraints:S,extendedRtpCapabilities:O}){this.assertNotClosed(),_.debug("run()"),this._direction=c,this._remoteSdp=new R.RemoteSdp({iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m}),this._sendingRtpParametersByKind={audio:a.getSendingRtpParameters("audio",O),video:a.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:a.getSendingRemoteRtpParameters("audio",O),video:a.getSendingRemoteRtpParameters("video",O)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:y??[],iceTransportPolicy:v??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...C},S),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",U=>{this.emit("@icecandidateerror",U)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(_.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(c){this.assertNotClosed(),_.debug("updateIceServers()");const f=this._pc.getConfiguration();f.iceServers=c,this._pc.setConfiguration(f)}async restartIce(c){if(this.assertNotClosed(),_.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),!!this._transportReady)if(this._direction==="send"){const f=await this._pc.createOffer({iceRestart:!0});_.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:f,codecOptions:u,codec:p,onRtpSender:m}){this.assertNotClosed(),this.assertSendDirection(),_.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),f&&f.length>1&&f.forEach((V,te)=>{V.rid=`r${te}`});const y=o.clone(this._sendingRtpParametersByKind[c.kind]);y.codecs=a.reduceCodecs(y.codecs,p);const v=o.clone(this._sendingRemoteRtpParametersByKind[c.kind]);v.codecs=a.reduceCodecs(v.codecs,p);const C=this._remoteSdp.getNextMediaSectionIdx(),S=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:f});m&&m(S.sender);let O=await this._pc.createOffer(),U=d.parse(O.sdp);U.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let I;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U});let A=!1;const Y=(0,x.parse)((f??[{}])[0].scalabilityMode);f&&f.length===1&&Y.spatialLayers>1&&y.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(_.debug("send() | enabling legacy simulcast for VP9 SVC"),A=!0,U=d.parse(O.sdp),I=U.media[C.idx],T.addLegacySimulcast({offerMediaObject:I,numStreams:Y.spatialLayers}),O={type:"offer",sdp:d.write(U)}),_.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);let Z=S.mid??void 0;if(Z||_.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),y.mid=Z,U=d.parse(this._pc.localDescription.sdp),I=U.media[C.idx],y.rtcp.cname=w.getCname({offerMediaObject:I}),!f)y.encodings=T.getRtpEncodings({offerMediaObject:I});else if(f.length===1){let V=T.getRtpEncodings({offerMediaObject:I});Object.assign(V[0],f[0]),A&&(V=[V[0]]),y.encodings=V}else y.encodings=f;if(y.encodings.length>1&&(y.codecs[0].mimeType.toLowerCase()==="video/vp8"||y.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const V of y.encodings)V.scalabilityMode?V.scalabilityMode=`L1T${Y.temporalLayers}`:V.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:I,reuseMid:C.reuseMid,offerRtpParameters:y,answerRtpParameters:v,codecOptions:u});const j={type:"answer",sdp:this._remoteSdp.getSdp()};return _.debug("send() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j),Z||(Z=S.mid,y.mid=Z),this._mapMidTransceiver.set(Z,S),{localId:Z,rtpParameters:y,rtpSender:S.sender}}async stopSending(c){if(this.assertSendDirection(),this._closed)return;_.debug("stopSending() [localId:%s]",c);const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");if(f.sender.replaceTrack(null),this._pc.removeTrack(f.sender),this._remoteSdp.closeMediaSection(f.mid))try{f.stop()}catch{}const p=await this._pc.createOffer();_.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),_.debug("pauseSending() [localId:%s]",c);const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="inactive",this._remoteSdp.pauseMediaSection(c);const u=await this._pc.createOffer();_.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),_.debug("resumeSending() [localId:%s]",c);const f=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="sendonly";const u=await this._pc.createOffer();_.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(c,f){this.assertNotClosed(),this.assertSendDirection(),f?_.debug("replaceTrack() [localId:%s, track.id:%s]",c,f.id):_.debug("replaceTrack() [localId:%s, no track]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(f)}async setMaxSpatialLayer(c,f){this.assertNotClosed(),this.assertSendDirection(),_.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,f);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,C)=>{C<=f?v.active=!0:v.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(c,p.encodings);const m=await this._pc.createOffer();_.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const y={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y)}async setRtpEncodingParameters(c,f){this.assertNotClosed(),this.assertSendDirection(),_.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,f);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((v,C)=>{p.encodings[C]={...v,...f}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(c,p.encodings);const m=await this._pc.createOffer();_.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const y={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:f,maxRetransmits:u,label:p,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const y={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:f,maxRetransmits:u,protocol:m};_.debug("sendDataChannel() [options:%o]",y);const v=this._pc.createDataChannel(p,y);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const S=await this._pc.createOffer(),O=d.parse(S.sdp),U=O.media.find(A=>A.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),_.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const I={type:"answer",sdp:this._remoteSdp.getSdp()};_.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",I),await this._pc.setRemoteDescription(I),this._hasDataChannelMediaSection=!0}const C={streamId:y.id,ordered:y.ordered,maxPacketLifeTime:y.maxPacketLifeTime,maxRetransmits:y.maxRetransmits};return{dataChannel:v,sctpStreamParameters:C}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const f=[],u=new Map;for(const v of c){const{trackId:C,kind:S,rtpParameters:O,streamId:U}=v;_.debug("receive() [trackId:%s, kind:%s]",C,S);const I=O.mid??String(this._mapMidTransceiver.size);u.set(C,I),this._remoteSdp.receive({mid:I,kind:S,offerRtpParameters:O,streamId:U??O.rtcp.cname,trackId:C})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);for(const v of c){const{trackId:C,onRtpReceiver:S}=v;if(S){const O=u.get(C),U=this._pc.getTransceivers().find(I=>I.mid===O);if(!U)throw new Error("transceiver not found");S(U.receiver)}}let m=await this._pc.createAnswer();const y=d.parse(m.sdp);for(const v of c){const{trackId:C,rtpParameters:S}=v,O=u.get(C),U=y.media.find(I=>String(I.mid)===O);w.applyCodecParameters({offerRtpParameters:S,answerMediaObject:U})}m={type:"answer",sdp:d.write(y)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:y}),_.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const v of c){const{trackId:C}=v,S=u.get(C),O=this._pc.getTransceivers().find(U=>U.mid===S);if(O)this._mapMidTransceiver.set(S,O),f.push({localId:S,track:O.receiver.track,rtpReceiver:O.receiver});else throw new Error("new RTCRtpTransceiver not found")}return f}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const p of c){_.debug("stopReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of c)this._mapMidTransceiver.delete(p)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const p of c){_.debug("pauseReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const p of c){_.debug("resumeReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();_.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const f=this._mapMidTransceiver.get(c);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:f,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:m,maxPacketLifeTime:y,maxRetransmits:v}=c,C={negotiated:!0,id:p,ordered:m,maxPacketLifeTime:y,maxRetransmits:v,protocol:u};_.debug("receiveDataChannel() [options:%o]",C);const S=this._pc.createDataChannel(f,C);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const U=await this._pc.createAnswer();if(!this._transportReady){const I=d.parse(U.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:I})}_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setLocalDescription(U),this._hasDataChannelMediaSection=!0}return{dataChannel:S}}async setupTransport({localDtlsRole:c,localSdpObject:f}){f||(f=d.parse(this._pc.localDescription.sdp));const u=w.extractDtlsParameters({sdpObject:f});u.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((p,m)=>{this.safeEmit("@connect",{dtlsParameters:u},p,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new E.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Ls.ReactNativeUnifiedPlan=N,Ls}var Os={},Xm;function IS(){if(Xm)return Os;Xm=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.ReactNative=void 0;const d=Nt(),s=Ze(),o=wt(),a=nt(),w=Rt(),T=pi(),b=Ro(),E=Ut(),M=hi(),R=new s.Logger("ReactNative"),x="ReactNative",_={OS:1024,MIS:1024};let L=class i_ extends E.HandlerInterface{constructor(){super();z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_sendStream",new MediaStream);z(this,"_mapSendLocalIdTrack",new Map);z(this,"_nextSendLocalId",0);z(this,"_mapRecvLocalIdInfo",new Map);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new i_}get name(){return x}close(){if(R.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const g=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const h=await g.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{g.close()}catch{}const c=d.parse(h.sdp);return T.extractRtpCapabilities({sdpObject:c})}catch(h){try{g.close()}catch{}throw h}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:_}}run({direction:g,iceParameters:h,iceCandidates:c,dtlsParameters:f,sctpParameters:u,iceServers:p,iceTransportPolicy:m,additionalSettings:y,proprietaryConstraints:v,extendedRtpCapabilities:C}){R.debug("run()"),this._direction=g,this._remoteSdp=new M.RemoteSdp({iceParameters:h,iceCandidates:c,dtlsParameters:f,sctpParameters:u,planB:!0}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",C),video:w.getSendingRtpParameters("video",C)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",C),video:w.getSendingRemoteRtpParameters("video",C)},f.role&&f.role!=="auto"&&(this._forcedLocalDtlsRole=f.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:p??[],iceTransportPolicy:m??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...y},v),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",S=>{this.emit("@icecandidateerror",S)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(g){R.debug("updateIceServers()");const h=this._pc.getConfiguration();h.iceServers=g,this._pc.setConfiguration(h)}async restartIce(g){if(R.debug("restartIce()"),this._remoteSdp.updateIceParameters(g),!!this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const c={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const c=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:g,encodings:h,codecOptions:c,codec:f}){this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",g.kind,g.id),f&&R.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(g),this._pc.addStream(this._sendStream);let u=await this._pc.createOffer(),p=d.parse(u.sdp);p.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let m;const y=a.clone(this._sendingRtpParametersByKind[g.kind]);y.codecs=w.reduceCodecs(y.codecs);const v=a.clone(this._sendingRemoteRtpParametersByKind[g.kind]);if(v.codecs=w.reduceCodecs(v.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),g.kind==="video"&&h&&h.length>1&&(R.debug("send() | enabling simulcast"),p=d.parse(u.sdp),m=p.media.find(O=>O.type==="video"),b.addLegacySimulcast({offerMediaObject:m,track:g,numStreams:h.length}),u={type:"offer",sdp:d.write(p)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),p=d.parse(this._pc.localDescription.sdp),m=p.media.find(O=>O.type===g.kind),y.rtcp.cname=T.getCname({offerMediaObject:m}),y.encodings=b.getRtpEncodings({offerMediaObject:m,track:g}),h)for(let O=0;O<y.encodings.length;++O)h[O]&&Object.assign(y.encodings[O],h[O]);if(y.encodings.length>1&&(y.codecs[0].mimeType.toLowerCase()==="video/vp8"||y.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const O of y.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:m,offerRtpParameters:y,answerRtpParameters:v,codecOptions:c});const C={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C);const S=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(S,g),{localId:S,rtpParameters:y}}async stopSending(g){this.assertSendDirection(),R.debug("stopSending() [localId:%s]",g);const h=this._mapSendLocalIdTrack.get(g);if(!h)throw new Error("track not found");this._mapSendLocalIdTrack.delete(g),this._sendStream.removeTrack(h),this._pc.addStream(this._sendStream);const c=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c);try{await this._pc.setLocalDescription(c)}catch(u){if(this._sendStream.getTracks().length===0){R.warn("stopSending() | ignoring expected error due no sending tracks: %s",u.toString());return}throw u}if(this._pc.signalingState==="stable")return;const f={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,h){throw new o.UnsupportedError("not implemented")}async setMaxSpatialLayer(g,h){throw new o.UnsupportedError("not implemented")}async setRtpEncodingParameters(g,h){throw new o.UnsupportedError("not implemented")}async getSenderStats(g){throw new o.UnsupportedError("not implemented")}async sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:c,label:f,protocol:u}){this.assertSendDirection();const p={negotiated:!0,id:this._nextSendSctpStreamId,ordered:g,maxPacketLifeTime:h,maxRetransmitTime:h,maxRetransmits:c,protocol:u};R.debug("sendDataChannel() [options:%o]",p);const m=this._pc.createDataChannel(f,p);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%_.MIS,!this._hasDataChannelMediaSection){const v=await this._pc.createOffer(),C=d.parse(v.sdp),S=C.media.find(U=>U.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:C}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v),this._remoteSdp.sendSctpAssociation({offerMediaObject:S});const O={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._hasDataChannelMediaSection=!0}const y={streamId:p.id,ordered:p.ordered,maxPacketLifeTime:p.maxPacketLifeTime,maxRetransmits:p.maxRetransmits};return{dataChannel:m,sctpStreamParameters:y}}async receive(g){this.assertRecvDirection();const h=[],c=new Map;for(const m of g){const{trackId:y,kind:v,rtpParameters:C}=m;R.debug("receive() [trackId:%s, kind:%s]",y,v);const S=v;let O=m.streamId??C.rtcp.cname;R.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),O+=`-hack-${a.generateRandomNumber()}`,c.set(y,O),this._remoteSdp.receive({mid:S,kind:v,offerRtpParameters:C,streamId:O,trackId:y})}const f={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);let u=await this._pc.createAnswer();const p=d.parse(u.sdp);for(const m of g){const{kind:y,rtpParameters:v}=m,C=y,S=p.media.find(O=>String(O.mid)===C);T.applyCodecParameters({offerRtpParameters:v,answerMediaObject:S})}u={type:"answer",sdp:d.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const m of g){const{kind:y,trackId:v,rtpParameters:C}=m,S=v,O=y,U=c.get(v),A=this._pc.getRemoteStreams().find(Y=>Y.id===U).getTrackById(S);if(!A)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(S,{mid:O,rtpParameters:C}),h.push({localId:S,track:A})}return h}async stopReceiving(g){this.assertRecvDirection();for(const f of g){R.debug("stopReceiving() [localId:%s]",f);const{mid:u,rtpParameters:p}=this._mapRecvLocalIdInfo.get(f)??{};this._mapRecvLocalIdInfo.delete(f),this._remoteSdp.planBStopReceiving({mid:u,offerRtpParameters:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const c=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){throw new o.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:g,label:h,protocol:c}){this.assertRecvDirection();const{streamId:f,ordered:u,maxPacketLifeTime:p,maxRetransmits:m}=g,y={negotiated:!0,id:f,ordered:u,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:m,protocol:c};R.debug("receiveDataChannel() [options:%o]",y);const v=this._pc.createDataChannel(h,y);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const C={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const S=await this._pc.createAnswer();if(!this._transportReady){const O=d.parse(S.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setLocalDescription(S),this._hasDataChannelMediaSection=!0}return{dataChannel:v}}async setupTransport({localDtlsRole:g,localSdpObject:h}){h||(h=d.parse(this._pc.localDescription.sdp));const c=T.extractDtlsParameters({sdpObject:h});c.role=g,this._remoteSdp.updateDtlsRole(g==="client"?"server":"client"),await new Promise((f,u)=>{this.safeEmit("@connect",{dtlsParameters:c},f,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Os.ReactNative=L,Os}var Fm;function r_(){if(Fm)return er;Fm=1,Object.defineProperty(er,"__esModule",{value:!0}),er.Device=void 0,er.detectDeviceAsync=p,er.detectDevice=m;const d=yS(),s=Ze(),o=wn(),a=wt(),w=nt(),T=Rt(),b=Gg(),E=MS(),M=LS(),R=OS(),x=kS(),_=AS(),L=PS(),k=NS(),N=US(),g=jS(),h=BS(),c=qS(),f=IS(),u=new s.Logger("Device");async function p(C){u.debug("detectDeviceAsync() [userAgent:%s]",C),!C&&typeof navigator=="object"&&(C=navigator.userAgent);const S=await(0,d.UAParser)(C).withFeatureCheck();return v(S)}function m(C){u.debug("detectDevice() [userAgent:%s]",C),!C&&typeof navigator=="object"&&(C=navigator.userAgent);const S=(0,d.UAParser)(C);return v(S)}let y=class n_{constructor({handlerName:S,handlerFactory:O}={}){z(this,"_handlerFactory");z(this,"_handlerName");z(this,"_loaded",!1);z(this,"_extendedRtpCapabilities");z(this,"_recvRtpCapabilities");z(this,"_canProduceByKind");z(this,"_sctpCapabilities");z(this,"_observer",new o.EnhancedEventEmitter);if(u.debug("constructor()"),S&&O)throw new TypeError("just one of handlerName or handlerInterface can be given");if(O)this._handlerFactory=O;else{if(S)u.debug("constructor() | handler given: %s",S);else if(S=m(),S)u.debug("constructor() | detected handler: %s",S);else throw new a.UnsupportedError("device not supported");switch(S){case"Chrome111":{this._handlerFactory=E.Chrome111.createFactory();break}case"Chrome74":{this._handlerFactory=M.Chrome74.createFactory();break}case"Chrome70":{this._handlerFactory=R.Chrome70.createFactory();break}case"Chrome67":{this._handlerFactory=x.Chrome67.createFactory();break}case"Chrome55":{this._handlerFactory=_.Chrome55.createFactory();break}case"Firefox120":{this._handlerFactory=L.Firefox120.createFactory();break}case"Firefox60":{this._handlerFactory=k.Firefox60.createFactory();break}case"Safari12":{this._handlerFactory=N.Safari12.createFactory();break}case"Safari11":{this._handlerFactory=g.Safari11.createFactory();break}case"Edge11":{this._handlerFactory=h.Edge11.createFactory();break}case"ReactNativeUnifiedPlan":{this._handlerFactory=c.ReactNativeUnifiedPlan.createFactory();break}case"ReactNative":{this._handlerFactory=f.ReactNative.createFactory();break}default:throw new TypeError(`unknown handlerName "${S}"`)}}const U=this._handlerFactory();this._handlerName=U.name,U.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}static async factory({handlerName:S,handlerFactory:O}={}){if(u.debug("factory()"),S&&O)throw new TypeError("just one of handlerName or handlerInterface can be given");if(!S&&!O&&(S=await p(),!S))throw new a.UnsupportedError("device not supported");return new n_({handlerName:S,handlerFactory:O})}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new a.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new a.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:S,preferLocalCodecsOrder:O=!1}){u.debug("load() [routerRtpCapabilities:%o]",S);let U;try{if(this._loaded)throw new a.InvalidStateError("already loaded");const I=w.clone(S);T.validateRtpCapabilities(I),U=this._handlerFactory();const A=await U.getNativeRtpCapabilities();u.debug("load() | got native RTP capabilities:%o",A);const Y=w.clone(A);T.validateRtpCapabilities(Y),this._extendedRtpCapabilities=T.getExtendedRtpCapabilities(Y,I,O),u.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=T.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=T.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=T.getRecvRtpCapabilities(this._extendedRtpCapabilities),T.validateRtpCapabilities(this._recvRtpCapabilities),u.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await U.getNativeSctpCapabilities(),u.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),T.validateSctpCapabilities(this._sctpCapabilities),u.debug("load() succeeded"),this._loaded=!0,U.close()}catch(I){throw U&&U.close(),I}}canProduce(S){if(this._loaded){if(S!=="audio"&&S!=="video")throw new TypeError(`invalid kind "${S}"`)}else throw new a.InvalidStateError("not loaded");return this._canProduceByKind[S]}createSendTransport({id:S,iceParameters:O,iceCandidates:U,dtlsParameters:I,sctpParameters:A,iceServers:Y,iceTransportPolicy:Z,additionalSettings:j,proprietaryConstraints:V,appData:te}){return u.debug("createSendTransport()"),this.createTransport({direction:"send",id:S,iceParameters:O,iceCandidates:U,dtlsParameters:I,sctpParameters:A,iceServers:Y,iceTransportPolicy:Z,additionalSettings:j,proprietaryConstraints:V,appData:te})}createRecvTransport({id:S,iceParameters:O,iceCandidates:U,dtlsParameters:I,sctpParameters:A,iceServers:Y,iceTransportPolicy:Z,additionalSettings:j,proprietaryConstraints:V,appData:te}){return u.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:S,iceParameters:O,iceCandidates:U,dtlsParameters:I,sctpParameters:A,iceServers:Y,iceTransportPolicy:Z,additionalSettings:j,proprietaryConstraints:V,appData:te})}createTransport({direction:S,id:O,iceParameters:U,iceCandidates:I,dtlsParameters:A,sctpParameters:Y,iceServers:Z,iceTransportPolicy:j,additionalSettings:V,proprietaryConstraints:te,appData:le}){if(this._loaded){if(typeof O!="string")throw new TypeError("missing id");if(typeof U!="object")throw new TypeError("missing iceParameters");if(Array.isArray(I)){if(typeof A!="object")throw new TypeError("missing dtlsParameters");if(Y&&typeof Y!="object")throw new TypeError("wrong sctpParameters");if(le&&typeof le!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new a.InvalidStateError("not loaded");const q=new b.Transport({direction:S,id:O,iceParameters:U,iceCandidates:I,dtlsParameters:A,sctpParameters:Y,iceServers:Z,iceTransportPolicy:j,additionalSettings:V,proprietaryConstraints:te,appData:le,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",q),q}};er.Device=y;function v(C){var S,O,U,I;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(u.debug("detectDeviceImpl() | React-Native detected"),typeof RTCPeerConnection>"u"){u.warn("detectDeviceImpl() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(u.debug("detectDeviceImpl() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(u.debug("detectDeviceImpl() | ReactNative PlanB handler chosen"),"ReactNative")}else{u.debug("detectDeviceImpl() | browser detected [userAgent:%s, parsed:%o]",C.ua,C);const A=C.browser,Y=(S=A.name)==null?void 0:S.toLowerCase(),Z=parseInt(A.major??"0"),V=(O=C.engine.name)==null?void 0:O.toLowerCase(),te=C.os,le=(U=te.name)==null?void 0:U.toLowerCase(),q=parseFloat(te.version??"0"),re=(I=C.device.model)==null?void 0:I.toLowerCase(),ne=le==="ios"||re==="ipad",se=Y&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(Y),be=Y&&["firefox","mobile firefox","mobile focus"].includes(Y),me=Y&&["safari","mobile safari"].includes(Y),et=Y&&["edge"].includes(Y);if((se||et)&&!ne&&Z>=111)return"Chrome111";if(se&&!ne&&Z>=74||et&&!ne&&Z>=88)return"Chrome74";if(se&&!ne&&Z>=70)return"Chrome70";if(se&&!ne&&Z>=67)return"Chrome67";if(se&&!ne&&Z>=55)return"Chrome55";if(be&&!ne&&Z>=120)return"Firefox120";if(be&&!ne&&Z>=60)return"Firefox60";if(be&&ne&&q>=14.3)return"Safari12";if(me&&Z>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(me&&Z>=11)return"Safari11";if(et&&!ne&&Z>=11&&Z<=18)return"Edge11";if(V==="webkit"&&ne&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(V==="blink"){const ke=C.ua.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(ke){const Tt=Number(ke[1]);return Tt>=111?"Chrome111":Tt>=74?"Chrome74":Tt>=70?"Chrome70":Tt>=67?"Chrome67":"Chrome55"}else return"Chrome111"}else{u.warn("detectDeviceImpl() | browser not supported [name:%s, version:%s]",Y,Z);return}}}return er}var Yd={},Zm;function HS(){return Zm||(Zm=1,Object.defineProperty(Yd,"__esModule",{value:!0})),Yd}var Qd={},$m;function VS(){return $m||($m=1,Object.defineProperty(Qd,"__esModule",{value:!0})),Qd}var Jm;function GS(){return Jm||(Jm=1,function(d){var s=Wn&&Wn.__createBinding||(Object.create?function(a,w,T,b){b===void 0&&(b=T);var E=Object.getOwnPropertyDescriptor(w,T);(!E||("get"in E?!w.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return w[T]}}),Object.defineProperty(a,b,E)}:function(a,w,T,b){b===void 0&&(b=T),a[b]=w[T]}),o=Wn&&Wn.__exportStar||function(a,w){for(var T in a)T!=="default"&&!Object.prototype.hasOwnProperty.call(w,T)&&s(w,a,T)};Object.defineProperty(d,"__esModule",{value:!0}),o(r_(),d),o(Gg(),d),o(qg(),d),o(Ig(),d),o(Hg(),d),o(Vg(),d),o(HS(),d),o(VS(),d),o(Ut(),d),o(wt(),d)}(Wn)),Wn}var ks={},As={},Kd={},Jc={},Wm;function YS(){return Wm||(Wm=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),Jc}var Wc={},eg;function QS(){return eg||(eg=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.default="00000000-0000-0000-0000-000000000000"),Wc}var eo={},to={},io={},tg;function KS(){return tg||(tg=1,Object.defineProperty(io,"__esModule",{value:!0}),io.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),io}var ig;function To(){if(ig)return to;ig=1,Object.defineProperty(to,"__esModule",{value:!0});const d=KS();function s(o){return typeof o=="string"&&d.default.test(o)}return to.default=s,to}var ng;function Co(){if(ng)return eo;ng=1,Object.defineProperty(eo,"__esModule",{value:!0});const d=To();function s(o){if(!(0,d.default)(o))throw TypeError("Invalid UUID");let a;return Uint8Array.of((a=parseInt(o.slice(0,8),16))>>>24,a>>>16&255,a>>>8&255,a&255,(a=parseInt(o.slice(9,13),16))>>>8,a&255,(a=parseInt(o.slice(14,18),16))>>>8,a&255,(a=parseInt(o.slice(19,23),16))>>>8,a&255,(a=parseInt(o.slice(24,36),16))/1099511627776&255,a/4294967296&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255)}return eo.default=s,eo}var Kr={},rg;function Tn(){if(rg)return Kr;rg=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.unsafeStringify=void 0;const d=To(),s=[];for(let w=0;w<256;++w)s.push((w+256).toString(16).slice(1));function o(w,T=0){return(s[w[T+0]]+s[w[T+1]]+s[w[T+2]]+s[w[T+3]]+"-"+s[w[T+4]]+s[w[T+5]]+"-"+s[w[T+6]]+s[w[T+7]]+"-"+s[w[T+8]]+s[w[T+9]]+"-"+s[w[T+10]]+s[w[T+11]]+s[w[T+12]]+s[w[T+13]]+s[w[T+14]]+s[w[T+15]]).toLowerCase()}Kr.unsafeStringify=o;function a(w,T=0){const b=o(w,T);if(!(0,d.default)(b))throw TypeError("Stringified UUID is invalid");return b}return Kr.default=a,Kr}var Xr={},no={},ag;function lu(){if(ag)return no;ag=1,Object.defineProperty(no,"__esModule",{value:!0});let d;const s=new Uint8Array(16);function o(){if(!d){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");d=crypto.getRandomValues.bind(crypto)}return d(s)}return no.default=o,no}var sg;function a_(){if(sg)return Xr;sg=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.updateV1State=void 0;const d=lu(),s=Tn(),o={};function a(b,E,M){var _;let R;const x=(b==null?void 0:b._v6)??!1;if(b){const L=Object.keys(b);L.length===1&&L[0]==="_v6"&&(b=void 0)}if(b)R=T(b.random??((_=b.rng)==null?void 0:_.call(b))??(0,d.default)(),b.msecs,b.nsecs,b.clockseq,b.node,E,M);else{const L=Date.now(),k=(0,d.default)();w(o,L,k),R=T(k,o.msecs,o.nsecs,x?void 0:o.clockseq,x?void 0:o.node,E,M)}return E??(0,s.unsafeStringify)(R)}function w(b,E,M){return b.msecs??(b.msecs=-1/0),b.nsecs??(b.nsecs=0),E===b.msecs?(b.nsecs++,b.nsecs>=1e4&&(b.node=void 0,b.nsecs=0)):E>b.msecs?b.nsecs=0:E<b.msecs&&(b.node=void 0),b.node||(b.node=M.slice(10,16),b.node[0]|=1,b.clockseq=(M[8]<<8|M[9])&16383),b.msecs=E,b}Xr.updateV1State=w;function T(b,E,M,R,x,_,L=0){if(b.length<16)throw new Error("Random bytes length must be >= 16");if(!_)_=new Uint8Array(16),L=0;else if(L<0||L+16>_.length)throw new RangeError(`UUID byte range ${L}:${L+15} is out of buffer bounds`);E??(E=Date.now()),M??(M=0),R??(R=(b[8]<<8|b[9])&16383),x??(x=b.slice(10,16)),E+=122192928e5;const k=((E&268435455)*1e4+M)%4294967296;_[L++]=k>>>24&255,_[L++]=k>>>16&255,_[L++]=k>>>8&255,_[L++]=k&255;const N=E/4294967296*1e4&268435455;_[L++]=N>>>8&255,_[L++]=N&255,_[L++]=N>>>24&15|16,_[L++]=N>>>16&255,_[L++]=R>>>8|128,_[L++]=R&255;for(let g=0;g<6;++g)_[L++]=x[g];return _}return Xr.default=a,Xr}var ro={},cg;function s_(){if(cg)return ro;cg=1,Object.defineProperty(ro,"__esModule",{value:!0});const d=Co(),s=Tn();function o(w){const T=typeof w=="string"?(0,d.default)(w):w,b=a(T);return typeof w=="string"?(0,s.unsafeStringify)(b):b}ro.default=o;function a(w){return Uint8Array.of((w[6]&15)<<4|w[7]>>4&15,(w[7]&15)<<4|(w[4]&240)>>4,(w[4]&15)<<4|(w[5]&240)>>4,(w[5]&15)<<4|(w[0]&240)>>4,(w[0]&15)<<4|(w[1]&240)>>4,(w[1]&15)<<4|(w[2]&240)>>4,96|w[2]&15,w[3],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])}return ro}var Xd={},ao={},og;function XS(){if(og)return ao;og=1,Object.defineProperty(ao,"__esModule",{value:!0});function d(L){const k=w(L),N=a(k,L.length*8);return s(N)}function s(L){const k=new Uint8Array(L.length*4);for(let N=0;N<L.length*4;N++)k[N]=L[N>>2]>>>N%4*8&255;return k}function o(L){return(L+64>>>9<<4)+14+1}function a(L,k){const N=new Uint32Array(o(k)).fill(0);N.set(L),N[k>>5]|=128<<k%32,N[N.length-1]=k,L=N;let g=1732584193,h=-271733879,c=-1732584194,f=271733878;for(let u=0;u<L.length;u+=16){const p=g,m=h,y=c,v=f;g=M(g,h,c,f,L[u],7,-680876936),f=M(f,g,h,c,L[u+1],12,-389564586),c=M(c,f,g,h,L[u+2],17,606105819),h=M(h,c,f,g,L[u+3],22,-1044525330),g=M(g,h,c,f,L[u+4],7,-176418897),f=M(f,g,h,c,L[u+5],12,1200080426),c=M(c,f,g,h,L[u+6],17,-1473231341),h=M(h,c,f,g,L[u+7],22,-45705983),g=M(g,h,c,f,L[u+8],7,1770035416),f=M(f,g,h,c,L[u+9],12,-1958414417),c=M(c,f,g,h,L[u+10],17,-42063),h=M(h,c,f,g,L[u+11],22,-1990404162),g=M(g,h,c,f,L[u+12],7,1804603682),f=M(f,g,h,c,L[u+13],12,-40341101),c=M(c,f,g,h,L[u+14],17,-1502002290),h=M(h,c,f,g,L[u+15],22,1236535329),g=R(g,h,c,f,L[u+1],5,-165796510),f=R(f,g,h,c,L[u+6],9,-1069501632),c=R(c,f,g,h,L[u+11],14,643717713),h=R(h,c,f,g,L[u],20,-373897302),g=R(g,h,c,f,L[u+5],5,-701558691),f=R(f,g,h,c,L[u+10],9,38016083),c=R(c,f,g,h,L[u+15],14,-660478335),h=R(h,c,f,g,L[u+4],20,-405537848),g=R(g,h,c,f,L[u+9],5,568446438),f=R(f,g,h,c,L[u+14],9,-1019803690),c=R(c,f,g,h,L[u+3],14,-187363961),h=R(h,c,f,g,L[u+8],20,1163531501),g=R(g,h,c,f,L[u+13],5,-1444681467),f=R(f,g,h,c,L[u+2],9,-51403784),c=R(c,f,g,h,L[u+7],14,1735328473),h=R(h,c,f,g,L[u+12],20,-1926607734),g=x(g,h,c,f,L[u+5],4,-378558),f=x(f,g,h,c,L[u+8],11,-2022574463),c=x(c,f,g,h,L[u+11],16,1839030562),h=x(h,c,f,g,L[u+14],23,-35309556),g=x(g,h,c,f,L[u+1],4,-1530992060),f=x(f,g,h,c,L[u+4],11,1272893353),c=x(c,f,g,h,L[u+7],16,-155497632),h=x(h,c,f,g,L[u+10],23,-1094730640),g=x(g,h,c,f,L[u+13],4,681279174),f=x(f,g,h,c,L[u],11,-358537222),c=x(c,f,g,h,L[u+3],16,-722521979),h=x(h,c,f,g,L[u+6],23,76029189),g=x(g,h,c,f,L[u+9],4,-640364487),f=x(f,g,h,c,L[u+12],11,-421815835),c=x(c,f,g,h,L[u+15],16,530742520),h=x(h,c,f,g,L[u+2],23,-995338651),g=_(g,h,c,f,L[u],6,-198630844),f=_(f,g,h,c,L[u+7],10,1126891415),c=_(c,f,g,h,L[u+14],15,-1416354905),h=_(h,c,f,g,L[u+5],21,-57434055),g=_(g,h,c,f,L[u+12],6,1700485571),f=_(f,g,h,c,L[u+3],10,-1894986606),c=_(c,f,g,h,L[u+10],15,-1051523),h=_(h,c,f,g,L[u+1],21,-2054922799),g=_(g,h,c,f,L[u+8],6,1873313359),f=_(f,g,h,c,L[u+15],10,-30611744),c=_(c,f,g,h,L[u+6],15,-1560198380),h=_(h,c,f,g,L[u+13],21,1309151649),g=_(g,h,c,f,L[u+4],6,-145523070),f=_(f,g,h,c,L[u+11],10,-1120210379),c=_(c,f,g,h,L[u+2],15,718787259),h=_(h,c,f,g,L[u+9],21,-343485551),g=T(g,p),h=T(h,m),c=T(c,y),f=T(f,v)}return Uint32Array.of(g,h,c,f)}function w(L){if(L.length===0)return new Uint32Array;const k=new Uint32Array(o(L.length*8)).fill(0);for(let N=0;N<L.length;N++)k[N>>2]|=(L[N]&255)<<N%4*8;return k}function T(L,k){const N=(L&65535)+(k&65535);return(L>>16)+(k>>16)+(N>>16)<<16|N&65535}function b(L,k){return L<<k|L>>>32-k}function E(L,k,N,g,h,c){return T(b(T(T(k,L),T(g,c)),h),N)}function M(L,k,N,g,h,c,f){return E(k&N|~k&g,L,k,h,c,f)}function R(L,k,N,g,h,c,f){return E(k&g|N&~g,L,k,h,c,f)}function x(L,k,N,g,h,c,f){return E(k^N^g,L,k,h,c,f)}function _(L,k,N,g,h,c,f){return E(N^(k|~g),L,k,h,c,f)}return ao.default=d,ao}var wi={},lg;function vo(){if(lg)return wi;lg=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.URL=wi.DNS=wi.stringToBytes=void 0;const d=Co(),s=Tn();function o(w){w=unescape(encodeURIComponent(w));const T=new Uint8Array(w.length);for(let b=0;b<w.length;++b)T[b]=w.charCodeAt(b);return T}wi.stringToBytes=o,wi.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",wi.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function a(w,T,b,E,M,R){const x=typeof b=="string"?o(b):b,_=typeof E=="string"?(0,d.default)(E):E;if(typeof E=="string"&&(E=(0,d.default)(E)),(E==null?void 0:E.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let L=new Uint8Array(16+x.length);if(L.set(_),L.set(x,_.length),L=T(L),L[6]=L[6]&15|w,L[8]=L[8]&63|128,M){R=R||0;for(let k=0;k<16;++k)M[R+k]=L[k];return M}return(0,s.unsafeStringify)(L)}return wi.default=a,wi}var dg;function FS(){return dg||(dg=1,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.URL=d.DNS=void 0;const s=XS(),o=vo();var a=vo();Object.defineProperty(d,"DNS",{enumerable:!0,get:function(){return a.DNS}}),Object.defineProperty(d,"URL",{enumerable:!0,get:function(){return a.URL}});function w(T,b,E,M){return(0,o.default)(48,s.default,T,b,E,M)}w.DNS=o.DNS,w.URL=o.URL,d.default=w}(Xd)),Xd}var so={},co={},ug;function ZS(){if(ug)return co;ug=1,Object.defineProperty(co,"__esModule",{value:!0});const d=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return co.default={randomUUID:d},co}var fg;function $S(){if(fg)return so;fg=1,Object.defineProperty(so,"__esModule",{value:!0});const d=ZS(),s=lu(),o=Tn();function a(w,T,b){var M;if(d.default.randomUUID&&!T&&!w)return d.default.randomUUID();w=w||{};const E=w.random??((M=w.rng)==null?void 0:M.call(w))??(0,s.default)();if(E.length<16)throw new Error("Random bytes length must be >= 16");if(E[6]=E[6]&15|64,E[8]=E[8]&63|128,T){if(b=b||0,b<0||b+16>T.length)throw new RangeError(`UUID byte range ${b}:${b+15} is out of buffer bounds`);for(let R=0;R<16;++R)T[b+R]=E[R];return T}return(0,o.unsafeStringify)(E)}return so.default=a,so}var Fd={},oo={},pg;function JS(){if(pg)return oo;pg=1,Object.defineProperty(oo,"__esModule",{value:!0});function d(a,w,T,b){switch(a){case 0:return w&T^~w&b;case 1:return w^T^b;case 2:return w&T^w&b^T&b;case 3:return w^T^b}}function s(a,w){return a<<w|a>>>32-w}function o(a){const w=[1518500249,1859775393,2400959708,3395469782],T=[1732584193,4023233417,2562383102,271733878,3285377520],b=new Uint8Array(a.length+1);b.set(a),b[a.length]=128,a=b;const E=a.length/4+2,M=Math.ceil(E/16),R=new Array(M);for(let x=0;x<M;++x){const _=new Uint32Array(16);for(let L=0;L<16;++L)_[L]=a[x*64+L*4]<<24|a[x*64+L*4+1]<<16|a[x*64+L*4+2]<<8|a[x*64+L*4+3];R[x]=_}R[M-1][14]=(a.length-1)*8/Math.pow(2,32),R[M-1][14]=Math.floor(R[M-1][14]),R[M-1][15]=(a.length-1)*8&4294967295;for(let x=0;x<M;++x){const _=new Uint32Array(80);for(let c=0;c<16;++c)_[c]=R[x][c];for(let c=16;c<80;++c)_[c]=s(_[c-3]^_[c-8]^_[c-14]^_[c-16],1);let L=T[0],k=T[1],N=T[2],g=T[3],h=T[4];for(let c=0;c<80;++c){const f=Math.floor(c/20),u=s(L,5)+d(f,k,N,g)+h+w[f]+_[c]>>>0;h=g,g=N,N=s(k,30)>>>0,k=L,L=u}T[0]=T[0]+L>>>0,T[1]=T[1]+k>>>0,T[2]=T[2]+N>>>0,T[3]=T[3]+g>>>0,T[4]=T[4]+h>>>0}return Uint8Array.of(T[0]>>24,T[0]>>16,T[0]>>8,T[0],T[1]>>24,T[1]>>16,T[1]>>8,T[1],T[2]>>24,T[2]>>16,T[2]>>8,T[2],T[3]>>24,T[3]>>16,T[3]>>8,T[3],T[4]>>24,T[4]>>16,T[4]>>8,T[4])}return oo.default=o,oo}var hg;function WS(){return hg||(hg=1,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.URL=d.DNS=void 0;const s=JS(),o=vo();var a=vo();Object.defineProperty(d,"DNS",{enumerable:!0,get:function(){return a.DNS}}),Object.defineProperty(d,"URL",{enumerable:!0,get:function(){return a.URL}});function w(T,b,E,M){return(0,o.default)(80,s.default,T,b,E,M)}w.DNS=o.DNS,w.URL=o.URL,d.default=w}(Fd)),Fd}var lo={},mg;function eb(){if(mg)return lo;mg=1,Object.defineProperty(lo,"__esModule",{value:!0});const d=Tn(),s=a_(),o=s_();function a(w,T,b){w??(w={}),b??(b=0);let E=(0,s.default)({...w,_v6:!0},new Uint8Array(16));if(E=(0,o.default)(E),T){for(let M=0;M<16;M++)T[b+M]=E[M];return T}return(0,d.unsafeStringify)(E)}return lo.default=a,lo}var uo={},gg;function tb(){if(gg)return uo;gg=1,Object.defineProperty(uo,"__esModule",{value:!0});const d=Co(),s=Tn();function o(w){const T=typeof w=="string"?(0,d.default)(w):w,b=a(T);return typeof w=="string"?(0,s.unsafeStringify)(b):b}uo.default=o;function a(w){return Uint8Array.of((w[3]&15)<<4|w[4]>>4&15,(w[4]&15)<<4|(w[5]&240)>>4,(w[5]&15)<<4|w[6]&15,w[7],(w[1]&15)<<4|(w[2]&240)>>4,(w[2]&15)<<4|(w[3]&240)>>4,16|(w[0]&240)>>4,(w[0]&15)<<4|(w[1]&240)>>4,w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])}return uo}var Fr={},_g;function ib(){if(_g)return Fr;_g=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.updateV7State=void 0;const d=lu(),s=Tn(),o={};function a(b,E,M){var x;let R;if(b)R=T(b.random??((x=b.rng)==null?void 0:x.call(b))??(0,d.default)(),b.msecs,b.seq,E,M);else{const _=Date.now(),L=(0,d.default)();w(o,_,L),R=T(L,o.msecs,o.seq,E,M)}return E??(0,s.unsafeStringify)(R)}function w(b,E,M){return b.msecs??(b.msecs=-1/0),b.seq??(b.seq=0),E>b.msecs?(b.seq=M[6]<<23|M[7]<<16|M[8]<<8|M[9],b.msecs=E):(b.seq=b.seq+1|0,b.seq===0&&b.msecs++),b}Fr.updateV7State=w;function T(b,E,M,R,x=0){if(b.length<16)throw new Error("Random bytes length must be >= 16");if(!R)R=new Uint8Array(16),x=0;else if(x<0||x+16>R.length)throw new RangeError(`UUID byte range ${x}:${x+15} is out of buffer bounds`);return E??(E=Date.now()),M??(M=b[6]*127<<24|b[7]<<16|b[8]<<8|b[9]),R[x++]=E/1099511627776&255,R[x++]=E/4294967296&255,R[x++]=E/16777216&255,R[x++]=E/65536&255,R[x++]=E/256&255,R[x++]=E&255,R[x++]=112|M>>>28&15,R[x++]=M>>>20&255,R[x++]=128|M>>>14&63,R[x++]=M>>>6&255,R[x++]=M<<2&255|b[10]&3,R[x++]=b[11],R[x++]=b[12],R[x++]=b[13],R[x++]=b[14],R[x++]=b[15],R}return Fr.default=a,Fr}var fo={},vg;function nb(){if(vg)return fo;vg=1,Object.defineProperty(fo,"__esModule",{value:!0});const d=To();function s(o){if(!(0,d.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}return fo.default=s,fo}var yg;function rb(){return yg||(yg=1,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.version=d.validate=d.v7=d.v6ToV1=d.v6=d.v5=d.v4=d.v3=d.v1ToV6=d.v1=d.stringify=d.parse=d.NIL=d.MAX=void 0;var s=YS();Object.defineProperty(d,"MAX",{enumerable:!0,get:function(){return s.default}});var o=QS();Object.defineProperty(d,"NIL",{enumerable:!0,get:function(){return o.default}});var a=Co();Object.defineProperty(d,"parse",{enumerable:!0,get:function(){return a.default}});var w=Tn();Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return w.default}});var T=a_();Object.defineProperty(d,"v1",{enumerable:!0,get:function(){return T.default}});var b=s_();Object.defineProperty(d,"v1ToV6",{enumerable:!0,get:function(){return b.default}});var E=FS();Object.defineProperty(d,"v3",{enumerable:!0,get:function(){return E.default}});var M=$S();Object.defineProperty(d,"v4",{enumerable:!0,get:function(){return M.default}});var R=WS();Object.defineProperty(d,"v5",{enumerable:!0,get:function(){return R.default}});var x=eb();Object.defineProperty(d,"v6",{enumerable:!0,get:function(){return x.default}});var _=tb();Object.defineProperty(d,"v6ToV1",{enumerable:!0,get:function(){return _.default}});var L=ib();Object.defineProperty(d,"v7",{enumerable:!0,get:function(){return L.default}});var k=To();Object.defineProperty(d,"validate",{enumerable:!0,get:function(){return k.default}});var N=nb();Object.defineProperty(d,"version",{enumerable:!0,get:function(){return N.default}})}(Kd)),Kd}var Ps={},Sg;function ab(){if(Sg)return Ps;Sg=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.FakeEventTarget=void 0;let d=class{constructor(){z(this,"listeners",{})}addEventListener(o,a,w={}){var T;a&&((T=this.listeners)[o]??(T[o]=[]),this.listeners[o].push({callback:a,once:w.once===!0}))}removeEventListener(o,a){this.listeners[o]&&(this.listeners[o]=this.listeners[o].filter(w=>w.callback!==a))}dispatchEvent(o){if(!o||typeof o.type!="string")throw new Error("invalid event object");const a=this.listeners[o.type];if(!a)return!0;for(const w of[...a]){try{w.callback.call(this,o)}catch(T){setTimeout(()=>{throw T},0)}w.once&&this.removeEventListener(o.type,w.callback)}return!o.defaultPrevented}};return Ps.FakeEventTarget=d,Ps}var po={},bg;function sb(){if(bg)return po;bg=1,Object.defineProperty(po,"__esModule",{value:!0}),po.clone=d;function d(s){if(s!==void 0)return Number.isNaN(s)?NaN:typeof structuredClone=="function"?structuredClone(s):JSON.parse(JSON.stringify(s))}return po}var wg;function cb(){var w,T,b,E,M,R,x,_,L,k,N,g,h,c,f,u;if(wg)return As;wg=1,Object.defineProperty(As,"__esModule",{value:!0}),As.FakeMediaStreamTrack=void 0;const d=rb(),s=ab(),o=sb(),p=class p extends s.FakeEventTarget{constructor({kind:v,id:C,label:S,contentHint:O,enabled:U,muted:I,readyState:A,capabilities:Y,constraints:Z,settings:j,data:V}){super();gt(this,w);gt(this,T);gt(this,b);gt(this,E);gt(this,M);gt(this,R);gt(this,x);gt(this,_);gt(this,L);gt(this,k);gt(this,N);gt(this,g,null);gt(this,h,null);gt(this,c,null);gt(this,f,null);gt(this,u,null);Ie(this,w,C??(0,d.v4)()),Ie(this,T,v),Ie(this,b,S??""),Ie(this,x,O??""),Ie(this,M,U??!0),Ie(this,R,I??!1),Ie(this,E,A??"live"),Ie(this,_,Y??{}),Ie(this,L,Z??{}),Ie(this,k,j??{}),Ie(this,N,V??{})}get id(){return ve(this,w)}get kind(){return ve(this,T)}get label(){return ve(this,b)}get contentHint(){return ve(this,x)}set contentHint(v){Ie(this,x,v)}get enabled(){return ve(this,M)}set enabled(v){const C=ve(this,M)!==v;Ie(this,M,v),C&&this.dispatchEvent(new Event("enabledchange"))}get muted(){return ve(this,R)}get readyState(){return ve(this,E)}get data(){return ve(this,N)}set data(v){Ie(this,N,v)}get onmute(){return ve(this,g)}set onmute(v){ve(this,g)&&this.removeEventListener("mute",ve(this,g)),Ie(this,g,v),v&&this.addEventListener("mute",v)}get onunmute(){return ve(this,h)}set onunmute(v){ve(this,h)&&this.removeEventListener("unmute",ve(this,h)),Ie(this,h,v),v&&this.addEventListener("unmute",v)}get onended(){return ve(this,c)}set onended(v){ve(this,c)&&this.removeEventListener("ended",ve(this,c)),Ie(this,c,v),v&&this.addEventListener("ended",v)}get onenabledchange(){return ve(this,f)}set onenabledchange(v){ve(this,f)&&this.removeEventListener("enabledchange",ve(this,f)),Ie(this,f,v),v&&this.addEventListener("enabledchange",v)}get onstopped(){return ve(this,u)}set onstopped(v){ve(this,u)&&this.removeEventListener("stopped",ve(this,u)),Ie(this,u,v),v&&this.addEventListener("stopped",v)}addEventListener(v,C,S){super.addEventListener(v,C,S)}removeEventListener(v,C){super.removeEventListener(v,C)}stop(){ve(this,E)!=="ended"&&(Ie(this,E,"ended"),this.dispatchEvent(new Event("stopped")))}clone({id:v,data:C}={}){return new p({id:v??(0,d.v4)(),kind:ve(this,T),label:ve(this,b),contentHint:ve(this,x),enabled:ve(this,M),muted:ve(this,R),readyState:ve(this,E),capabilities:(0,o.clone)(ve(this,_)),constraints:(0,o.clone)(ve(this,L)),settings:(0,o.clone)(ve(this,k)),data:C??(0,o.clone)(ve(this,N))})}getCapabilities(){return ve(this,_)}getConstraints(){return ve(this,L)}async applyConstraints(v={}){return Ie(this,L,v),Promise.resolve()}getSettings(){return ve(this,k)}remoteStop(){ve(this,E)!=="ended"&&(Ie(this,E,"ended"),this.dispatchEvent(new Event("stopped")),this.dispatchEvent(new Event("ended")))}remoteMute(){ve(this,R)||(Ie(this,R,!0),this.dispatchEvent(new Event("mute")))}remoteUnmute(){ve(this,R)&&(Ie(this,R,!1),this.dispatchEvent(new Event("unmute")))}};w=new WeakMap,T=new WeakMap,b=new WeakMap,E=new WeakMap,M=new WeakMap,R=new WeakMap,x=new WeakMap,_=new WeakMap,L=new WeakMap,k=new WeakMap,N=new WeakMap,g=new WeakMap,h=new WeakMap,c=new WeakMap,f=new WeakMap,u=new WeakMap;let a=p;return As.FakeMediaStreamTrack=a,As}var Rg;function ob(){if(Rg)return ks;Rg=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.FakeHandler=void 0;const d=cb(),s=wn(),o=Ze(),a=nt(),w=Rt(),T=wt(),b=Ut(),E=new o.Logger("FakeHandler"),M="FakeHandler";class R extends s.EnhancedEventEmitter{constructor({id:k,ordered:N,maxPacketLifeTime:g,maxRetransmits:h,label:c,protocol:f}){super();z(this,"id");z(this,"ordered");z(this,"maxPacketLifeTime");z(this,"maxRetransmits");z(this,"label");z(this,"protocol");this.id=k,this.ordered=N,this.maxPacketLifeTime=g,this.maxRetransmits=h,this.label=c,this.protocol=f}close(){this.safeEmit("close"),this.emit("@close")}send(k){this.safeEmit("message",k)}addEventListener(k,N){this.on(k,N)}}let x=class c_ extends b.HandlerInterface{constructor(k){super();z(this,"_closed",!1);z(this,"fakeParameters");z(this,"_rtpParametersByKind");z(this,"_cname",`CNAME-${a.generateRandomNumber()}`);z(this,"_transportReady",!1);z(this,"_nextLocalId",1);z(this,"_tracks",new Map);z(this,"_nextSctpStreamId",0);this.fakeParameters=k}static createFactory(k){return()=>new c_(k)}get name(){return M}close(){E.debug("close()"),!this._closed&&(this._closed=!0)}setIceGatheringState(k){this.emit("@icegatheringstatechange",k)}setConnectionState(k){this.emit("@connectionstatechange",k)}async getNativeRtpCapabilities(){return E.debug("getNativeRtpCapabilities()"),this.fakeParameters.generateNativeRtpCapabilities()}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),this.fakeParameters.generateNativeSctpCapabilities()}run({direction:k,iceParameters:N,iceCandidates:g,dtlsParameters:h,sctpParameters:c,iceServers:f,iceTransportPolicy:u,proprietaryConstraints:p,extendedRtpCapabilities:m}){this.assertNotClosed(),E.debug("run()"),this._rtpParametersByKind={audio:w.getSendingRtpParameters("audio",m),video:w.getSendingRtpParameters("video",m)}}async updateIceServers(k){this.assertNotClosed(),E.debug("updateIceServers()")}async restartIce(k){this.assertNotClosed(),E.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:k,encodings:N,codecOptions:g,codec:h}){this.assertNotClosed(),E.debug("send() [kind:%s, track.id:%s]",k.kind,k.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const c=a.clone(this._rtpParametersByKind[k.kind]),f=c.codecs.some(p=>/.+\/rtx$/i.test(p.mimeType));c.mid=`mid-${a.generateRandomNumber()}`,N||(N=[{}]);for(const p of N)p.ssrc=a.generateRandomNumber(),f&&(p.rtx={ssrc:a.generateRandomNumber()});c.encodings=N,c.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const u=this._nextLocalId++;return this._tracks.set(u,k),{localId:String(u),rtpParameters:c}}async stopSending(k){if(E.debug("stopSending() [localId:%s]",k),!this._closed){if(!this._tracks.has(Number(k)))throw new Error("local track not found");this._tracks.delete(Number(k))}}async pauseSending(k){this.assertNotClosed()}async resumeSending(k){this.assertNotClosed()}async replaceTrack(k,N){this.assertNotClosed(),N?E.debug("replaceTrack() [localId:%s, track.id:%s]",k,N.id):E.debug("replaceTrack() [localId:%s, no track]",k),this._tracks.delete(Number(k)),this._tracks.set(Number(k),N)}async setMaxSpatialLayer(k,N){this.assertNotClosed(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",k,N)}async setRtpEncodingParameters(k,N){this.assertNotClosed(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",k,N)}async getSenderStats(k){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:k,maxPacketLifeTime:N,maxRetransmits:g,label:h,protocol:c}){this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),E.debug("sendDataChannel()");const f=new R({id:this._nextSctpStreamId++,ordered:k,maxPacketLifeTime:N,maxRetransmits:g,label:h,protocol:c}),u={streamId:this._nextSctpStreamId,ordered:k,maxPacketLifeTime:N,maxRetransmits:g};return{dataChannel:f,sctpStreamParameters:u}}async receive(k){this.assertNotClosed();const N=[];for(const g of k){const{trackId:h,kind:c}=g;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),E.debug("receive() [trackId:%s, kind:%s]",h,c);const f=this._nextLocalId++,u=new d.FakeMediaStreamTrack({kind:c});this._tracks.set(f,u),N.push({localId:String(f),track:u})}return N}async stopReceiving(k){if(!this._closed)for(const N of k)E.debug("stopReceiving() [localId:%s]",N),this._tracks.delete(Number(N))}async pauseReceiving(k){this.assertNotClosed()}async resumeReceiving(k){this.assertNotClosed()}async getReceiverStats(k){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:k,label:N,protocol:g}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),E.debug("receiveDataChannel()"),{dataChannel:new R({id:k.streamId,ordered:k.ordered,maxPacketLifeTime:k.maxPacketLifeTime,maxRetransmits:k.maxRetransmits,label:N,protocol:g})}}async setupTransport({localDtlsRole:k,localSdpObject:N}){const g=a.clone(this.fakeParameters.generateLocalDtlsParameters());k&&(g.role=k),this.emit("@connectionstatechange","connecting"),await new Promise((h,c)=>this.emit("@connect",{dtlsParameters:g},h,c)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}};return ks.FakeHandler=x,ks}var ei={},Tg;function lb(){if(Tg)return ei;Tg=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.generateRouterRtpCapabilities=o,ei.generateNativeRtpCapabilities=a,ei.generateNativeSctpCapabilities=w,ei.generateLocalDtlsParameters=T,ei.generateTransportRemoteParameters=b,ei.generateProducerRemoteParameters=E,ei.generateConsumerRemoteParameters=M,ei.generateDataProducerRemoteParameters=R,ei.generateDataConsumerRemoteParameters=x;const d=nt();function s(){return String(d.generateRandomNumber())}function o(){return d.deepFreeze({codecs:[{mimeType:"audio/opus",kind:"audio",preferredPayloadType:100,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{useinbandfec:1,foo:"bar"}},{mimeType:"video/VP8",kind:"video",preferredPayloadType:101,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"x-google-start-bitrate":1500}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:102,clockRate:9e4,rtcpFeedback:[],parameters:{apt:101}},{mimeType:"video/H264",kind:"video",preferredPayloadType:103,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f"}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:104,clockRate:9e4,rtcpFeedback:[],parameters:{apt:103}},{mimeType:"video/VP9",kind:"video",preferredPayloadType:105,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"profile-id":0,"x-google-start-bitrate":1500}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:106,clockRate:9e4,rtcpFeedback:[],parameters:{apt:105}}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",preferredId:2,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",preferredId:3,preferredEncrypt:!1,direction:"recvonly"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://tools.ietf.org/html/draft-ietf-avtext-framemarking-07",preferredId:6,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:framemarking",preferredId:7,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:3gpp:video-orientation",preferredId:11,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:12,preferredEncrypt:!1,direction:"sendrecv"}]})}function a(){return d.deepFreeze({codecs:[{mimeType:"audio/opus",kind:"audio",preferredPayloadType:111,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{minptime:10,useinbandfec:1}},{mimeType:"audio/ISAC",kind:"audio",preferredPayloadType:103,clockRate:16e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}},{mimeType:"audio/CN",kind:"audio",preferredPayloadType:106,clockRate:32e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}},{mimeType:"video/VP8",kind:"video",preferredPayloadType:96,clockRate:9e4,rtcpFeedback:[{type:"goog-remb"},{type:"transport-cc"},{type:"ccm",parameter:"fir"},{type:"nack"},{type:"nack",parameter:"pli"}],parameters:{baz:"1234abcd"}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:97,clockRate:9e4,rtcpFeedback:[],parameters:{apt:96}},{mimeType:"video/VP9",kind:"video",preferredPayloadType:98,clockRate:9e4,rtcpFeedback:[{type:"goog-remb"},{type:"transport-cc"},{type:"ccm",parameter:"fir"},{type:"nack"},{type:"nack",parameter:"pli"}],parameters:{"profile-id":0}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:99,clockRate:9e4,rtcpFeedback:[],parameters:{apt:98}}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:2},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:3},{kind:"video",uri:"urn:3gpp:video-orientation",preferredId:4},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay",preferredId:6},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/video-content-type",preferredId:7},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/video-timing",preferredId:8},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10}]})}function w(){return d.deepFreeze({numStreams:{OS:2048,MIS:2048}})}function T(){return d.deepFreeze({fingerprints:[{algorithm:"sha-256",value:"82:5A:68:3D:36:C3:0A:DE:AF:E7:32:43:D2:88:83:57:AC:2D:65:E5:80:C4:B6:FB:AF:1A:A0:21:9F:6D:0C:AD"}],role:"auto"})}function b(){return{id:s(),iceParameters:d.deepFreeze({iceLite:!0,password:"yku5ej8nvfaor28lvtrabcx0wkrpkztz",usernameFragment:"h3hk1iz6qqlnqlne"}),iceCandidates:d.deepFreeze([{foundation:"udpcandidate",address:"9.9.9.9",ip:"9.9.9.9",port:40533,priority:1078862079,protocol:"udp",type:"host",tcpType:"passive"},{foundation:"udpcandidate",address:"9.9.9.9",ip:"9:9:9:9:9:9",port:41333,priority:1078862089,protocol:"udp",type:"host",tcpType:"passive"}]),dtlsParameters:d.deepFreeze({fingerprints:[{algorithm:"sha-256",value:"A9:F4:E0:D2:74:D3:0F:D9:CA:A5:2F:9F:7F:47:FA:F0:C4:72:DD:73:49:D0:3B:14:90:20:51:30:1B:90:8E:71"},{algorithm:"sha-384",value:"03:D9:0B:87:13:98:F6:6D:BC:FC:92:2E:39:D4:E1:97:32:61:30:56:84:70:81:6E:D1:82:97:EA:D9:C1:21:0F:6B:C5:E7:7F:E1:97:0C:17:97:6E:CF:B3:EF:2E:74:B0"},{algorithm:"sha-512",value:"84:27:A4:28:A4:73:AF:43:02:2A:44:68:FF:2F:29:5C:3B:11:9A:60:F4:A8:F0:F5:AC:A0:E3:49:3E:B1:34:53:A9:85:CE:51:9B:ED:87:5E:B8:F4:8E:3D:FA:20:51:B8:96:EE:DA:56:DC:2F:5C:62:79:15:23:E0:21:82:2B:2C"}],role:"auto"}),sctpParameters:d.deepFreeze({port:5e3,OS:2048,MIS:2048,maxMessageSize:2e6})}}function E(){return d.deepFreeze({id:s()})}function M({id:_,codecMimeType:L}={}){switch(L){case"audio/opus":return{id:_??s(),producerId:s(),kind:"audio",rtpParameters:d.deepFreeze({codecs:[{mimeType:"audio/opus",payloadType:100,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{useinbandfec:1,foo:"bar"}}],encodings:[{ssrc:46687003}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",id:10}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"audio/ISAC":return{id:_??s(),producerId:s(),kind:"audio",rtpParameters:d.deepFreeze({codecs:[{mimeType:"audio/ISAC",payloadType:111,clockRate:16e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}}],encodings:[{ssrc:46687004}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"video/VP8":return{id:_??s(),producerId:s(),kind:"video",rtpParameters:d.deepFreeze({codecs:[{mimeType:"video/VP8",payloadType:101,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"x-google-start-bitrate":1500}},{mimeType:"video/rtx",payloadType:102,clockRate:9e4,rtcpFeedback:[],parameters:{apt:101}}],encodings:[{ssrc:99991111,rtx:{ssrc:99991112}}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",id:4},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:3gpp:video-orientation",id:11},{uri:"urn:ietf:params:rtp-hdrext:toffset",id:12}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"video/H264":return{id:_??s(),producerId:s(),kind:"video",rtpParameters:d.deepFreeze({codecs:[{mimeType:"video/H264",payloadType:103,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f"}},{mimeType:"video/rtx",payloadType:104,clockRate:9e4,rtcpFeedback:[],parameters:{apt:103}}],encodings:[{ssrc:99991113,rtx:{ssrc:99991114}}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",id:4},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:3gpp:video-orientation",id:11},{uri:"urn:ietf:params:rtp-hdrext:toffset",id:12}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};default:throw new TypeError(`unknown codecMimeType '${L}'`)}}function R(){return d.deepFreeze({id:s()})}function x({id:_}={}){return{id:_??s(),dataProducerId:s(),sctpStreamParameters:d.deepFreeze({streamId:666,maxPacketLifeTime:5e3,maxRetransmits:void 0})}}return ei}var Cg;function db(){return Cg||(Cg=1,function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.debug=d.testFakeParameters=d.FakeHandler=d.ortc=d.parseScalabilityMode=d.detectDeviceAsync=d.detectDevice=d.Device=d.version=d.types=void 0;const s=bo();d.debug=s.default,d.types=GS(),d.version="3.11.0";var o=r_();Object.defineProperty(d,"Device",{enumerable:!0,get:function(){return o.Device}}),Object.defineProperty(d,"detectDevice",{enumerable:!0,get:function(){return o.detectDevice}}),Object.defineProperty(d,"detectDeviceAsync",{enumerable:!0,get:function(){return o.detectDeviceAsync}});var a=Rn();Object.defineProperty(d,"parseScalabilityMode",{enumerable:!0,get:function(){return a.parse}}),d.ortc=Rt();var w=ob();Object.defineProperty(d,"FakeHandler",{enumerable:!0,get:function(){return w.FakeHandler}}),d.testFakeParameters=lb()}(zd)),zd}var ub=db();function fb(){const d=xt.useRef(null),s=xt.useRef(null),o=xt.useRef(null),a=xt.useRef(null),w=xt.useRef(null),T=xt.useRef([]),b=xt.useRef(null),E=xt.useRef(null),M=xt.useRef([]),R=xt.useRef(null),[x]=xt.useState(()=>window.location.pathname.split("/")[2]),_={encodings:[{rid:"r0",maxBitrate:1e5,scalabilityMode:"S1T3"},{rid:"r1",maxBitrate:3e5,scalabilityMode:"S1T3"},{rid:"r2",maxBitrate:9e5,scalabilityMode:"S1T3"}],codecOptions:{videoGoogleStartBitrate:1e3}},L=xt.useRef({}),k=xt.useRef({params:_});xt.useEffect(()=>{const v=_o("/mediasoup",{path:"/socket.io",transports:["websocket"],upgrade:!1,secure:!1});return o.current=v,o.current.on("connection-success",({socketId:C})=>{console.log(C),h()}),o.current.on("new-producer",({producerId:C})=>{p(C)}),o.current.on("producer-closed",({remoteProducerId:C})=>{const S=T.current.find(O=>O.producerId===C);if(S){S.consumerTransport.close(),S.consumer.close(),T.current=T.current.filter(I=>I.producerId!==C);const O=C.replace(/[^a-zA-Z0-9_-]/g,"_"),U=document.getElementById(`td-${O}`);U&&s.current&&s.current.removeChild(U)}}),()=>{o.current&&o.current.disconnect()}},[]);const N=v=>{console.log("Stream success:",v);const C=v.getAudioTracks()[0],S=v.getVideoTracks()[0];C||console.error("No audio track found in the stream"),S||console.error("No video track found in the stream"),L.current={track:C,...L.current},k.current={track:S,...k.current},d.current&&(d.current.srcObject=v),g()},g=()=>{o.current.emit("joinRoom",{roomName:x},v=>{console.log(`router rtpCapabilities: ${v.rtpCapabilities}`),R.current=v.rtpCapabilities,c().then(()=>{m()})})},h=async()=>{try{const v=await navigator.mediaDevices.getUserMedia({audio:!0,video:{width:{min:640,max:1920},height:{min:400,max:1080}}});console.log("Local stream obtained:",v),N(v)}catch(v){console.error("getUserMedia error:",v)}},c=async()=>{try{a.current=new ub.Device,await a.current.load({routerRtpCapabilities:R.current}),console.log("device's RTP capabilities",R.current),f()}catch(v){console.log(v),v.name==="unsupported error"&&console.warn("browser not supported")}},f=()=>{o.current.emit("createWebRtcTransport",{consumer:!1},({params:v})=>{if(v.error){console.log(v.error);return}console.log(v),w.current=a.current.createSendTransport(v),w.current.on("connect",async({dtlsParameters:C},S,O)=>{try{await o.current.emit("transport-connect",{dtlsParameters:C}),S()}catch(U){O(U)}}),w.current.on("produce",async(C,S,O)=>{console.log(C);try{await o.current.emit("transport-produce",{kind:C.kind,rtpParameters:C.rtpParameters,appData:C.appData},({id:U,producersExists:I})=>{S({id:U}),I&&m()})}catch(U){O(U)}}),u()})},u=async()=>{b.current=await w.current.produce(L.current),E.current=await w.current.produce(k.current),b.current.on("trackended",()=>{console.log("Audio track ended")}),b.current.on("transportclose",()=>{console.log("Audio transport closed")}),E.current.on("trackended",()=>{console.log("Video track ended")}),E.current.on("transportclose",()=>{console.log("Video transport closed")})},p=async v=>{M.current.includes(v)||(M.current.push(v),await o.current.emit("createWebRtcTransport",{consumer:!0},({params:C})=>{if(C.error){console.log(C.error);return}console.log(`Params... ${C}`);let S;try{S=a.current.createRecvTransport(C)}catch(O){console.log(O);return}S.on("connect",async({dtlsParameters:O},U,I)=>{try{await o.current.emit("transport-recv-connect",{dtlsParameters:O,serverConsumerTransportId:C.id}),U()}catch(A){I(A)}}),y(S,v,C.id)}))},m=()=>{o.current.emit("getProducers",v=>{console.log(`producer id ${v}`),v.forEach(p)})},y=async(v,C,S)=>{await o.current.emit("consume",{rtpCapabilities:a.current.rtpCapabilities,remoteProducerId:C,serverConsumerTransportId:S},async({params:O})=>{if(O.error){console.log("cannot consume");return}console.log(`Consumer Params ${O}`);const U=await v.consume({id:O.id,producerId:O.producerId,kind:O.kind,rtpParameters:O.rtpParameters});T.current=[...T.current,{consumerTransport:v,serverConsumerTransportId:O.id,producerId:C,consumer:U}];const I=U.track,A=C.replace(/[^a-zA-Z0-9_-]/g,"_"),Y=document.createElement("div");Y.setAttribute("id",`td-${A}`),O.kind==="audio"?Y.innerHTML=`<audio id="${A}" autoplay></audio>`:(Y.setAttribute("class","remoteVideo"),Y.innerHTML=`<video id="${A}" autoplay class="video"></video>`),s.current&&s.current.appendChild(Y),document.getElementById(A).srcObject=new MediaStream([I]),o.current.emit("consumer-resume",{serverConsumerId:O.serverConsumerId})})};return Ri.jsx("div",{id:"video",children:Ri.jsx("table",{className:"mainTable",children:Ri.jsx("tbody",{children:Ri.jsxs("tr",{children:[Ri.jsx("td",{className:"localColumn",children:Ri.jsx("video",{ref:d,id:"localVideo",autoPlay:!0,className:"video",muted:!0})}),Ri.jsx("td",{className:"remoteColumn",children:Ri.jsx("div",{ref:s,id:"videoContainer"})})]})})})})}wy.createRoot(document.getElementById("root")).render(Ri.jsx(xt.StrictMode,{children:Ri.jsx(fb,{})}));
